{
  "number": 3150,
  "title": "Props are not available in some contexts",
  "body": "I have checked `OutDir` but it also doesn't work with for others props (but does with some, don't see any correltion).\r\n\r\nI don't see what could be wrong as I just specify some props and they don't appear in `targets`. Here is sample from my targets:\r\n\r\n```\r\n<Target Name=\"Build\">\r\n  <Error Condition=\"'$(OutDir)' == ''\" Text=\"The OutDir property is missing\" />\r\n  <Exec Command='$(RunCommand) \"-o @(OutDir) @(SolCompile)\" $(RunCommandArguments)' WorkingDirectory=\"$(RunWorkingDirectory)\" />\r\n</Target>\r\n```\r\n\r\nAnd this is how it gets interpreted:\r\n\r\n```\r\n1>Target Build:\r\n1>  Task \"Error\" skipped, due to false condition; ('$(OutDir)' == '') was evaluated as ('bin/Debug' == '').\r\n1>  Using \"Exec\" task from assembly \"Microsoft.Build.Tasks.Core, Version=15.1.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a\".\r\n1>  Task \"Exec\"\r\n1>    solc  \"-o  Example.sol\" --bin --abi --overwrite\r\n```\r\n\r\nI just don't get WHY `OutDir` is set for `Error` line but for some reason is not available on very next one...\r\n\r\n### Steps to reproduce\r\n\r\nProject file\r\n```xml\r\n<?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<Project ToolsVersion=\"15.0\" DefaultTargets=\"Build\" xmlns=\"http://schemas.microsoft.com/developer/msbuild/2003\">\r\n  <PropertyGroup Label=\"Globals\">\r\n    <CustomProjectExtensionsPath>$(LocalAppData)\\CustomProjectSystems\\Solidity\\</CustomProjectExtensionsPath>\r\n    <ProjectGuid>937ba17e-bd88-426f-99e6-7015493d92cc</ProjectGuid>\r\n  </PropertyGroup>\r\n  <Import Project=\"$(CustomProjectExtensionsPath)Solidity.props\" />\r\n  <ItemGroup>\r\n    <SolCompile Include=\"**\\*.sol\" />\r\n  </ItemGroup>\r\n  <Import Project=\"$(CustomProjectExtensionsPath)Solidity.targets\" />\r\n</Project>\r\n```\r\n\r\nDirectory contents:\r\n```\r\n/\r\n- Example.sol\r\n```\r\n\r\nProps\r\n\r\n```\r\n<?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<Project ToolsVersion=\"15.0\" DefaultTargets=\"Build\" xmlns=\"http://schemas.microsoft.com/developer/msbuild/2003\">\r\n  <PropertyGroup>\r\n    <ProjectSystemBase>$(MSBuildThisFileDirectory)</ProjectSystemBase>\r\n\r\n    <Configuration Condition=\" '$(Configuration)' == '' \">Debug</Configuration>\r\n    <Platform Condition=\" '$(Platform)' == '' \">AnyCPU</Platform>\r\n\r\n    <DebuggerFlavor>ScriptDebugger</DebuggerFlavor>\r\n    <RunCommand>solc</RunCommand>\r\n    <RunCommandArguments>--bin --abi --overwrite</RunCommandArguments>\r\n    <RunWorkingDirectory>$(MSBuildProjectDirectory)</RunWorkingDirectory>\r\n    <OutDir>bin/$(Configuration)</OutDir>\r\n  </PropertyGroup>\r\n</Project>\r\n```\r\n\r\nTargets:\r\n```\r\n<?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<Project ToolsVersion=\"15.0\" DefaultTargets=\"Build\" xmlns=\"http://schemas.microsoft.com/developer/msbuild/2003\">\r\n  <ItemGroup Label=\"ProjectConfigurations\">\r\n    <ProjectConfiguration Include=\"Debug|AnyCPU\">\r\n      <Configuration>Debug</Configuration>\r\n      <Platform>AnyCPU</Platform>\r\n    </ProjectConfiguration>\r\n    <ProjectConfiguration Include=\"Release|AnyCPU\">\r\n      <Configuration>Release</Configuration>\r\n      <Platform>AnyCPU</Platform>\r\n    </ProjectConfiguration>\r\n  </ItemGroup>\r\n\r\n  <!-- Capabilities for this project.  Conditions should be based on platform|configuration only. -->\r\n  <ItemGroup>\r\n    <ProjectCapability Include=\"Solidity\" />\r\n    <ProjectCapability Include=\"UseFileGlobs\" />\r\n    <ProjectCapability Include=\"OpenProjectFile\" />\r\n    <ProjectCapability Include=\"HandlesOwnReload\" />\r\n    <ProjectCapability Include=\"ProjectConfigurationsDeclaredAsItems\" />\r\n  </ItemGroup>\r\n\r\n  <ItemGroup>\r\n    <PropertyPageSchema Include=\"\r\n                        $(MSBuildThisFileDirectory)Rules\\general.xaml;\r\n                        \">\r\n      <Context>Project</Context>\r\n    </PropertyPageSchema>\r\n    <PropertyPageSchema Include=\"\r\n                        $(MSBuildThisFileDirectory)Rules\\ProjectItemsSchema.xaml;\r\n                        \"/>\r\n    <PropertyPageSchema Include=\"$(MSBuildThisFileDirectory)Rules\\general_file.xaml\">\r\n      <Context>File</Context>\r\n    </PropertyPageSchema>\r\n    <PropertyPageSchema Include=\"$(MSBuildThisFileDirectory)Rules\\scc.xaml\">\r\n      <Context>Invisible</Context>\r\n    </PropertyPageSchema>\r\n\r\n    <PropertyPageSchema Include=\"\r\n                        $(MSBuildThisFileDirectory)Rules\\folder.xaml;\r\n                        $(MSBuildThisFileDirectory)Rules\\none.xaml;\r\n                        \">\r\n      <Context>File;BrowseObject</Context>\r\n    </PropertyPageSchema>\r\n\r\n    <PropertyPageSchema Include=\"$(MSBuildThisFileDirectory)Rules\\general.browseobject.xaml\">\r\n      <Context>BrowseObject</Context>\r\n    </PropertyPageSchema>\r\n\r\n    <PropertyPageSchema Include=\"$(MSBuildThisFileDirectory)Rules\\Sol.xaml;\">\r\n      <Context>File;BrowseObject</Context>\r\n    </PropertyPageSchema>\r\n  </ItemGroup>\r\n\r\n  <Target Name=\"Build\">\r\n    <Error Condition=\"'$(OutDir)' == ''\" Text=\"The OutDir property is missing\" />\r\n    <Exec Command='$(RunCommand) \"-o @(OutDir) @(SolCompile)\" $(RunCommandArguments)' WorkingDirectory=\"$(RunWorkingDirectory)\" />\r\n  </Target>\r\n</Project>\r\n```\r\n\r\nCommand line\r\n```\r\nC:\\Users\\Alex\\source\\repos\\Solidity9\\Solidity9>msbuild Solidity9.solidproj /verbosity:d\r\nMicrosoft (R) Build Engine version 15.6.82.30579 for .NET Framework\r\nCopyright (C) Microsoft Corporation. All rights reserved.\r\n\r\nBuild started 29.03.2018 12:12:03.\r\nProject \"C:\\Users\\Alex\\source\\repos\\Solidity9\\Solidity9\\Solidity9.solidproj\" on node 1 (default targets).\r\nBuilding with tools version \"15.0\".\r\nTarget \"Build\" in file \"C:\\Users\\Alex\\AppData\\Local\\CustomProjectSystems\\Solidity\\Solidity.targets\" from project \"C:\\Us\r\ners\\Alex\\source\\repos\\Solidity9\\Solidity9\\Solidity9.solidproj\" (entry point):\r\nTask \"Error\" skipped, due to false condition; ('$(OutDir)' == '') was evaluated as ('bin/Debug' == '').\r\nUsing \"Exec\" task from assembly \"Microsoft.Build.Tasks.Core, Version=15.1.0.0, Culture=neutral, PublicKeyToken=b03f5f7f\r\n11d50a3a\".\r\nTask \"Exec\"\r\n  solc \"-o  Example.sol\" --bin --abi --overwrite\r\n<stdin>(2,1): warning G0EB32854: Source file does not specify required compiler version!Consider adding \"pragma solidit\r\ny ^0.4.21;\" [C:\\Users\\Alex\\source\\repos\\Solidity9\\Solidity9\\Solidity9.solidproj]\r\n\r\n  ^\r\nDone executing task \"Exec\".\r\nDone building target \"Build\" in project \"Solidity9.solidproj\".\r\nDone Building Project \"C:\\Users\\Alex\\source\\repos\\Solidity9\\Solidity9\\Solidity9.solidproj\" (default targets).\r\n```\r\n### Expected  behavior\r\n\r\n `solc \"-o  bin/Debug Example.sol\" --bin --abi --overwrite`\r\n\r\n### Actual behavior\r\n\r\n`solc \"-o  Example.sol\" --bin --abi --overwrite`\r\n\r\n### Environment data\r\n`msbuild /version` output: 15.6.82.30579",
  "state": "CLOSED",
  "createdAt": "2018-03-29T09:30:40Z",
  "updatedAt": "2024-02-21T17:13:51Z",
  "closedAt": "2018-03-29T11:30:25Z",
  "author": {
    "login": "Pzixel"
  },
  "labels": [
    "triaged"
  ],
  "assignees": {
    "nodes": []
  },
  "milestone": null,
  "comments": {
    "nodes": [
      {
        "body": "$(OutDir) vs @(OutDir) ...",
        "createdAt": "2018-03-29T11:31:02Z",
        "updatedAt": "2018-03-29T11:31:02Z",
        "author": {
          "login": "Pzixel"
        }
      }
    ]
  }
}