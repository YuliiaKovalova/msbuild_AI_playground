{
  "number": 3859,
  "title": "Getting several ArgumentNullExceptions on build of ASP.NET Core",
  "body": "### Steps to reproduce\r\n\r\nDifficult to reproduce because this happened as part of ASP.NET Core's full build, so it is not isolated to a single MSBuild file.\r\n\r\nBut, we suspect this might have been caused due to having no free disk space on the machine, because we saw other failures around the same time on the same machine that had a clearer failure.\r\n\r\nThis is the MSBuild file that was being run: https://github.com/aspnet/Universe/blob/master/build/RepositoryBuild.targets\r\n\r\n### Expected  behavior\r\n\r\nBuild should pass\r\n\r\n### Actual behavior\r\n\r\nGot this failure log from our CI build:\r\n\r\n```\r\n[04:19:18] :\t [Step 3/4]   MSBUILD : error MSB1025: An internal failure occurred while running MSBuild.\r\n[04:19:18] :\t [Step 3/4]   System.ArgumentNullException: Value cannot be null.\r\n[04:19:18] :\t [Step 3/4]   Parameter name: collection\r\n[04:19:18] :\t [Step 3/4]      at Microsoft.Build.Execution.BuildManager.EndBuild()\r\n[04:19:18] :\t [Step 3/4]      at Microsoft.Build.CommandLine.MSBuildApp.BuildProject(String projectFile, String[] targets, String toolsVersion, Dictionary`2 globalProperties, Dictionary`2 restoreProperties, ILogger[] loggers, LoggerVerbosity verbosity, DistributedLoggerRecord[] distributedLoggerRecords, Int32 cpuCount, Boolean enableNodeReuse, TextWriter preprocessWriter, Boolean detailedSummary, ISet`1 warningsAsErrors, ISet`1 warningsAsMessages, Boolean enableRestore, ProfilerLogger profilerLogger, Boolean enableProfiler)\r\n[04:19:18] :\t [Step 3/4]   \r\n[04:19:18] :\t [Step 3/4]   MSBUILD : error MSB1025: An internal failure occurred while running MSBuild.\r\n[04:19:18] :\t [Step 3/4]   System.ArgumentNullException: Value cannot be null.\r\n[04:19:18] :\t [Step 3/4]   Parameter name: collection\r\n[04:19:18] :\t [Step 3/4]      at Microsoft.Build.CommandLine.MSBuildApp.BuildProject(String projectFile, String[] targets, String toolsVersion, Dictionary`2 globalProperties, Dictionary`2 restoreProperties, ILogger[] loggers, LoggerVerbosity verbosity, DistributedLoggerRecord[] distributedLoggerRecords, Int32 cpuCount, Boolean enableNodeReuse, TextWriter preprocessWriter, Boolean detailedSummary, ISet`1 warningsAsErrors, ISet`1 warningsAsMessages, Boolean enableRestore, ProfilerLogger profilerLogger, Boolean enableProfiler)\r\n[04:19:18] :\t [Step 3/4]      at Microsoft.Build.CommandLine.MSBuildApp.Execute(String[] commandLine)\r\n[04:19:18] :\t [Step 3/4]   \r\n[04:19:18] :\t [Step 3/4]   Unhandled Exception: System.ArgumentNullException: Value cannot be null.\r\n[04:19:18] :\t [Step 3/4]   Parameter name: collection\r\n[04:19:18] :\t [Step 3/4]      at Microsoft.Build.CommandLine.MSBuildApp.BuildProject(String projectFile, String[] targets, String toolsVersion, Dictionary`2 globalProperties, Dictionary`2 restoreProperties, ILogger[] loggers, LoggerVerbosity verbosity, DistributedLoggerRecord[] distributedLoggerRecords, Int32 cpuCount, Boolean enableNodeReuse, TextWriter preprocessWriter, Boolean detailedSummary, ISet`1 warningsAsErrors, ISet`1 warningsAsMessages, Boolean enableRestore, ProfilerLogger profilerLogger, Boolean enableProfiler)\r\n[04:19:18] :\t [Step 3/4]      at Microsoft.Build.CommandLine.MSBuildApp.Execute(String[] commandLine)\r\n[04:19:18] :\t [Step 3/4]      at Microsoft.Build.CommandLine.MSBuildApp.Main(String[] args)\r\n[04:19:18] :\t [Step 3/4]    [0;31merror  : dotnet failed with exit code 134 [0m\r\n[04:19:18] :\t [Step 3/4] /Users/asplab/TeamCity/work/33bdfc1cae7b2a38/build/RepositoryBuild.targets(140,5): error : Building Mvc failed: build.sh exited code 134 [/Users/asplab/TeamCity/work/33bdfc1cae7b2a38/.dotnet/buildtools/korebuild/2.2.0-preview2-20181011.10/KoreBuild.proj]\r\n[04:19:19] :\t [Step 3/4] \r\n[04:19:19] :\t [Step 3/4] Build FAILED.\r\n[04:19:19] :\t [Step 3/4] \r\n[04:19:19] :\t [Step 3/4] /Users/asplab/TeamCity/work/33bdfc1cae7b2a38/build/RepositoryBuild.targets(140,5): error : Building Mvc failed: build.sh exited code 134 [/Users/asplab/TeamCity/work/33bdfc1cae7b2a38/.dotnet/buildtools/korebuild/2.2.0-preview2-20181011.10/KoreBuild.proj]\r\n[04:19:19] :\t [Step 3/4]     0 Warning(s)\r\n[04:19:19] :\t [Step 3/4]     1 Error(s)\r\n```\r\n\r\n### Environment data\r\n\r\nRunning .NET Core 2.2 recent build.\r\n\r\nOS info:\r\n* macOS Sierra\r\n",
  "state": "OPEN",
  "createdAt": "2018-10-15T17:00:00Z",
  "updatedAt": "2024-02-21T16:32:38Z",
  "closedAt": null,
  "author": {
    "login": "Eilon"
  },
  "labels": [
    "triaged"
  ],
  "assignees": {
    "nodes": []
  },
  "milestone": null,
  "comments": {
    "nodes": []
  }
}