{
  "number": 5953,
  "title": "MSBuild System.IO.IOException",
  "body": "The MSBuild has no error before update window.\r\nThe MSBuild show following error message When I use cmake to generator vsproject.\r\nMy Enviornment:\r\nOS: win10 1909 18363.1256 profession\r\nCPU: AMD 3700X\r\nGPU: GTX 1050\r\nVisual Studio: 2019\r\nMSVC: V14.28\r\n\r\n```\r\n1> \u5df2\u4e3a\u914d\u7f6e\u201cx64-Release\u201d\u542f\u52a8 CMake \u751f\u6210\u3002\r\n1> \u547d\u4ee4\u884c: \"cmd.exe\" /c \"%SYSTEMROOT%\\System32\\chcp.com 65001 >NUL && \"C:\\PROGRAM FILES (X86)\\MICROSOFT VISUAL STUDIO\\2019\\PROFESSIONAL\\COMMON7\\IDE\\COMMONEXTENSIONS\\MICROSOFT\\CMAKE\\CMake\\bin\\cmake.exe\"  -G \"Visual Studio 16 2019\" -A x64  -DCMAKE_CONFIGURATION_TYPES:STRING=\"RelWithDebInfo\" -DCMAKE_INSTALL_PREFIX:PATH=\"D:\\_gitsolo\\tksee\\TkseeBuild\\out\\install\\x64-Release\"  \"D:\\_gitsolo\\tksee\\TkseeBuild\" 2>&1\"\r\n1> \u5de5\u4f5c\u76ee\u5f55: D:\\_gitsolo\\tksee\\TkseeBuild\\out\\build\\x64-Release\r\n1> [CMake] -- Selecting Windows SDK version 10.0.19041.0 to target Windows 10.0.18363.\r\n1> [CMake] CMake Error at D:\\_gitsolo\\tksee\\TkseeBuild\\CMakeLists.txt:4 (project):\r\n1> [CMake]   Failed to run MSBuild command:\r\n1> [CMake] \r\n1> [CMake]     C:/Program Files (x86)/Microsoft Visual Studio/2019/Professional/MSBuild/Current/Bin/MSBuild.exe\r\n1> [CMake] \r\n1> [CMake]   to get the value of VCTargetsPath:\r\n1> [CMake] \r\n1> [CMake]     \u7528\u4e8e .NET Framework \u7684 Microsoft (R) \u751f\u6210\u5f15\u64ce\u7248\u672c 16.8.2+25e4d540b\r\n1> [CMake]     \u7248\u6743\u6240\u6709(C) Microsoft Corporation\u3002\u4fdd\u7559\u6240\u6709\u6743\u5229\u3002\r\n1> [CMake]     \r\n1> [CMake]     \u751f\u6210\u542f\u52a8\u65f6\u95f4\u4e3a 2020/12/10 9:35:46\u3002\r\n1> [CMake]     \u8282\u70b9 1 \u4e0a\u7684\u9879\u76ee\u201cD:\\_gitsolo\\tksee\\TkseeBuild\\out\\build\\x64-Release\\CMakeFiles\\3.18.20081302-MSVC_2\\VCTargetsPath.vcxproj\u201d(\u9ed8\u8ba4\u76ee\u6807)\u3002\r\n1> [CMake]     InitializeBuildStatus:\r\n1> [CMake]       \u6b63\u5728\u5bf9\u201cx64\\Debug\\VCTargetsPath.tlog\\unsuccessfulbuild\u201d\u6267\u884c Touch \u4efb\u52a1\u3002\r\n1> [CMake]     C:\\Program Files (x86)\\Microsoft Visual Studio\\2019\\Professional\\MSBuild\\Microsoft\\VC\\v160\\Microsoft.CppCommon.targets(153,5): error MSB6003: \u6307\u5b9a\u7684\u4efb\u52a1\u53ef\u6267\u884c\u6587\u4ef6\u201ccmd.exe\u201d\u672a\u80fd\u8fd0\u884c\u3002System.IO.IOException: \u51fd\u6570\u4e0d\u6b63\u786e\u3002 [D:\\_gitsolo\\tksee\\TkseeBuild\\out\\build\\x64-Release\\CMakeFiles\\3.18.20081302-MSVC_2\\VCTargetsPath.vcxproj]\r\n1> [CMake]     C:\\Program Files (x86)\\Microsoft Visual Studio\\2019\\Professional\\MSBuild\\Microsoft\\VC\\v160\\Microsoft.CppCommon.targets(153,5): error MSB6003:  [D:\\_gitsolo\\tksee\\TkseeBuild\\out\\build\\x64-Release\\CMakeFiles\\3.18.20081302-MSVC_2\\VCTargetsPath.vcxproj]\r\n1> [CMake]     C:\\Program Files (x86)\\Microsoft Visual Studio\\2019\\Professional\\MSBuild\\Microsoft\\VC\\v160\\Microsoft.CppCommon.targets(153,5): error MSB6003:    \u5728 System.IO.__Error.WinIOError(Int32 errorCode, String maybeFullPath) [D:\\_gitsolo\\tksee\\TkseeBuild\\out\\build\\x64-Release\\CMakeFiles\\3.18.20081302-MSVC_2\\VCTargetsPath.vcxproj]\r\n1> [CMake]     C:\\Program Files (x86)\\Microsoft Visual Studio\\2019\\Professional\\MSBuild\\Microsoft\\VC\\v160\\Microsoft.CppCommon.targets(153,5): error MSB6003:    \u5728 System.IO.FileStream.WriteCore(Byte[] buffer, Int32 offset, Int32 count) [D:\\_gitsolo\\tksee\\TkseeBuild\\out\\build\\x64-Release\\CMakeFiles\\3.18.20081302-MSVC_2\\VCTargetsPath.vcxproj]\r\n1> [CMake]     C:\\Program Files (x86)\\Microsoft Visual Studio\\2019\\Professional\\MSBuild\\Microsoft\\VC\\v160\\Microsoft.CppCommon.targets(153,5): error MSB6003:    \u5728 System.IO.FileStream.FlushWrite(Boolean calledFromFinalizer) [D:\\_gitsolo\\tksee\\TkseeBuild\\out\\build\\x64-Release\\CMakeFiles\\3.18.20081302-MSVC_2\\VCTargetsPath.vcxproj]\r\n1> [CMake]     C:\\Program Files (x86)\\Microsoft Visual Studio\\2019\\Professional\\MSBuild\\Microsoft\\VC\\v160\\Microsoft.CppCommon.targets(153,5): error MSB6003:    \u5728 System.IO.FileStream.Dispose(Boolean disposing) [D:\\_gitsolo\\tksee\\TkseeBuild\\out\\build\\x64-Release\\CMakeFiles\\3.18.20081302-MSVC_2\\VCTargetsPath.vcxproj]\r\n1> [CMake]     C:\\Program Files (x86)\\Microsoft Visual Studio\\2019\\Professional\\MSBuild\\Microsoft\\VC\\v160\\Microsoft.CppCommon.targets(153,5): error MSB6003:    \u5728 System.IO.Stream.Close() [D:\\_gitsolo\\tksee\\TkseeBuild\\out\\build\\x64-Release\\CMakeFiles\\3.18.20081302-MSVC_2\\VCTargetsPath.vcxproj]\r\n1> [CMake]     C:\\Program Files (x86)\\Microsoft Visual Studio\\2019\\Professional\\MSBuild\\Microsoft\\VC\\v160\\Microsoft.CppCommon.targets(153,5): error MSB6003:    \u5728 System.IO.StreamWriter.Dispose(Boolean disposing) [D:\\_gitsolo\\tksee\\TkseeBuild\\out\\build\\x64-Release\\CMakeFiles\\3.18.20081302-MSVC_2\\VCTargetsPath.vcxproj]\r\n1> [CMake]     C:\\Program Files (x86)\\Microsoft Visual Studio\\2019\\Professional\\MSBuild\\Microsoft\\VC\\v160\\Microsoft.CppCommon.targets(153,5): error MSB6003:    \u5728 System.IO.TextWriter.Dispose() [D:\\_gitsolo\\tksee\\TkseeBuild\\out\\build\\x64-Release\\CMakeFiles\\3.18.20081302-MSVC_2\\VCTargetsPath.vcxproj]\r\n1> [CMake]     C:\\Program Files (x86)\\Microsoft Visual Studio\\2019\\Professional\\MSBuild\\Microsoft\\VC\\v160\\Microsoft.CppCommon.targets(153,5): error MSB6003:    \u5728 Microsoft.Build.Tasks.Exec.CreateTemporaryBatchFile() [D:\\_gitsolo\\tksee\\TkseeBuild\\out\\build\\x64-Release\\CMakeFiles\\3.18.20081302-MSVC_2\\VCTargetsPath.vcxproj]\r\n1> [CMake]     C:\\Program Files (x86)\\Microsoft Visual Studio\\2019\\Professional\\MSBuild\\Microsoft\\VC\\v160\\Microsoft.CppCommon.targets(153,5): error MSB6003:    \u5728 Microsoft.Build.Tasks.Exec.AddCommandLineCommands(CommandLineBuilderExtension commandLine) [D:\\_gitsolo\\tksee\\TkseeBuild\\out\\build\\x64-Release\\CMakeFiles\\3.18.20081302-MSVC_2\\VCTargetsPath.vcxproj]\r\n1> [CMake]     C:\\Program Files (x86)\\Microsoft Visual Studio\\2019\\Professional\\MSBuild\\Microsoft\\VC\\v160\\Microsoft.CppCommon.targets(153,5): error MSB6003:    \u5728 Microsoft.Build.Tasks.ToolTaskExtension.GenerateCommandLineCommands() [D:\\_gitsolo\\tksee\\TkseeBuild\\out\\build\\x64-Release\\CMakeFiles\\3.18.20081302-MSVC_2\\VCTargetsPath.vcxproj]\r\n1> [CMake]     C:\\Program Files (x86)\\Microsoft Visual Studio\\2019\\Professional\\MSBuild\\Microsoft\\VC\\v160\\Microsoft.CppCommon.targets(153,5): error MSB6003:    \u5728 Microsoft.Build.Utilities.ToolTask.Execute() [D:\\_gitsolo\\tksee\\TkseeBuild\\out\\build\\x64-Release\\CMakeFiles\\3.18.20081302-MSVC_2\\VCTargetsPath.vcxproj]\r\n1> [CMake]     \u5df2\u5b8c\u6210\u751f\u6210\u9879\u76ee\u201cD:\\_gitsolo\\tksee\\TkseeBuild\\out\\build\\x64-Release\\CMakeFiles\\3.18.20081302-MSVC_2\\VCTargetsPath.vcxproj\u201d(\u9ed8\u8ba4\u76ee\u6807)\u7684\u64cd\u4f5c - \u5931\u8d25\u3002\r\n1> [CMake]     \r\n1> [CMake]     \u751f\u6210\u5931\u8d25\u3002\r\n1> [CMake]     \r\n1> [CMake]     \u201cD:\\_gitsolo\\tksee\\TkseeBuild\\out\\build\\x64-Release\\CMakeFiles\\3.18.20081302-MSVC_2\\VCTargetsPath.vcxproj\u201d(\u9ed8\u8ba4\u76ee\u6807) (1) ->\r\n1> [CMake]     (PostBuildEvent \u76ee\u6807) -> \r\n1> [CMake]       C:\\Program Files (x86)\\Microsoft Visual Studio\\2019\\Professional\\MSBuild\\Microsoft\\VC\\v160\\Microsoft.CppCommon.targets(153,5): error MSB6003: \u6307\u5b9a\u7684\u4efb\u52a1\u53ef\u6267\u884c\u6587\u4ef6\u201ccmd.exe\u201d\u672a\u80fd\u8fd0\u884c\u3002System.IO.IOException: \u51fd\u6570\u4e0d\u6b63\u786e\u3002 [D:\\_gitsolo\\tksee\\TkseeBuild\\out\\build\\x64-Release\\CMakeFiles\\3.18.20081302-MSVC_2\\VCTargetsPath.vcxproj]\r\n1> [CMake]     C:\\Program Files (x86)\\Microsoft Visual Studio\\2019\\Professional\\MSBuild\\Microsoft\\VC\\v160\\Microsoft.CppCommon.targets(153,5): error MSB6003:  [D:\\_gitsolo\\tksee\\TkseeBuild\\out\\build\\x64-Release\\CMakeFiles\\3.18.20081302-MSVC_2\\VCTargetsPath.vcxproj]\r\n1> [CMake]     C:\\Program Files (x86)\\Microsoft Visual Studio\\2019\\Professional\\MSBuild\\Microsoft\\VC\\v160\\Microsoft.CppCommon.targets(153,5): error MSB6003:    \u5728 System.IO.__Error.WinIOError(Int32 errorCode, String maybeFullPath) [D:\\_gitsolo\\tksee\\TkseeBuild\\out\\build\\x64-Release\\CMakeFiles\\3.18.20081302-MSVC_2\\VCTargetsPath.vcxproj]\r\n1> [CMake]     C:\\Program Files (x86)\\Microsoft Visual Studio\\2019\\Professional\\MSBuild\\Microsoft\\VC\\v160\\Microsoft.CppCommon.targets(153,5): error MSB6003:    \u5728 System.IO.FileStream.WriteCore(Byte[] buffer, Int32 offset, Int32 count) [D:\\_gitsolo\\tksee\\TkseeBuild\\out\\build\\x64-Release\\CMakeFiles\\3.18.20081302-MSVC_2\\VCTargetsPath.vcxproj]\r\n1> [CMake]     C:\\Program Files (x86)\\Microsoft Visual Studio\\2019\\Professional\\MSBuild\\Microsoft\\VC\\v160\\Microsoft.CppCommon.targets(153,5): error MSB6003:    \u5728 System.IO.FileStream.FlushWrite(Boolean calledFromFinalizer) [D:\\_gitsolo\\tksee\\TkseeBuild\\out\\build\\x64-Release\\CMakeFiles\\3.18.20081302-MSVC_2\\VCTargetsPath.vcxproj]\r\n1> [CMake]     C:\\Program Files (x86)\\Microsoft Visual Studio\\2019\\Professional\\MSBuild\\Microsoft\\VC\\v160\\Microsoft.CppCommon.targets(153,5): error MSB6003:    \u5728 System.IO.FileStream.Dispose(Boolean disposing) [D:\\_gitsolo\\tksee\\TkseeBuild\\out\\build\\x64-Release\\CMakeFiles\\3.18.20081302-MSVC_2\\VCTargetsPath.vcxproj]\r\n1> [CMake]     C:\\Program Files (x86)\\Microsoft Visual Studio\\2019\\Professional\\MSBuild\\Microsoft\\VC\\v160\\Microsoft.CppCommon.targets(153,5): error MSB6003:    \u5728 System.IO.Stream.Close() [D:\\_gitsolo\\tksee\\TkseeBuild\\out\\build\\x64-Release\\CMakeFiles\\3.18.20081302-MSVC_2\\VCTargetsPath.vcxproj]\r\n1> [CMake]     C:\\Program Files (x86)\\Microsoft Visual Studio\\2019\\Professional\\MSBuild\\Microsoft\\VC\\v160\\Microsoft.CppCommon.targets(153,5): error MSB6003:    \u5728 System.IO.StreamWriter.Dispose(Boolean disposing) [D:\\_gitsolo\\tksee\\TkseeBuild\\out\\build\\x64-Release\\CMakeFiles\\3.18.20081302-MSVC_2\\VCTargetsPath.vcxproj]\r\n1> [CMake]     C:\\Program Files (x86)\\Microsoft Visual Studio\\2019\\Professional\\MSBuild\\Microsoft\\VC\\v160\\Microsoft.CppCommon.targets(153,5): error MSB6003:    \u5728 System.IO.TextWriter.Dispose() [D:\\_gitsolo\\tksee\\TkseeBuild\\out\\build\\x64-Release\\CMakeFiles\\3.18.20081302-MSVC_2\\VCTargetsPath.vcxproj]\r\n1> [CMake]     C:\\Program Files (x86)\\Microsoft Visual Studio\\2019\\Professional\\MSBuild\\Microsoft\\VC\\v160\\Microsoft.CppCommon.targets(153,5): error MSB6003:    \u5728 Microsoft.Build.Tasks.Exec.CreateTemporaryBatchFile() [D:\\_gitsolo\\tksee\\TkseeBuild\\out\\build\\x64-Release\\CMakeFiles\\3.18.20081302-MSVC_2\\VCTargetsPath.vcxproj]\r\n1> [CMake]     C:\\Program Files (x86)\\Microsoft Visual Studio\\2019\\Professional\\MSBuild\\Microsoft\\VC\\v160\\Microsoft.CppCommon.targets(153,5): error MSB6003:    \u5728 Microsoft.Build.Tasks.Exec.AddCommandLineCommands(CommandLineBuilderExtension commandLine) [D:\\_gitsolo\\tksee\\TkseeBuild\\out\\build\\x64-Release\\CMakeFiles\\3.18.20081302-MSVC_2\\VCTargetsPath.vcxproj]\r\n1> [CMake]     C:\\Program Files (x86)\\Microsoft Visual Studio\\2019\\Professional\\MSBuild\\Microsoft\\VC\\v160\\Microsoft.CppCommon.targets(153,5): error MSB6003:    \u5728 Microsoft.Build.Tasks.ToolTaskExtension.GenerateCommandLineCommands() [D:\\_gitsolo\\tksee\\TkseeBuild\\out\\build\\x64-Release\\CMakeFiles\\3.18.20081302-MSVC_2\\VCTargetsPath.vcxproj]\r\n1> [CMake]     C:\\Program Files (x86)\\Microsoft Visual Studio\\2019\\Professional\\MSBuild\\Microsoft\\VC\\v160\\Microsoft.CppCommon.targets(153,5): error MSB6003:    \u5728 Microsoft.Build.Utilities.ToolTask.Execute() [D:\\_gitsolo\\tksee\\TkseeBuild\\out\\build\\x64-Release\\CMakeFiles\\3.18.20081302-MSVC_2\\VCTargetsPath.vcxproj]\r\n1> [CMake]     \r\n1> [CMake]         0 \u4e2a\u8b66\u544a\r\n1> [CMake]         1 \u4e2a\u9519\u8bef\r\n1> [CMake]     \r\n1> [CMake]     \u5df2\u7528\u65f6\u95f4 00:00:00.74\r\n1> [CMake]     \r\n1> [CMake] \r\n1> [CMake]   Exit code: 1\r\n1> [CMake] \r\n1> [CMake] \r\n1> [CMake] \r\n1> [CMake] -- Configuring incomplete, errors occurred!\r\n1> [CMake] See also \"D:/_gitsolo/tksee/TkseeBuild/out/build/x64-Release/CMakeFiles/CMakeOutput.log\".\r\n1> \u201ccmd.exe\u201d\u201c/c \"%SYSTEMROOT%\\System32\\chcp.com 65001 >NUL && \"C:\\PROGRAM FILES (X86)\\MICROSOFT VISUAL STUDIO\\2019\\PROFESSIONAL\\COMMON7\\IDE\\COMMONEXTENSIONS\\MICROSOFT\\CMAKE\\CMake\\bin\\cmake.exe\"  -G \"Visual Studio 16 2019\" -A x64  -DCMAKE_CONFIGURATION_TYPES:STRING=\"RelWithDebInfo\" -DCMAKE_INSTALL_PREFIX:PATH=\"D:\\_gitsolo\\tksee\\TkseeBuild\\out\\install\\x64-Release\"  \"D:\\_gitsolo\\tksee\\TkseeBuild\" 2>&1\"\u201d\u6267\u884c\u5931\u8d25\uff0c\u51fa\u73b0\u9519\u8bef:\u201c\u201ccmd.exe\u201d\u201c/c \"%SYSTEMROOT%\\System32\\chcp.com 65001 >NUL && \"C:\\PROGRAM FILES (X86)\\MICROSOFT VISUAL STUDIO\\2019\\PROFESSIONAL\\COMMON7\\IDE\\COMMONEXTENSIONS\\MICROSOFT\\CMAKE\\CMake\\bin\\cmake.exe\"  -G \"Visual Studio 16 2019\" -A x64  -DCMAKE_CONFIGURATION_TYPES:STRING=\"RelWithDebInfo\" -DCMAKE_INSTALL_PREFIX:PATH=\"D:\\_gitsolo\\tksee\\TkseeBuild\\out\\install\\x64-Release\"  \"D:\\_gitsolo\\tksee\\TkseeBuild\" 2>&1\"\u201d\u5df2\u8fd4\u56de\uff0c\u5e76\u5e26\u6709\u9000\u51fa\u4ee3\u7801: 1\u201d\u3002\r\n```",
  "state": "CLOSED",
  "createdAt": "2020-12-10T01:44:09Z",
  "updatedAt": "2024-02-21T17:02:03Z",
  "closedAt": "2021-09-11T19:00:54Z",
  "author": {
    "login": "bkbits"
  },
  "labels": [
    "needs-more-info",
    "stale",
    "closed-by-bot",
    "triaged"
  ],
  "assignees": {
    "nodes": []
  },
  "milestone": null,
  "comments": {
    "nodes": [
      {
        "body": "Hi @blackknifes,\r\n\r\nCan you share a simple project that reproduces this problem? Also, can you try with a 16.10+ version of MSBuild and see if you can still reproduce this issue? I don't think it's the same problem, but I recently fixed an issue with encoding that could theoretically be at fault. Thanks!",
        "createdAt": "2021-07-02T19:55:44Z",
        "updatedAt": "2021-07-02T19:55:44Z",
        "author": {
          "login": "Forgind"
        }
      },
      {
        "body": "This issue is marked as stale because feedback has been requested for 30 days with no response. Please respond within 14 days or this issue will be closed due to inactivity.",
        "createdAt": "2021-08-28T00:01:09Z",
        "updatedAt": "2021-08-28T00:01:09Z",
        "author": {
          "login": "ghost"
        }
      },
      {
        "body": "This issue was closed due to inactivity. If you can still reproduce this bug, please comment with the requested information, detailed steps to reproduce the problem, or any other notes that might help in the investigation.",
        "createdAt": "2021-09-11T19:00:55Z",
        "updatedAt": "2021-09-11T19:00:55Z",
        "author": {
          "login": "ghost"
        }
      }
    ]
  }
}