{
  "number": 9255,
  "title": "Release 17.8",
  "body": "(adapted from #8896)\r\n\r\nPreparation for the release:\r\n\r\n- [x] When VS main snaps to `17.9`, create `vs17.8` branch\r\n- [x] Create darc channel for `VS 17.9` if it doesn't already exist \\\r\n`darc add-channel --name \"VS 17.9\"`\r\n- [x] Ping internal \"First Responders\" Teams channel to get the new channel made available as a promotion target (e.g. https://github.com/dotnet/arcade/issues/12150): https://github.com/dotnet/arcade/pull/12989\r\n- [x] Remove the `main` to old release channel default channel \\\r\n`darc delete-default-channel --repo https://github.com/dotnet/msbuild --branch main --channel \"VS 17.8\"`\r\n- [x] Associate the `main` branch with the next release channel \\\r\n`darc add-default-channel  --channel \"VS 17.9\" --branch main --repo https://github.com/dotnet/msbuild`\r\n- [x] Check subscriptions for the current channel `VS 17.8` and update as necessary (for instance, SDK's `main` branch should usually be updated, whereas release branches often should not be \\\r\n`darc get-subscriptions --exact --source-repo https://github.com/dotnet/msbuild --channel \"VS 17.8\"`\\\r\nUpdate channel `VS 17.8` to `VS 17.9` for the sdk main subscription\\\r\n`darc update-subscription --id sdk_main_branch_id\r\n- [x] Ensure that the current release channel `VS 17.8` is associated with the correct release branch\\\r\n`darc get-default-channels --source-repo https://github.com/dotnet/msbuild --branch vs17.8` \\\r\nif it is not, `darc add-default-channel  --channel \"VS 17.8\" --branch vs17.8 --repo https://github.com/dotnet/msbuild`\r\n- [x] Fast-forward merge the correct commit (the one that is currently inserted to VS main) to the `vs17.8` branch \\\r\n`git push upstream 797fd829a374a880f63fd4eea4ea6990404c48f4:refs/heads/vs17.8` _Note the commit for future steps_\r\nThe branch should point to a good, recent spot, so the final-branding PR goes in on top of the right set of commits.\r\n- [x] Update the branch merge flow in `dotnet/versions` to have the currently-in-servicing branches (extend dotnet/versions#867): https://github.com/dotnet/versions/pull/911\r\n- [x] Fix OptProf data flow for the new vs17.8 branch\r\n   - Run manually [OptProf](https://devdiv.visualstudio.com/DevDiv/_build?definitionId=17389) pipeline for vs17.8 ('Run pipeline' in upper right)\r\n   - Run the [MSBuild pipeline](https://devdiv.visualstudio.com/DevDiv/_build?definitionId=9434) for vs17.8 without OptProf (set `SkipApplyOptimizationData` variable in 'Advanced options' section of the 'Run pipeline' menu to `true`)\r\n   - Run the [MSBuild pipeline](https://devdiv.visualstudio.com/DevDiv/_build?definitionId=9434) for vs17.8 with no extra vustomization - OptProf should succeed now\r\n- [x] Update the [release-branch insertion release definition](https://dev.azure.com/devdiv/DevDiv/_releaseDefinition?definitionId=2153&_a=definition-variables) to have `InsertTargetBranch` `rel/d17.8`.\r\n- [x] Prepare final branding PR for `vs17.8` but \u26a0\ufe0f DO NOT MERGE IT YET \u26a0\ufe0f:\r\n- [x] Create 17.9 branding PR, including public API baseline package version change (see https://github.com/dotnet/msbuild/pull/8116#discussion_r1049386978): #8949\r\n- [x] Merge 17.9 branding PR\r\n- [x] ~Prepare QB-mode bug for final branding insertion in internal VS repo~\r\n- [x] Merge final branding to `vs17.8` branch\r\n- [x] Note down the build (will be helpful for requesting nuget packages publishing): (https://devdiv.visualstudio.com/DevDiv/_build/results?buildId=8436672&view=results)\r\n- [x] ~Get QB approval~\r\n- [x] Merge to VS (babysit the automatically generated VS insertion PR https://devdiv.visualstudio.com/DevDiv/_git/VS/pullrequests for the MSBuild commit noted in above step): https://dev.azure.com/devdiv/DevDiv/_git/VS/pullrequest/499661\r\n- [x] Update the PackageValidationBaselineVersion to the latest released version (17.8.0) - this might require temporary addition of [build artifacts feed](https://github.com/dotnet/msbuild/blob/29397b577e3ec0fe0c7650c3ab0400909655dc88/NuGet.config#L9) as the new version is not yet added to the official feeds (this is post release). This can trigger a high severity CG error (https://eng.ms/docs/cloud-ai-platform/devdiv/one-engineering-system-1es/1es-docs/secure-supply-chain/how-to-securely-configure-package-source-files) - however it should be fine to keep this temporary feed untill the release.\r\n- [x] Create 17.8 localization ticket: https://aka.ms/ceChangeLocConfig (requesting to flip localization from 17.7 to 17.8)\r\nhttps://ceapex.visualstudio.com/CEINTL/_workitems/edit/907751\r\n- [x] Disable the 17.7 localization - by setting [`EnableReleaseOneLocBuild`](https://github.com/dotnet/msbuild/pull/9268) to `false`\r\n- [x] Enable 17.8 localization - by setting [`EnableReleaseOneLocBuild`](https://github.com/dotnet/msbuild/blob/vs17.8/.vsts-dotnet.yml) to `true`\r\n\r\nASAP On/After GA (based on release schedule (internal) https://dev.azure.com/devdiv/DevDiv/_wiki/wikis/DevDiv.wiki/10097/Dev17-Release):\r\n\r\n- [x] Push packages to nuget.org (not currently automated, contact dnceng - search \"Publish MSBuild 17.6 to NuGet.org\" email subject for template).\r\n- [x] Remove the temporarily added [build feed from `nuget.config`](https://github.com/dotnet/msbuild/blob/29397b577e3ec0fe0c7650c3ab0400909655dc88/NuGet.config#L9) if it was added in the `Update the PackageValidationBaselineVersion` step\r\n- [x] Update `main` subscriptions to the new channel (this can be done before or after release - depending on when the source repos from our previous - VS 17.8 - channle start to publish in the next - VS 17.9 - channel) \\\r\n`darc get-subscriptions --exact --target-repo https://github.com/dotnet/msbuild --target-branch main`\r\n- [x] Create the 17.8 release\r\n  - [x] Create tag (can be done upfront)\r\n  ```\r\n  git checkout <commit noted above>\r\n  git tag v17.8.3\r\n  git push upstream v17.8.3\r\n  ```\r\n  - [x] Create Release in Github with `Create Release from Tag` GH option (https://github.com/JanKrivanek/msbuild/releases/new?tag=v17.8.3) - the release notes can be prepopulated (`Generate Release Notes`)",
  "state": "CLOSED",
  "createdAt": "2023-09-22T14:46:37Z",
  "updatedAt": "2024-02-21T16:58:46Z",
  "closedAt": "2023-11-15T15:49:57Z",
  "author": {
    "login": "YuliiaKovalova"
  },
  "labels": [
    "triaged"
  ],
  "assignees": {
    "nodes": [
      {
        "login": "f-alizada"
      }
    ]
  },
  "milestone": null,
  "comments": {
    "nodes": [
      {
        "body": "Closing since every step that planned was completed. \r\nThank you @YuliiaKovalova, @rainersigwald ",
        "createdAt": "2023-11-15T15:49:57Z",
        "updatedAt": "2023-11-15T15:49:57Z",
        "author": {
          "login": "f-alizada"
        }
      }
    ]
  }
}