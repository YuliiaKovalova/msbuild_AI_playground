{
  "number": 2802,
  "title": "User folder has spaces and cibuild.cmd fails",
  "body": "My .nuget folder is at `C:\\Users\\Miguel Angelo\\.nuget\\`\r\n\r\nWhen running `cibuild.cmd` I get this message:\r\n\r\n```\r\nEXEC : error : Angelo\\.nuget\\packages\\....\r\n```\r\n\r\nNote that the User folder is split in half. May that be the problem?\r\n\r\nThe full error screen:\r\n\r\n```\r\n  Restoring build tools...\r\n  log  : Restoring packages for C:\\Projetos\\msbuild\\src\\.nuget\\project.json...\r\n  log  : Installing NuGet.Packaging.Core 4.5.0-preview2-4529.\r\n  log  : Installing NuGet.Packaging 4.5.0-preview2-4529.\r\n  log  : Installing System.Runtime.InteropServices 4.3.0.\r\n  log  : Installing NuGet.Versioning 4.5.0-preview2-4529.\r\n  log  : Installing NuGet.Protocol 4.5.0-preview2-4529.\r\n  log  : Installing NuGet.LibraryModel 4.5.0-preview2-4529.\r\n  log  : Installing NuGet.Common 4.5.0-preview2-4529.\r\n  log  : Installing Newtonsoft.Json 9.0.1.\r\n  log  : Installing NuGet.DependencyResolver.Core 4.5.0-preview2-4529.\r\n  log  : Installing xunit.runner.console 2.1.0.\r\n  log  : Installing NuGet.Configuration 4.5.0-preview2-4529.\r\n  log  : Installing NuGet.ProjectModel 4.5.0-preview2-4529.\r\n  log  : Installing NuGet.Frameworks 4.5.0-preview2-4529.\r\n  log  : Installing NuGet.Commands 4.5.0-preview2-4529.\r\n  log  : Installing Microsoft.DotNet.Build.Tasks.Feed 2.1.0-prerelease-02221-02.\r\n  log  : Installing MicroBuild.Core 0.2.0.\r\n  log  : Installing NuGet.Build.Tasks 4.5.0-preview2-4529.\r\n  log  : Installing NuSpec.ReferenceGenerator 1.4.2.\r\n  log  : Installing Microsoft.DotNet.BuildTools.GenAPI 1.0.0-beta2-00731-01.\r\n  log  : Installing Microsoft.Net.Compilers 2.3.1.\r\n  log  : Installing Nerdbank.GitVersioning 1.6.35.\r\n  log  : Writing lock file to disk. Path: C:\\Projetos\\msbuild\\src\\.nuget\\project.lock.json\r\n  log  : Generating MSBuild file C:\\Projetos\\msbuild\\src\\.nuget\\.nuget.nuget.targets.\r\n  log  : Generating MSBuild file C:\\Projetos\\msbuild\\src\\.nuget\\.nuget.nuget.props.\r\n  log  : Restore completed in 110997ms for C:\\Projetos\\msbuild\\src\\.nuget\\project.json.\r\n  Building Project(s): build\\dirs.proj : Configuration=Debug, Platform=x86\r\n  Building Project(s): src\\dirs.proj : Configuration=Debug, Platform=x86\r\n  Building Project(s): Samples\\dirs.proj : Configuration=Debug, Platform=x86\r\nEXEC : error : Angelo\\.nuget\\packages [C:\\Projetos\\msbuild\\src\\Framework\\Microsoft.Build.Framework.csproj]\r\nC:\\Projetos\\msbuild\\Tools\\packageresolve.targets(35,5): error MSB3073: O comando \"\"C:\\Projetos\\msbuild\\Tools\\dotnetcli/\r\ndotnet.exe\" restore --legacy-packages-directory --packages C:\\Users\\Miguel Angelo\\.nuget\\packages \"C:\\Projetos\\msbuild\\\r\nsrc\\Framework/project.json\"\" foi encerrado com o c\u00f3digo 1. [C:\\Projetos\\msbuild\\src\\Framework\\Microsoft.Build.Framework\r\n.csproj]\r\nEXEC : error : Angelo\\.nuget\\packages [C:\\Projetos\\msbuild\\src\\MSBuildTaskHost\\MSBuildTaskHost.csproj]\r\nC:\\Projetos\\msbuild\\Tools\\packageresolve.targets(35,5): error MSB3073: O comando \"\"C:\\Projetos\\msbuild\\Tools\\dotnetcli/\r\ndotnet.exe\" restore --legacy-packages-directory --packages C:\\Users\\Miguel Angelo\\.nuget\\packages \"C:\\Projetos\\msbuild\\\r\nsrc\\MSBuildTaskHost/project.json\"\" foi encerrado com o c\u00f3digo 1. [C:\\Projetos\\msbuild\\src\\MSBuildTaskHost\\MSBuildTaskHo\r\nst.csproj]\r\nEXEC : error : Angelo\\.nuget\\packages [C:\\Projetos\\msbuild\\Samples\\TaskUsageLogger\\TaskUsageLogger.csproj]\r\nEXEC : error : Angelo\\.nuget\\packages [C:\\Projetos\\msbuild\\Samples\\Dependency\\Dependency.csproj]\r\nC:\\Projetos\\msbuild\\Tools\\packageresolve.targets(35,5): error MSB3073: O comando \"\"C:\\Projetos\\msbuild\\Tools\\dotnetcli/\r\ndotnet.exe\" restore --legacy-packages-directory --packages C:\\Users\\Miguel Angelo\\.nuget\\packages \"C:\\Projetos\\msbuild\\\r\nSamples\\TaskUsageLogger/project.json\"\" foi encerrado com o c\u00f3digo 1. [C:\\Projetos\\msbuild\\Samples\\TaskUsageLogger\\TaskU\r\nsageLogger.csproj]\r\nEXEC : error : Angelo\\.nuget\\packages [C:\\Projetos\\msbuild\\Samples\\XmlFileLogger\\XmlFileLogger.csproj]\r\nC:\\Projetos\\msbuild\\Tools\\packageresolve.targets(35,5): error MSB3073: O comando \"\"C:\\Projetos\\msbuild\\Tools\\dotnetcli/\r\ndotnet.exe\" restore --legacy-packages-directory --packages C:\\Users\\Miguel Angelo\\.nuget\\packages \"C:\\Projetos\\msbuild\\\r\nSamples\\Dependency/project.json\"\" foi encerrado com o c\u00f3digo 1. [C:\\Projetos\\msbuild\\Samples\\Dependency\\Dependency.cspr\r\noj]\r\nC:\\Projetos\\msbuild\\Tools\\packageresolve.targets(35,5): error MSB3073: O comando \"\"C:\\Projetos\\msbuild\\Tools\\dotnetcli/\r\ndotnet.exe\" restore --legacy-packages-directory --packages C:\\Users\\Miguel Angelo\\.nuget\\packages \"C:\\Projetos\\msbuild\\\r\nSamples\\XmlFileLogger/project.json\"\" foi encerrado com o c\u00f3digo 1. [C:\\Projetos\\msbuild\\Samples\\XmlFileLogger\\XmlFileLo\r\ngger.csproj]\r\n\r\n\r\n** Build completed. Exit code: 1\r\n\r\nBootstrap build failed with errorlevel 1\r\n\r\n---------------------------------------\r\n- cibuild.cmd FAILED. -\r\n---------------------------------------\r\n```",
  "state": "CLOSED",
  "createdAt": "2017-12-13T10:45:31Z",
  "updatedAt": "2024-02-21T17:15:14Z",
  "closedAt": "2017-12-14T22:39:09Z",
  "author": {
    "login": "masbicudo"
  },
  "labels": [
    "triaged"
  ],
  "assignees": {
    "nodes": []
  },
  "milestone": null,
  "comments": {
    "nodes": [
      {
        "body": "By the way, while the fix is in the pipeline, you could apply it locally, so it won't hold you. It's just a single line change. I am worrying there might be more issues with the space in path names; no one likely tried that. LMK please if you run into more issues. I am a big fan of properly quoting path names!",
        "createdAt": "2017-12-14T21:45:24Z",
        "updatedAt": "2017-12-14T21:45:24Z",
        "author": {
          "login": "kkm000"
        }
      }
    ]
  }
}