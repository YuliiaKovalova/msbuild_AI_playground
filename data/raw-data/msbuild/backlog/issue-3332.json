{
  "number": 3332,
  "title": "Crash building VsVim",
  "body": "### Steps to reproduce\r\n\r\nClone:\r\n\r\nhttps://github.com/jaredpar/VsVim\r\n\r\nStart a Developer Command Prompt for VS; restore and build.\r\n\r\nCommand line\r\n```\r\nmsbuild /v:m /m /t:Restore VsVim.sln\r\nmsbuild /v:m /m /p:Configuration=Debug VsVim.sln\r\n```\r\n\r\nMay only repro on my machine.\r\n\r\n### Expected  behavior\r\n\r\nBuild completes without error\r\n\r\n### Actual behavior\r\n\r\nBuild crashes with `System.AccessViolationException`\r\n\r\nOutput of the second msbuild command:\r\n\r\n```\r\n**********************************************************************\r\n** Visual Studio 2017 Developer Command Prompt v15.7.1\r\n** Copyright (c) 2017 Microsoft Corporation\r\n**********************************************************************\r\nMicrosoft (R) Build Engine version 15.7.177.53362 for .NET Framework\r\nCopyright (C) Microsoft Corporation. All rights reserved.\r\n\r\n  CleanVsix -> C:\\Build\\VsVim\\Binaries\\Debug\\CleanVsix\\net461\\CleanVsix.exe\r\n  VimCore -> C:\\Build\\VsVim\\Binaries\\Debug\\VimCore\\net45\\Vim.Core.dll\r\n  VimEditorHost -> C:\\Build\\VsVim\\Binaries\\Debug\\VimEditorHost\\net461\\Vim.EditorHost.dll\r\n  VimWpf -> C:\\Build\\VsVim\\Binaries\\Debug\\VimWpf\\net45\\Vim.UI.Wpf.dll\r\n  VsInterfaces -> C:\\Build\\VsVim\\Binaries\\Debug\\VsInterfaces\\net45\\Vim.VisualStudio.Interfaces.dll\r\n  VimApp -> C:\\Build\\VsVim\\Binaries\\Debug\\VimApp\\net461\\VimApp.exe\r\n  VimTestUtils -> C:\\Build\\VsVim\\Binaries\\Debug\\VimTestUtils\\net461\\Vim.UnitTest.Utils.dll\r\n  VsVimShared -> C:\\Build\\VsVim\\Binaries\\Debug\\VsVimShared\\net45\\Vim.VisualStudio.Shared.dll\r\n  VsVimSharedTest -> C:\\Build\\VsVim\\Binaries\\Debug\\VsVimSharedTest\\net461\\Vim.VisualStudio.Shared.U\r\n  nitTest.dll\r\n  VimWpfTest -> C:\\Build\\VsVim\\Binaries\\Debug\\VimWpfTest\\net461\\Vim.UI.Wpf.UnitTest.dll\r\n  VimCoreTest -> C:\\Build\\VsVim\\Binaries\\Debug\\VimCoreTest\\net461\\Vim.Core.UnitTest.dll\r\n  Vs2013 -> C:\\Build\\VsVim\\Binaries\\Debug\\Vs2013\\net45\\Vim.VisualStudio.Vs2013.dll\r\n  Vs2015 -> C:\\Build\\VsVim\\Binaries\\Debug\\Vs2015\\net45\\Vim.VisualStudio.Vs2015.dll\r\n  Vs2012 -> C:\\Build\\VsVim\\Binaries\\Debug\\Vs2012\\net45\\Vim.VisualStudio.Vs2012.dll\r\n  Vs2017 -> C:\\Build\\VsVim\\Binaries\\Debug\\Vs2017\\net46\\Vim.VisualStudio.Vs2017.dll\r\n  VsVim -> C:\\Build\\VsVim\\Binaries\\Debug\\VsVim\\net45\\VsVim.dll\r\n  VsVim -> C:\\Build\\VsVim\\Binaries\\Debug\\VsVim\\net45\\VsVim.vsix\r\n\r\nUnhandled Exception: System.AccessViolationException: Attempted to read or write protected memory. This is often an indication that other memory is corrupt.\r\n   at VSIXInstaller.SettingsManager.GetRegRootFromManager(IntPtr manager)\r\n   at VSIXInstaller.SettingsManager.get_RegRootHive()\r\n   at VSIXInstaller.SettingsManager.GetReadOnlySettingsStore(SettingsScope scope)\r\n   at Microsoft.VisualStudio.ExtensionManager.ExtensionEngineImpl.GetLastExtensionChangedTimestampInternal(IEngineHost engineHost, String perMachineExtensionInstallRoot, String& reason)\r\n   at Microsoft.VisualStudio.ExtensionManager.InstalledExtensionListData.CreateExtensionListData(ExtensionEngineImpl engine, IEnumerable`1 enabledExtensions, Boolean safeMode, Boolean isSdkList)\r\n   at Microsoft.VisualStudio.ExtensionManager.ExtensionEngineImpl..ctor(IEngineHost engineHost, EngineMode mode, IEnumerable`1 enabledExtensions, CancellationToken disposalToken)\r\n   at Microsoft.VisualStudio.Sdk.BuildTasks.ExtensionManagerUtilities.GetExtensionEngine(ISettingsManager manager, Boolean deletePendingUninstalls)\r\n   at Microsoft.VisualStudio.Sdk.BuildTasks.GetDeploymentPathFromVsixManifest.Execute()\r\n   at Microsoft.Build.BackEnd.TaskExecutionHost.Microsoft.Build.BackEnd.ITaskExecutionHost.Execute()\r\n\r\n   at Microsoft.Build.BackEnd.TaskBuilder.<ExecuteInstantiatedTask>d__26.MoveNext()\r\n   at System.Runtime.CompilerServices.AsyncTaskMethodBuilder`1.Start[TStateMachine](TStateMachine& stateMachine)\r\n   at Microsoft.Build.BackEnd.TaskBuilder.ExecuteInstantiatedTask(ITaskExecutionHost taskExecutionHost, TaskLoggingContext taskLoggingContext, TaskHost taskHost, ItemBucket bucket, TaskExecutionMode howToExecuteTask)\r\n   at Microsoft.Build.BackEnd.TaskBuilder.<InitializeAndExecuteTask>d__24.MoveNext()\r\n   at System.Runtime.CompilerServices.AsyncTaskMethodBuilder`1.Start[TStateMachine](TStateMachine& stateMachine)\r\n   at Microsoft.Build.BackEnd.TaskBuilder.InitializeAndExecuteTask(TaskLoggingContext taskLoggingContext, ItemBucket bucket, IDictionary`2 taskIdentityParameters, TaskHost taskHost, TaskExecutionMode howToExecuteTask)\r\n   at Microsoft.Build.BackEnd.TaskBuilder.<ExecuteBucket>d__19.MoveNext()\r\n   at System.Runtime.CompilerServices.AsyncTaskMethodBuilder`1.Start[TStateMachine](TStateMachine& stateMachine)\r\n   at Microsoft.Build.BackEnd.TaskBuilder.ExecuteBucket(TaskHost taskHost, ItemBucket bucket, TaskExecutionMode howToExecuteTask, Dictionary`2 lookupHash)\r\n   at Microsoft.Build.BackEnd.TaskBuilder.<ExecuteTask>d__18.MoveNext()\r\n   at System.Runtime.CompilerServices.AsyncTaskMethodBuilder`1.Start[TStateMachine](TStateMachine& stateMachine)\r\n   at Microsoft.Build.BackEnd.TaskBuilder.ExecuteTask(TaskExecutionMode mode, Lookup lookup)\r\n   at Microsoft.Build.BackEnd.TaskBuilder.<ExecuteTask>d__13.MoveNext()\r\n   at System.Runtime.CompilerServices.AsyncTaskMethodBuilder`1.Start[TStateMachine](TStateMachine& stateMachine)\r\n   at Microsoft.Build.BackEnd.TaskBuilder.ExecuteTask(TargetLoggingContext loggingContext, BuildRequestEntry requestEntry, ITargetBuilderCallback targetBuilderCallback, ProjectTargetInstanceChild taskInstance, TaskExecutionMode mode, Lookup inferLookup, Lookup executeLookup, CancellationToken cancellationToken)\r\n   at Microsoft.Build.BackEnd.TargetEntry.<ProcessBucket>d__52.MoveNext()\r\n   at System.Runtime.CompilerServices.AsyncTaskMethodBuilder`1.Start[TStateMachine](TStateMachine& stateMachine)\r\n   at Microsoft.Build.BackEnd.TargetEntry.ProcessBucket(ITaskBuilder taskBuilder, TargetLoggingContext targetLoggingContext, TaskExecutionMode mode, Lookup lookupForInference, Lookup lookupForExecution)\r\n   at Microsoft.Build.BackEnd.TargetEntry.<ExecuteTarget>d__45.MoveNext()\r\n   at System.Runtime.CompilerServices.AsyncTaskMethodBuilder.Start[TStateMachine](TStateMachine& stateMachine)\r\n   at Microsoft.Build.BackEnd.TargetEntry.ExecuteTarget(ITaskBuilder taskBuilder, BuildRequestEntry requestEntry, ProjectLoggingContext projectLoggingContext, CancellationToken cancellationToken)\r\n   at Microsoft.Build.BackEnd.TargetBuilder.<ProcessTargetStack>d__21.MoveNext()\r\n   at System.Runtime.CompilerServices.AsyncMethodBuilderCore.MoveNextRunner.InvokeMoveNext(Object stateMachine)\r\n   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean preserveSyncCtx)\r\n   at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean preserveSyncCtx)\r\n   at System.Runtime.CompilerServices.AsyncMethodBuilderCore.MoveNextRunner.Run()\r\n   at System.Threading.Tasks.AwaitTaskContinuation.RunOrScheduleAction(Action action, Boolean allowInlining, Task& currentTask)\r\n   at System.Threading.Tasks.Task.FinishContinuations()\r\n   at System.Threading.Tasks.Task.FinishStageThree()\r\n   at System.Threading.Tasks.Task`1.TrySetResult(TResult result)\r\n   at System.Runtime.CompilerServices.AsyncTaskMethodBuilder`1.SetResult(TResult result)\r\n   at System.Runtime.CompilerServices.AsyncTaskMethodBuilder.SetResult()\r\n   at Microsoft.Build.BackEnd.TargetEntry.<ExecuteTarget>d__45.MoveNext()\r\n   at System.Runtime.CompilerServices.AsyncMethodBuilderCore.MoveNextRunner.InvokeMoveNext(Object stateMachine)\r\n   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean preserveSyncCtx)\r\n   at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean preserveSyncCtx)\r\n   at System.Runtime.CompilerServices.AsyncMethodBuilderCore.MoveNextRunner.Run()\r\n   at System.Threading.Tasks.AwaitTaskContinuation.RunOrScheduleAction(Action action, Boolean allowInlining, Task& currentTask)\r\n   at System.Threading.Tasks.Task.FinishContinuations()\r\n   at System.Threading.Tasks.Task.FinishStageThree()\r\n   at System.Threading.Tasks.Task`1.TrySetResult(TResult result)\r\n   at System.Runtime.CompilerServices.AsyncTaskMethodBuilder`1.SetResult(TResult result)\r\n   at Microsoft.Build.BackEnd.TargetEntry.<ProcessBucket>d__52.MoveNext()\r\n   at System.Runtime.CompilerServices.AsyncMethodBuilderCore.MoveNextRunner.InvokeMoveNext(Object stateMachine)\r\n   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean preserveSyncCtx)\r\n   at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean preserveSyncCtx)\r\n   at System.Runtime.CompilerServices.AsyncMethodBuilderCore.MoveNextRunner.Run()\r\n   at System.Threading.Tasks.AwaitTaskContinuation.RunOrScheduleAction(Action action, Boolean allowInlining, Task& currentTask)\r\n   at System.Threading.Tasks.Task.FinishContinuations()\r\n   at System.Threading.Tasks.Task.FinishStageThree()\r\n   at System.Threading.Tasks.Task`1.TrySetResult(TResult result)\r\n   at System.Runtime.CompilerServices.AsyncTaskMethodBuilder`1.SetResult(TResult result)\r\n   at Microsoft.Build.BackEnd.TaskBuilder.<ExecuteTask>d__13.MoveNext()\r\n   at System.Runtime.CompilerServices.AsyncMethodBuilderCore.MoveNextRunner.InvokeMoveNext(Object stateMachine)\r\n   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean preserveSyncCtx)\r\n   at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean preserveSyncCtx)\r\n   at System.Runtime.CompilerServices.AsyncMethodBuilderCore.MoveNextRunner.Run()\r\n   at System.Threading.Tasks.AwaitTaskContinuation.RunOrScheduleAction(Action action, Boolean allowInlining, Task& currentTask)\r\n   at System.Threading.Tasks.Task.FinishContinuations()\r\n   at System.Threading.Tasks.Task.FinishStageThree()\r\n   at System.Threading.Tasks.Task`1.TrySetResult(TResult result)\r\n   at System.Runtime.CompilerServices.AsyncTaskMethodBuilder`1.SetResult(TResult result)\r\n   at Microsoft.Build.BackEnd.TaskBuilder.<ExecuteTask>d__18.MoveNext()\r\n   at System.Runtime.CompilerServices.AsyncMethodBuilderCore.MoveNextRunner.InvokeMoveNext(Object stateMachine)\r\n   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean preserveSyncCtx)\r\n   at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean preserveSyncCtx)\r\n   at System.Runtime.CompilerServices.AsyncMethodBuilderCore.MoveNextRunner.Run()\r\n   at System.Threading.Tasks.AwaitTaskContinuation.RunOrScheduleAction(Action action, Boolean allowInlining, Task& currentTask)\r\n   at System.Threading.Tasks.Task.FinishContinuations()\r\n   at System.Threading.Tasks.Task.FinishStageThree()\r\n   at System.Threading.Tasks.Task`1.TrySetResult(TResult result)\r\n   at System.Runtime.CompilerServices.AsyncTaskMethodBuilder`1.SetResult(TResult result)\r\n   at Microsoft.Build.BackEnd.TaskBuilder.<ExecuteBucket>d__19.MoveNext()\r\n   at System.Runtime.CompilerServices.AsyncMethodBuilderCore.MoveNextRunner.InvokeMoveNext(Object stateMachine)\r\n   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean preserveSyncCtx)\r\n   at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean preserveSyncCtx)\r\n   at System.Runtime.CompilerServices.AsyncMethodBuilderCore.MoveNextRunner.Run()\r\n   at System.Threading.Tasks.AwaitTaskContinuation.RunOrScheduleAction(Action action, Boolean allowInlining, Task& currentTask)\r\n   at System.Threading.Tasks.Task.FinishContinuations()\r\n   at System.Threading.Tasks.Task.FinishStageThree()\r\n   at System.Threading.Tasks.Task`1.TrySetResult(TResult result)\r\n   at System.Runtime.CompilerServices.AsyncTaskMethodBuilder`1.SetResult(TResult result)\r\n   at Microsoft.Build.BackEnd.TaskBuilder.<InitializeAndExecuteTask>d__24.MoveNext()\r\n   at System.Runtime.CompilerServices.AsyncMethodBuilderCore.MoveNextRunner.InvokeMoveNext(Object stateMachine)\r\n   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean preserveSyncCtx)\r\n   at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean preserveSyncCtx)\r\n   at System.Runtime.CompilerServices.AsyncMethodBuilderCore.MoveNextRunner.Run()\r\n   at System.Threading.Tasks.AwaitTaskContinuation.RunOrScheduleAction(Action action, Boolean allowInlining, Task& currentTask)\r\n   at System.Threading.Tasks.Task.FinishContinuations()\r\n   at System.Threading.Tasks.Task.FinishStageThree()\r\n   at System.Threading.Tasks.Task`1.TrySetResult(TResult result)\r\n   at System.Runtime.CompilerServices.AsyncTaskMethodBuilder`1.SetResult(TResult result)\r\n   at Microsoft.Build.BackEnd.TaskBuilder.<ExecuteInstantiatedTask>d__26.MoveNext()\r\n   at System.Runtime.CompilerServices.AsyncMethodBuilderCore.MoveNextRunner.InvokeMoveNext(Object stateMachine)\r\n   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean preserveSyncCtx)\r\n   at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean preserveSyncCtx)\r\n   at System.Runtime.CompilerServices.AsyncMethodBuilderCore.MoveNextRunner.Run()\r\n   at System.Threading.Tasks.AwaitTaskContinuation.RunOrScheduleAction(Action action, Boolean allowInlining, Task& currentTask)\r\n   at System.Threading.Tasks.Task.FinishContinuations()\r\n   at System.Threading.Tasks.Task.FinishStageThree()\r\n   at System.Threading.Tasks.Task`1.TrySetResult(TResult result)\r\n   at System.Runtime.CompilerServices.AsyncTaskMethodBuilder`1.SetResult(TResult result)\r\n   at Microsoft.Build.BackEnd.MSBuild.<ExecuteInternal>d__76.MoveNext()\r\n   at System.Runtime.CompilerServices.AsyncMethodBuilderCore.MoveNextRunner.InvokeMoveNext(Object stateMachine)\r\n   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean preserveSyncCtx)\r\n   at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean preserveSyncCtx)\r\n   at System.Runtime.CompilerServices.AsyncMethodBuilderCore.MoveNextRunner.Run()\r\n   at System.Threading.Tasks.AwaitTaskContinuation.RunOrScheduleAction(Action action, Boolean allowInlining, Task& currentTask)\r\n   at System.Threading.Tasks.Task.FinishContinuations()\r\n   at System.Threading.Tasks.Task.FinishStageThree()\r\n   at System.Threading.Tasks.Task`1.TrySetResult(TResult result)\r\n   at System.Runtime.CompilerServices.AsyncTaskMethodBuilder`1.SetResult(TResult result)\r\n   at Microsoft.Build.BackEnd.MSBuild.<BuildProjectsInParallel>d__77.MoveNext()\r\n   at System.Runtime.CompilerServices.AsyncMethodBuilderCore.MoveNextRunner.InvokeMoveNext(Object stateMachine)\r\n   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean preserveSyncCtx)\r\n   at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean preserveSyncCtx)\r\n   at System.Runtime.CompilerServices.AsyncMethodBuilderCore.MoveNextRunner.Run()\r\n   at System.Threading.Tasks.AwaitTaskContinuation.RunOrScheduleAction(Action action, Boolean allowInlining, Task& currentTask)\r\n   at System.Threading.Tasks.Task.FinishContinuations()\r\n   at System.Threading.Tasks.Task.FinishStageThree()\r\n   at System.Threading.Tasks.Task`1.TrySetResult(TResult result)\r\n   at System.Runtime.CompilerServices.AsyncTaskMethodBuilder`1.SetResult(TResult result)\r\n   at Microsoft.Build.BackEnd.MSBuild.<ExecuteTargets>d__80.MoveNext()\r\n   at System.Runtime.CompilerServices.AsyncMethodBuilderCore.MoveNextRunner.InvokeMoveNext(Object stateMachine)\r\n   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean preserveSyncCtx)\r\n   at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean preserveSyncCtx)\r\n   at System.Runtime.CompilerServices.AsyncMethodBuilderCore.MoveNextRunner.Run()\r\n   at System.Threading.Tasks.AwaitTaskContinuation.RunOrScheduleAction(Action action, Boolean allowInlining, Task& currentTask)\r\n   at System.Threading.Tasks.Task.FinishContinuations()\r\n   at System.Threading.Tasks.Task.FinishStageThree()\r\n   at System.Threading.Tasks.Task`1.TrySetResult(TResult result)\r\n   at System.Runtime.CompilerServices.AsyncTaskMethodBuilder`1.SetResult(TResult result)\r\n   at Microsoft.Build.BackEnd.TaskHost.<InternalBuildProjects>d__49.MoveNext()\r\n   at System.Runtime.CompilerServices.AsyncMethodBuilderCore.MoveNextRunner.InvokeMoveNext(Object stateMachine)\r\n   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean preserveSyncCtx)\r\n   at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean preserveSyncCtx)\r\n   at System.Runtime.CompilerServices.AsyncMethodBuilderCore.MoveNextRunner.Run()\r\n   at System.Threading.Tasks.AwaitTaskContinuation.RunOrScheduleAction(Action action, Boolean allowInlining, Task& currentTask)\r\n   at System.Threading.Tasks.Task.FinishContinuations()\r\n   at System.Threading.Tasks.Task.FinishStageThree()\r\n   at System.Threading.Tasks.Task`1.TrySetResult(TResult result)\r\n   at System.Runtime.CompilerServices.AsyncTaskMethodBuilder`1.SetResult(TResult result)\r\n   at Microsoft.Build.BackEnd.TaskHost.<BuildProjectFilesInParallelAsync>d__53.MoveNext()\r\n   at System.Runtime.CompilerServices.AsyncMethodBuilderCore.MoveNextRunner.InvokeMoveNext(Object stateMachine)\r\n   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean preserveSyncCtx)\r\n   at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean preserveSyncCtx)\r\n   at System.Runtime.CompilerServices.AsyncMethodBuilderCore.MoveNextRunner.Run()\r\n   at System.Threading.Tasks.AwaitTaskContinuation.RunOrScheduleAction(Action action, Boolean allowInlining, Task& currentTask)\r\n   at System.Threading.Tasks.Task.FinishContinuations()\r\n   at System.Threading.Tasks.Task.FinishStageThree()\r\n   at System.Threading.Tasks.Task`1.TrySetResult(TResult result)\r\n   at System.Runtime.CompilerServices.AsyncTaskMethodBuilder`1.SetResult(TResult result)\r\n   at Microsoft.Build.BackEnd.RequestBuilder.<BuildProjects>d__33.MoveNext()\r\n   at System.Runtime.CompilerServices.AsyncMethodBuilderCore.MoveNextRunner.InvokeMoveNext(Object stateMachine)\r\n   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean preserveSyncCtx)\r\n   at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean preserveSyncCtx)\r\n   at System.Runtime.CompilerServices.AsyncMethodBuilderCore.MoveNextRunner.Run()\r\n   at System.Threading.Tasks.AwaitTaskContinuation.RunOrScheduleAction(Action action, Boolean allowInlining, Task& currentTask)\r\n   at System.Threading.Tasks.Task.FinishContinuations()\r\n   at System.Threading.Tasks.Task.FinishStageThree()\r\n   at System.Threading.Tasks.Task`1.TrySetResult(TResult result)\r\n   at System.Runtime.CompilerServices.AsyncTaskMethodBuilder`1.SetResult(TResult result)\r\n   at Microsoft.Build.BackEnd.RequestBuilder.<StartNewBuildRequests>d__51.MoveNext()\r\n   at System.Runtime.CompilerServices.AsyncMethodBuilderCore.MoveNextRunner.InvokeMoveNext(Object stateMachine)\r\n   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean preserveSyncCtx)\r\n   at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean preserveSyncCtx)\r\n   at System.Runtime.CompilerServices.AsyncMethodBuilderCore.MoveNextRunner.Run()\r\n   at System.Threading.Tasks.AwaitTaskContinuation.RunOrScheduleAction(Action action, Boolean allowInlining, Task& currentTask)\r\n   at System.Threading.Tasks.Task.FinishContinuations()\r\n   at System.Threading.Tasks.Task.FinishStageThree()\r\n   at System.Threading.Tasks.Task`1.TrySetResult(TResult result)\r\n   at System.Threading.Tasks.TaskCompletionSource`1.TrySetResult(TResult result)\r\n   at Microsoft.Build.Shared.AwaitExtensions.<>c__DisplayClass7_2.<ToTask>b__0(Object state, Boolean timedOut)\r\n   at System.Threading._ThreadPoolWaitOrTimerCallback.WaitOrTimerCallback_Context(Object state, Boolean timedOut)\r\n   at System.Threading._ThreadPoolWaitOrTimerCallback.WaitOrTimerCallback_Context_f(Object state)\r\n   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean preserveSyncCtx)\r\n   at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean preserveSyncCtx)\r\n   at System.Threading._ThreadPoolWaitOrTimerCallback.PerformWaitOrTimerCallback(Object state, Boolean timedOut)\r\n```\r\n\r\n### Environment data\r\n```\r\nmsbuild /version\r\nMicrosoft (R) Build Engine version 15.7.177.53362 for .NET Framework\r\nCopyright (C) Microsoft Corporation. All rights reserved.\r\n\r\n15.7.177.53362\r\n```\r\n\r\nOS info:\r\n\r\n```\r\n\"C:\\Program Files (x86)\\Microsoft Visual Studio\\2017\\Community\\Common7\\Tools\\VsDevCmd.bat\"\r\n```",
  "state": "CLOSED",
  "createdAt": "2018-05-20T06:35:43Z",
  "updatedAt": "2024-02-21T17:13:05Z",
  "closedAt": "2018-11-15T17:06:05Z",
  "author": {
    "login": "ricksladkey"
  },
  "labels": [
    "triaged"
  ],
  "assignees": {
    "nodes": []
  },
  "milestone": null,
  "comments": {
    "nodes": [
      {
        "body": "Here's a screenshot of the debugger locals window without symbols:\r\n\r\n![image](https://user-images.githubusercontent.com/2680524/40276405-4c4a49c6-5bd7-11e8-8e95-effa6bfa7979.png)\r\n",
        "createdAt": "2018-05-20T06:41:54Z",
        "updatedAt": "2018-05-20T06:41:54Z",
        "author": {
          "login": "ricksladkey"
        }
      },
      {
        "body": "Do you get the same behavior if you run `msbuild` from a normal CMD window? I haven't seen this before and I'm using that exact build of VS on several of my machines. But I also never use the developer command prompt. ",
        "createdAt": "2018-05-20T06:44:11Z",
        "updatedAt": "2018-05-20T06:44:11Z",
        "author": {
          "login": "jaredpar"
        }
      },
      {
        "body": "That doesn't seem to be it. I just tried under a developer command prompt and that sequence works fine for me. I made sure to start from a clean state before attempting `git clean -dxf .` ",
        "createdAt": "2018-05-20T06:47:55Z",
        "updatedAt": "2018-05-20T06:47:55Z",
        "author": {
          "login": "jaredpar"
        }
      },
      {
        "body": "I think it's at the point where it is trying to deploy to my experimental instance. I could surely delete my experimental instance, but if I do that, the crash might go away.",
        "createdAt": "2018-05-20T06:57:37Z",
        "updatedAt": "2018-05-20T06:57:37Z",
        "author": {
          "login": "ricksladkey"
        }
      },
      {
        "body": "I haven't seen this problem for a long time so I am closing this issue.",
        "createdAt": "2018-11-15T17:06:05Z",
        "updatedAt": "2018-11-15T17:06:05Z",
        "author": {
          "login": "ricksladkey"
        }
      }
    ]
  }
}