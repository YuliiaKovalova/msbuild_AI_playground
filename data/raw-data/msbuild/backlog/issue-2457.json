{
  "number": 2457,
  "title": "PathMap ignored when passed through MSBuild",
  "body": "I'm trying to use `PathMap` in MSBuild and I'm failing in passing it to `Csc`.\r\n\r\nI have a minimal `csproj`:\r\n```\r\n<Project Sdk=\"Microsoft.NET.Sdk\">\r\n  <PropertyGroup>\r\n    <OutputType>Exe</OutputType>\r\n    <TargetFramework>netcoreapp2.0</TargetFramework>\r\n  </PropertyGroup> \r\n  <Target Name=\"Echo\" BeforeTargets=\"CoreCompile\" >\r\n    <Message Text=\"PathMap Value: $(PathMap)\" Importance=\"High\" />\r\n  </Target>\r\n</Project>\r\n```\r\n\r\nI'm calling it with `MSBuild \"/p:PathMap=C:\\Users\\Jiri\\Documents\\Visual Studio 2017\\Projects\\ConsoleApp2\\ConsoleApp1=I:\\foobar\" /v:m`. Although the same `PathMap` works fine when I call `csc` directly manually, it doesn't seem to be passed from MSBuild.\r\n\r\nThe output I'm getting from MSBuild:\r\n```\r\nMicrosoft (R) Build Engine version 15.3.409.57025 for .NET Framework\r\nCopyright (C) Microsoft Corporation. All rights reserved.\r\n\r\n  PathMap Value: C:\\Users\\Jiri\\Documents\\Visual Studio 2017\\Projects\\ConsoleApp2\\ConsoleApp1=I:\\foobar\r\n  ConsoleApp1 -> C:\\Users\\Jiri\\Documents\\Visual Studio 2017\\Projects\\ConsoleApp2\\ConsoleApp1\\bin\\Debug\\netcoreapp2.0\r\n  \\ConsoleApp1.dll\r\n```\r\n\r\nWith `diag` verbosity I see `CSharpCoreTargetsPath = C:\\Program Files (x86)\\Microsoft Visual Studio\\2017\\Professional\\MSBuild\\15.0\\bin\\Roslyn\\Microsoft.CSharp.Core.targets` being used and then `Target \"CoreCompile: (TargetId:64)\" in file \"C:\\Program Files (x86)\\Microsoft Visual Studio\\2017\\Professional\\MSBuild\\15.0\\bin\\Roslyn\\Microsoft.CSharp.Core.targets\" from project \"C:\\Users\\Jiri\\Documents\\Visual Studio 2017\\Projects\\ConsoleApp2\\ConsoleApp1\\ConsoleApp1.csproj\" (target \"Compile\" depends on it):`. This target file contains the `PathMap` for `Csc`, so it should be passed, I think.\r\n\r\nIs there something I'm missing?",
  "state": "CLOSED",
  "createdAt": "2017-08-21T14:45:30Z",
  "updatedAt": "2024-02-21T17:17:05Z",
  "closedAt": "2017-08-21T15:20:26Z",
  "author": {
    "login": "cincuranet"
  },
  "labels": [
    "triaged"
  ],
  "assignees": {
    "nodes": []
  },
  "milestone": null,
  "comments": {
    "nodes": [
      {
        "body": "I don't reproduce this problem. With your project and command line (plus `/flp:v=diag` to get a diganostic log), I get:\r\n\r\n```\r\nTarget \"CoreCompile: (TargetId:65)\" in file \"C:\\Program Files (x86)\\Microsoft Visual Studio\\Preview\\EntInt\\MSBuild\\15.0\\bin\\Roslyn\\Microsoft.CSharp.Core.targets\" from project \"s:\\work\\pathmap\\pathmap.csproj\" (target \"Compile\" depends on it):\r\nBuilding target \"CoreCompile\" completely.\r\nOutput file \"obj\\Debug\\netcoreapp2.0\\pathmap.dll\" does not exist.\r\nSet Property: NoWarn=1701;1702;1705;1701;1702\r\nSet Property: UseSharedCompilation=true\r\nUsing \"Csc\" task from assembly \"C:\\Program Files (x86)\\Microsoft Visual Studio\\Preview\\EntInt\\MSBuild\\15.0\\bin\\Roslyn\\Microsoft.Build.Tasks.CodeAnalysis.dll\".\r\nTask \"Csc\" (TaskId:32)\r\n  Task Parameter:AllowUnsafeBlocks=False (TaskId:32)\r\n...\r\n  Task Parameter:PathMap=C:\\Users\\Jiri\\Documents\\Visual Studio 2017\\Projects\\ConsoleApp2\\ConsoleApp1=I:\\foobar (TaskId:32)\r\n  C:\\Program Files (x86)\\Microsoft Visual Studio\\Preview\\EntInt\\MSBuild\\15.0\\bin\\Roslyn\\csc.exe /noconfig /unsafe- /checked- /nowarn:1701,1702,1705,1701,1702 /nostdlib+ /errorreport:prompt /warn:4 /define:TRACE;DEBUG;NETCOREAPP2_0 /reference:C:\\Users\\raines\\.nuget\\packages\\microsoft.netcore.app\\2.0.0\\ref\\netcoreapp2.0\\Microsoft.CSharp.dll /reference:C:\\Users\\raines\\.nuget\\packages\\microsoft.netcore.app\\2.0.0\\ref\\netcoreapp2.0\\Microsoft.VisualBasic.dll /reference:C:\\Users\\raines\\.nuget\\packages\\microsoft.netcore.app\\2.0.0\\ref\\netcoreapp2.0\\Microsoft.Win32.Primitives.dll /reference:C:\\Users\\raines\\.nuget\\packages\\microsoft.netcore.app\\2.0.0\\ref\\netcoreapp2.0\\mscorlib.dll /reference:C:\\Users\\raines\\.nuget\\packages\\microsoft.netcore.app\\2.0.0\\ref\\netcoreapp2.0\\netstandard.dll /reference:C:\\Users\\raines\\.nuget\\packages\\microsoft.netcore.app\\2.0.0\\ref\\netcoreapp2.0\\System.AppContext.dll /reference:C:\\Users\\raines\\.nuget\\packages\\microsoft.netcore.app\\2.0.0\\ref\\netcoreapp2.0\\System.Buffers.dll /reference:C:\\Users\\raines\\.nuget\\packages\\microsoft.netcore.app\\2.0.0\\ref\\netcoreapp2.0\\System.Collections.Concurrent.dll /reference:C:\\Users\\raines\\.nuget\\packages\\microsoft.netcore.app\\2.0.0\\ref\\netcoreapp2.0\\System.Collections.dll /reference:C:\\Users\\raines\\.nuget\\packages\\microsoft.netcore.app\\2.0.0\\ref\\netcoreapp2.0\\System.Collections.Immutable.dll /reference:C:\\Users\\raines\\.nuget\\packages\\microsoft.netcore.app\\2.0.0\\ref\\netcoreapp2.0\\System.Collections.NonGeneric.dll /reference:C:\\Users\\raines\\.nuget\\packages\\microsoft.netcore.app\\2.0.0\\ref\\netcoreapp2.0\\System.Collections.Specialized.dll /reference:C:\\Users\\raines\\.nuget\\packages\\microsoft.netcore.app\\2.0.0\\ref\\netcoreapp2.0\\System.ComponentModel.Annotations.dll /reference:C:\\Users\\raines\\.nuget\\packages\\microsoft.netcore.app\\2.0.0\\ref\\netcoreapp2.0\\System.ComponentModel.Composition.dll /reference:C:\\Users\\raines\\.nuget\\packages\\microsoft.netcore.app\\2.0.0\\ref\\netcoreapp2.0\\System.ComponentModel.DataAnnotations.dll /reference:C:\\Users\\raines\\.nuget\\packages\\microsoft.netcore.app\\2.0.0\\ref\\netcoreapp2.0\\System.ComponentModel.dll /reference:C:\\Users\\raines\\.nuget\\packages\\microsoft.netcore.app\\2.0.0\\ref\\netcoreapp2.0\\System.ComponentModel.EventBasedAsync.dll /reference:C:\\Users\\raines\\.nuget\\packages\\microsoft.netcore.app\\2.0.0\\ref\\netcoreapp2.0\\System.ComponentModel.Primitives.dll /reference:C:\\Users\\raines\\.nuget\\packages\\microsoft.netcore.app\\2.0.0\\ref\\netcoreapp2.0\\System.ComponentModel.TypeConverter.dll /reference:C:\\Users\\raines\\.nuget\\packages\\microsoft.netcore.app\\2.0.0\\ref\\netcoreapp2.0\\System.Configuration.dll /reference:C:\\Users\\raines\\.nuget\\packages\\microsoft.netcore.app\\2.0.0\\ref\\netcoreapp2.0\\System.Console.dll /reference:C:\\Users\\raines\\.nuget\\packages\\microsoft.netcore.app\\2.0.0\\ref\\netcoreapp2.0\\System.Core.dll /reference:C:\\Users\\raines\\.nuget\\packages\\microsoft.netcore.app\\2.0.0\\ref\\netcoreapp2.0\\System.Data.Common.dll /reference:C:\\Users\\raines\\.nuget\\packages\\microsoft.netcore.app\\2.0.0\\ref\\netcoreapp2.0\\System.Data.dll /reference:C:\\Users\\raines\\.nuget\\packages\\microsoft.netcore.app\\2.0.0\\ref\\netcoreapp2.0\\System.Diagnostics.Contracts.dll /reference:C:\\Users\\raines\\.nuget\\packages\\microsoft.netcore.app\\2.0.0\\ref\\netcoreapp2.0\\System.Diagnostics.Debug.dll /reference:C:\\Users\\raines\\.nuget\\packages\\microsoft.netcore.app\\2.0.0\\ref\\netcoreapp2.0\\System.Diagnostics.DiagnosticSource.dll /reference:C:\\Users\\raines\\.nuget\\packages\\microsoft.netcore.app\\2.0.0\\ref\\netcoreapp2.0\\System.Diagnostics.FileVersionInfo.dll /reference:C:\\Users\\raines\\.nuget\\packages\\microsoft.netcore.app\\2.0.0\\ref\\netcoreapp2.0\\System.Diagnostics.Process.dll /reference:C:\\Users\\raines\\.nuget\\packages\\microsoft.netcore.app\\2.0.0\\ref\\netcoreapp2.0\\System.Diagnostics.StackTrace.dll /reference:C:\\Users\\raines\\.nuget\\packages\\microsoft.netcore.app\\2.0.0\\ref\\netcoreapp2.0\\System.Diagnostics.TextWriterTraceListener.dll /reference:C:\\Users\\raines\\.nuget\\packages\\microsoft.netcore.app\\2.0.0\\ref\\netcoreapp2.0\\System.Diagnostics.Tools.dll /reference:C:\\Users\\raines\\.nuget\\packages\\microsoft.netcore.app\\2.0.0\\ref\\netcoreapp2.0\\System.Diagnostics.TraceSource.dll /reference:C:\\Users\\raines\\.nuget\\packages\\microsoft.netcore.app\\2.0.0\\ref\\netcoreapp2.0\\System.Diagnostics.Tracing.dll /reference:C:\\Users\\raines\\.nuget\\packages\\microsoft.netcore.app\\2.0.0\\ref\\netcoreapp2.0\\System.dll /reference:C:\\Users\\raines\\.nuget\\packages\\microsoft.netcore.app\\2.0.0\\ref\\netcoreapp2.0\\System.Drawing.dll /reference:C:\\Users\\raines\\.nuget\\packages\\microsoft.netcore.app\\2.0.0\\ref\\netcoreapp2.0\\System.Drawing.Primitives.dll /reference:C:\\Users\\raines\\.nuget\\packages\\microsoft.netcore.app\\2.0.0\\ref\\netcoreapp2.0\\System.Dynamic.Runtime.dll /reference:C:\\Users\\raines\\.nuget\\packages\\microsoft.netcore.app\\2.0.0\\ref\\netcoreapp2.0\\System.Globalization.Calendars.dll /reference:C:\\Users\\raines\\.nuget\\packages\\microsoft.netcore.app\\2.0.0\\ref\\netcoreapp2.0\\System.Globalization.dll /reference:C:\\Users\\raines\\.nuget\\packages\\microsoft.netcore.app\\2.0.0\\ref\\netcoreapp2.0\\System.Globalization.Extensions.dll /reference:C:\\Users\\raines\\.nuget\\packages\\microsoft.netcore.app\\2.0.0\\ref\\netcoreapp2.0\\System.IO.Compression.dll /reference:C:\\Users\\raines\\.nuget\\packages\\microsoft.netcore.app\\2.0.0\\ref\\netcoreapp2.0\\System.IO.Compression.FileSystem.dll /reference:C:\\Users\\raines\\.nuget\\packages\\microsoft.netcore.app\\2.0.0\\ref\\netcoreapp2.0\\System.IO.Compression.ZipFile.dll /reference:C:\\Users\\raines\\.nuget\\packages\\microsoft.netcore.app\\2.0.0\\ref\\netcoreapp2.0\\System.IO.dll /reference:C:\\Users\\raines\\.nuget\\packages\\microsoft.netcore.app\\2.0.0\\ref\\netcoreapp2.0\\System.IO.FileSystem.dll /reference:C:\\Users\\raines\\.nuget\\packages\\microsoft.netcore.app\\2.0.0\\ref\\netcoreapp2.0\\System.IO.FileSystem.DriveInfo.dll /reference:C:\\Users\\raines\\.nuget\\packages\\microsoft.netcore.app\\2.0.0\\ref\\netcoreapp2.0\\System.IO.FileSystem.Primitives.dll /reference:C:\\Users\\raines\\.nuget\\packages\\microsoft.netcore.app\\2.0.0\\ref\\netcoreapp2.0\\System.IO.FileSystem.Watcher.dll /reference:C:\\Users\\raines\\.nuget\\packages\\microsoft.netcore.app\\2.0.0\\ref\\netcoreapp2.0\\System.IO.IsolatedStorage.dll /reference:C:\\Users\\raines\\.nuget\\packages\\microsoft.netcore.app\\2.0.0\\ref\\netcoreapp2.0\\System.IO.MemoryMappedFiles.dll /reference:C:\\Users\\raines\\.nuget\\packages\\microsoft.netcore.app\\2.0.0\\ref\\netcoreapp2.0\\System.IO.Pipes.dll /reference:C:\\Users\\raines\\.nuget\\packages\\microsoft.netcore.app\\2.0.0\\ref\\netcoreapp2.0\\System.IO.UnmanagedMemoryStream.dll /reference:C:\\Users\\raines\\.nuget\\packages\\microsoft.netcore.app\\2.0.0\\ref\\netcoreapp2.0\\System.Linq.dll /reference:C:\\Users\\raines\\.nuget\\packages\\microsoft.netcore.app\\2.0.0\\ref\\netcoreapp2.0\\System.Linq.Expressions.dll /reference:C:\\Users\\raines\\.nuget\\packages\\microsoft.netcore.app\\2.0.0\\ref\\netcoreapp2.0\\System.Linq.Parallel.dll /reference:C:\\Users\\raines\\.nuget\\packages\\microsoft.netcore.app\\2.0.0\\ref\\netcoreapp2.0\\System.Linq.Queryable.dll /reference:C:\\Users\\raines\\.nuget\\packages\\microsoft.netcore.app\\2.0.0\\ref\\netcoreapp2.0\\System.Net.dll /reference:C:\\Users\\raines\\.nuget\\packages\\microsoft.netcore.app\\2.0.0\\ref\\netcoreapp2.0\\System.Net.Http.dll /reference:C:\\Users\\raines\\.nuget\\packages\\microsoft.netcore.app\\2.0.0\\ref\\netcoreapp2.0\\System.Net.HttpListener.dll /reference:C:\\Users\\raines\\.nuget\\packages\\microsoft.netcore.app\\2.0.0\\ref\\netcoreapp2.0\\System.Net.Mail.dll /reference:C:\\Users\\raines\\.nuget\\packages\\microsoft.netcore.app\\2.0.0\\ref\\netcoreapp2.0\\System.Net.NameResolution.dll /reference:C:\\Users\\raines\\.nuget\\packages\\microsoft.netcore.app\\2.0.0\\ref\\netcoreapp2.0\\System.Net.NetworkInformation.dll /reference:C:\\Users\\raines\\.nuget\\packages\\microsoft.netcore.app\\2.0.0\\ref\\netcoreapp2.0\\System.Net.Ping.dll /reference:C:\\Users\\raines\\.nuget\\packages\\microsoft.netcore.app\\2.0.0\\ref\\netcoreapp2.0\\System.Net.Primitives.dll /reference:C:\\Users\\raines\\.nuget\\packages\\microsoft.netcore.app\\2.0.0\\ref\\netcoreapp2.0\\System.Net.Requests.dll /reference:C:\\Users\\raines\\.nuget\\packages\\microsoft.netcore.app\\2.0.0\\ref\\netcoreapp2.0\\System.Net.Security.dll /reference:C:\\Users\\raines\\.nuget\\packages\\microsoft.netcore.app\\2.0.0\\ref\\netcoreapp2.0\\System.Net.ServicePoint.dll /reference:C:\\Users\\raines\\.nuget\\packages\\microsoft.netcore.app\\2.0.0\\ref\\netcoreapp2.0\\System.Net.Sockets.dll /reference:C:\\Users\\raines\\.nuget\\packages\\microsoft.netcore.app\\2.0.0\\ref\\netcoreapp2.0\\System.Net.WebClient.dll /reference:C:\\Users\\raines\\.nuget\\packages\\microsoft.netcore.app\\2.0.0\\ref\\netcoreapp2.0\\System.Net.WebHeaderCollection.dll /reference:C:\\Users\\raines\\.nuget\\packages\\microsoft.netcore.app\\2.0.0\\ref\\netcoreapp2.0\\System.Net.WebProxy.dll /reference:C:\\Users\\raines\\.nuget\\packages\\microsoft.netcore.app\\2.0.0\\ref\\netcoreapp2.0\\System.Net.WebSockets.Client.dll /reference:C:\\Users\\raines\\.nuget\\packages\\microsoft.netcore.app\\2.0.0\\ref\\netcoreapp2.0\\System.Net.WebSockets.dll /reference:C:\\Users\\raines\\.nuget\\packages\\microsoft.netcore.app\\2.0.0\\ref\\netcoreapp2.0\\System.Numerics.dll /reference:C:\\Users\\raines\\.nuget\\packages\\microsoft.netcore.app\\2.0.0\\ref\\netcoreapp2.0\\System.Numerics.Vectors.dll /reference:C:\\Users\\raines\\.nuget\\packages\\microsoft.netcore.app\\2.0.0\\ref\\netcoreapp2.0\\System.ObjectModel.dll /reference:C:\\Users\\raines\\.nuget\\packages\\microsoft.netcore.app\\2.0.0\\ref\\netcoreapp2.0\\System.Reflection.DispatchProxy.dll /reference:C:\\Users\\raines\\.nuget\\packages\\microsoft.netcore.app\\2.0.0\\ref\\netcoreapp2.0\\System.Reflection.dll /reference:C:\\Users\\raines\\.nuget\\packages\\microsoft.netcore.app\\2.0.0\\ref\\netcoreapp2.0\\System.Reflection.Emit.dll /reference:C:\\Users\\raines\\.nuget\\packages\\microsoft.netcore.app\\2.0.0\\ref\\netcoreapp2.0\\System.Reflection.Emit.ILGeneration.dll /reference:C:\\Users\\raines\\.nuget\\packages\\microsoft.netcore.app\\2.0.0\\ref\\netcoreapp2.0\\System.Reflection.Emit.Lightweight.dll /reference:C:\\Users\\raines\\.nuget\\packages\\microsoft.netcore.app\\2.0.0\\ref\\netcoreapp2.0\\System.Reflection.Extensions.dll /reference:C:\\Users\\raines\\.nuget\\packages\\microsoft.netcore.app\\2.0.0\\ref\\netcoreapp2.0\\System.Reflection.Metadata.dll /reference:C:\\Users\\raines\\.nuget\\packages\\microsoft.netcore.app\\2.0.0\\ref\\netcoreapp2.0\\System.Reflection.Primitives.dll /reference:C:\\Users\\raines\\.nuget\\packages\\microsoft.netcore.app\\2.0.0\\ref\\netcoreapp2.0\\System.Reflection.TypeExtensions.dll /reference:C:\\Users\\raines\\.nuget\\packages\\microsoft.netcore.app\\2.0.0\\ref\\netcoreapp2.0\\System.Resources.Reader.dll /reference:C:\\Users\\raines\\.nuget\\packages\\microsoft.netcore.app\\2.0.0\\ref\\netcoreapp2.0\\System.Resources.ResourceManager.dll /reference:C:\\Users\\raines\\.nuget\\packages\\microsoft.netcore.app\\2.0.0\\ref\\netcoreapp2.0\\System.Resources.Writer.dll /reference:C:\\Users\\raines\\.nuget\\packages\\microsoft.netcore.app\\2.0.0\\ref\\netcoreapp2.0\\System.Runtime.CompilerServices.VisualC.dll /reference:C:\\Users\\raines\\.nuget\\packages\\microsoft.netcore.app\\2.0.0\\ref\\netcoreapp2.0\\System.Runtime.dll /reference:C:\\Users\\raines\\.nuget\\packages\\microsoft.netcore.app\\2.0.0\\ref\\netcoreapp2.0\\System.Runtime.Extensions.dll /reference:C:\\Users\\raines\\.nuget\\packages\\microsoft.netcore.app\\2.0.0\\ref\\netcoreapp2.0\\System.Runtime.Handles.dll /reference:C:\\Users\\raines\\.nuget\\packages\\microsoft.netcore.app\\2.0.0\\ref\\netcoreapp2.0\\System.Runtime.InteropServices.dll /reference:C:\\Users\\raines\\.nuget\\packages\\microsoft.netcore.app\\2.0.0\\ref\\netcoreapp2.0\\System.Runtime.InteropServices.RuntimeInformation.dll /reference:C:\\Users\\raines\\.nuget\\packages\\microsoft.netcore.app\\2.0.0\\ref\\netcoreapp2.0\\System.Runtime.InteropServices.WindowsRuntime.dll /reference:C:\\Users\\raines\\.nuget\\packages\\microsoft.netcore.app\\2.0.0\\ref\\netcoreapp2.0\\System.Runtime.Loader.dll /reference:C:\\Users\\raines\\.nuget\\packages\\microsoft.netcore.app\\2.0.0\\ref\\netcoreapp2.0\\System.Runtime.Numerics.dll /reference:C:\\Users\\raines\\.nuget\\packages\\microsoft.netcore.app\\2.0.0\\ref\\netcoreapp2.0\\System.Runtime.Serialization.dll /reference:C:\\Users\\raines\\.nuget\\packages\\microsoft.netcore.app\\2.0.0\\ref\\netcoreapp2.0\\System.Runtime.Serialization.Formatters.dll /reference:C:\\Users\\raines\\.nuget\\packages\\microsoft.netcore.app\\2.0.0\\ref\\netcoreapp2.0\\System.Runtime.Serialization.Json.dll /reference:C:\\Users\\raines\\.nuget\\packages\\microsoft.netcore.app\\2.0.0\\ref\\netcoreapp2.0\\System.Runtime.Serialization.Primitives.dll /reference:C:\\Users\\raines\\.nuget\\packages\\microsoft.netcore.app\\2.0.0\\ref\\netcoreapp2.0\\System.Runtime.Serialization.Xml.dll /reference:C:\\Users\\raines\\.nuget\\packages\\microsoft.netcore.app\\2.0.0\\ref\\netcoreapp2.0\\System.Security.Claims.dll /reference:C:\\Users\\raines\\.nuget\\packages\\microsoft.netcore.app\\2.0.0\\ref\\netcoreapp2.0\\System.Security.Cryptography.Algorithms.dll /reference:C:\\Users\\raines\\.nuget\\packages\\microsoft.netcore.app\\2.0.0\\ref\\netcoreapp2.0\\System.Security.Cryptography.Csp.dll /reference:C:\\Users\\raines\\.nuget\\packages\\microsoft.netcore.app\\2.0.0\\ref\\netcoreapp2.0\\System.Security.Cryptography.Encoding.dll /reference:C:\\Users\\raines\\.nuget\\packages\\microsoft.netcore.app\\2.0.0\\ref\\netcoreapp2.0\\System.Security.Cryptography.Primitives.dll /reference:C:\\Users\\raines\\.nuget\\packages\\microsoft.netcore.app\\2.0.0\\ref\\netcoreapp2.0\\System.Security.Cryptography.X509Certificates.dll /reference:C:\\Users\\raines\\.nuget\\packages\\microsoft.netcore.app\\2.0.0\\ref\\netcoreapp2.0\\System.Security.dll /reference:C:\\Users\\raines\\.nuget\\packages\\microsoft.netcore.app\\2.0.0\\ref\\netcoreapp2.0\\System.Security.Principal.dll /reference:C:\\Users\\raines\\.nuget\\packages\\microsoft.netcore.app\\2.0.0\\ref\\netcoreapp2.0\\System.Security.SecureString.dll /reference:C:\\Users\\raines\\.nuget\\packages\\microsoft.netcore.app\\2.0.0\\ref\\netcoreapp2.0\\System.ServiceModel.Web.dll /reference:C:\\Users\\raines\\.nuget\\packages\\microsoft.netcore.app\\2.0.0\\ref\\netcoreapp2.0\\System.ServiceProcess.dll /reference:C:\\Users\\raines\\.nuget\\packages\\microsoft.netcore.app\\2.0.0\\ref\\netcoreapp2.0\\System.Text.Encoding.dll /reference:C:\\Users\\raines\\.nuget\\packages\\microsoft.netcore.app\\2.0.0\\ref\\netcoreapp2.0\\System.Text.Encoding.Extensions.dll /reference:C:\\Users\\raines\\.nuget\\packages\\microsoft.netcore.app\\2.0.0\\ref\\netcoreapp2.0\\System.Text.RegularExpressions.dll /reference:C:\\Users\\raines\\.nuget\\packages\\microsoft.netcore.app\\2.0.0\\ref\\netcoreapp2.0\\System.Threading.dll /reference:C:\\Users\\raines\\.nuget\\packages\\microsoft.netcore.app\\2.0.0\\ref\\netcoreapp2.0\\System.Threading.Overlapped.dll /reference:C:\\Users\\raines\\.nuget\\packages\\microsoft.netcore.app\\2.0.0\\ref\\netcoreapp2.0\\System.Threading.Tasks.Dataflow.dll /reference:C:\\Users\\raines\\.nuget\\packages\\microsoft.netcore.app\\2.0.0\\ref\\netcoreapp2.0\\System.Threading.Tasks.dll /reference:C:\\Users\\raines\\.nuget\\packages\\microsoft.netcore.app\\2.0.0\\ref\\netcoreapp2.0\\System.Threading.Tasks.Extensions.dll /reference:C:\\Users\\raines\\.nuget\\packages\\microsoft.netcore.app\\2.0.0\\ref\\netcoreapp2.0\\System.Threading.Tasks.Parallel.dll /reference:C:\\Users\\raines\\.nuget\\packages\\microsoft.netcore.app\\2.0.0\\ref\\netcoreapp2.0\\System.Threading.Thread.dll /reference:C:\\Users\\raines\\.nuget\\packages\\microsoft.netcore.app\\2.0.0\\ref\\netcoreapp2.0\\System.Threading.ThreadPool.dll /reference:C:\\Users\\raines\\.nuget\\packages\\microsoft.netcore.app\\2.0.0\\ref\\netcoreapp2.0\\System.Threading.Timer.dll /reference:C:\\Users\\raines\\.nuget\\packages\\microsoft.netcore.app\\2.0.0\\ref\\netcoreapp2.0\\System.Transactions.dll /reference:C:\\Users\\raines\\.nuget\\packages\\microsoft.netcore.app\\2.0.0\\ref\\netcoreapp2.0\\System.Transactions.Local.dll /reference:C:\\Users\\raines\\.nuget\\packages\\microsoft.netcore.app\\2.0.0\\ref\\netcoreapp2.0\\System.ValueTuple.dll /reference:C:\\Users\\raines\\.nuget\\packages\\microsoft.netcore.app\\2.0.0\\ref\\netcoreapp2.0\\System.Web.dll /reference:C:\\Users\\raines\\.nuget\\packages\\microsoft.netcore.app\\2.0.0\\ref\\netcoreapp2.0\\System.Web.HttpUtility.dll /reference:C:\\Users\\raines\\.nuget\\packages\\microsoft.netcore.app\\2.0.0\\ref\\netcoreapp2.0\\System.Windows.dll /reference:C:\\Users\\raines\\.nuget\\packages\\microsoft.netcore.app\\2.0.0\\ref\\netcoreapp2.0\\System.Xml.dll /reference:C:\\Users\\raines\\.nuget\\packages\\microsoft.netcore.app\\2.0.0\\ref\\netcoreapp2.0\\System.Xml.Linq.dll /reference:C:\\Users\\raines\\.nuget\\packages\\microsoft.netcore.app\\2.0.0\\ref\\netcoreapp2.0\\System.Xml.ReaderWriter.dll /reference:C:\\Users\\raines\\.nuget\\packages\\microsoft.netcore.app\\2.0.0\\ref\\netcoreapp2.0\\System.Xml.Serialization.dll /reference:C:\\Users\\raines\\.nuget\\packages\\microsoft.netcore.app\\2.0.0\\ref\\netcoreapp2.0\\System.Xml.XDocument.dll /reference:C:\\Users\\raines\\.nuget\\packages\\microsoft.netcore.app\\2.0.0\\ref\\netcoreapp2.0\\System.Xml.XmlDocument.dll /reference:C:\\Users\\raines\\.nuget\\packages\\microsoft.netcore.app\\2.0.0\\ref\\netcoreapp2.0\\System.Xml.XmlSerializer.dll /reference:C:\\Users\\raines\\.nuget\\packages\\microsoft.netcore.app\\2.0.0\\ref\\netcoreapp2.0\\System.Xml.XPath.dll /reference:C:\\Users\\raines\\.nuget\\packages\\microsoft.netcore.app\\2.0.0\\ref\\netcoreapp2.0\\System.Xml.XPath.XDocument.dll /reference:C:\\Users\\raines\\.nuget\\packages\\microsoft.netcore.app\\2.0.0\\ref\\netcoreapp2.0\\WindowsBase.dll /debug+ /debug:portable /filealign:512 /nologo /optimize- /pathmap:\"C:\\Users\\Jiri\\Documents\\Visual Studio 2017\\Projects\\ConsoleApp2\\ConsoleApp1=I:\\foobar\" /out:obj\\Debug\\netcoreapp2.0\\pathmap.dll /ruleset:\"C:\\Program Files (x86)\\Microsoft Visual Studio\\Preview\\EntInt\\Team Tools\\Static Analysis Tools\\\\Rule Sets\\MinimumRecommendedRules.ruleset\" /target:exe /warnaserror- /utf8output /deterministic+ obj\\Debug\\netcoreapp2.0\\pathmap.AssemblyInfo.cs /warnaserror+:NU1605 (TaskId:32)\r\n```\r\n\r\nWhich does pass the pathmap. Can you share your diagnostic log?",
        "createdAt": "2017-08-21T14:52:21Z",
        "updatedAt": "2017-08-21T14:52:21Z",
        "author": {
          "login": "rainersigwald"
        }
      },
      {
        "body": "Dammit. OK, I cleaned up all my `bin`/`obj` folders and now I can see it too. But I've found another problem.  The `csc` is called with `.../filealign:512 /nologo /optimize- /pathmap:\"C:\\Users\\Jiri\\Documents\\Visual Studio 2017\\Projects\\ConsoleApp2\\ConsoleApp1=I:\\foobar\" /out:obj\\Debug\\netcoreapp2.0\\ConsoleApp1.dll...`\r\n\r\nLet's simplify to the core:\r\n```\r\n\"C:\\Program Files (x86)\\Microsoft Visual Studio\\2017\\Professional\\MSBuild\\15.0\\bin\\Roslyn\\csc.exe\" Program.cs /pathmap:\"C:\\Users\\Jiri\\Documents\\Visual Studio 2017\\Projects\\ConsoleApp2\\ConsoleApp1=I:\\foobar\"\r\n```\r\n\r\nRunning this in `cmd` does not produce the expected binary with correct mapping. But doing (the double quote is before `/pathmap`):\r\n```\r\n\"C:\\Program Files (x86)\\Microsoft Visual Studio\\2017\\Professional\\MSBuild\\15.0\\bin\\Roslyn\\csc.exe\" Program.cs \"/pathmap:C:\\Users\\Jiri\\Documents\\Visual Studio 2017\\Projects\\ConsoleApp2\\ConsoleApp1=I:\\foobar\"\r\n```\r\n\r\nDoes produce the correct binary. Bug?",
        "createdAt": "2017-08-21T15:16:26Z",
        "updatedAt": "2017-08-21T15:17:19Z",
        "author": {
          "login": "cincuranet"
        }
      },
      {
        "body": "Yes, that sounds like a bug in the csc.exe command-line parser. I'll move this bug to the Roslyn repo.",
        "createdAt": "2017-08-21T15:18:32Z",
        "updatedAt": "2017-08-21T15:18:32Z",
        "author": {
          "login": "rainersigwald"
        }
      },
      {
        "body": "Thanks for helping me to nail it down.",
        "createdAt": "2017-08-21T15:19:04Z",
        "updatedAt": "2017-08-21T15:19:04Z",
        "author": {
          "login": "cincuranet"
        }
      },
      {
        "body": "This issue was moved to dotnet/roslyn#21639",
        "createdAt": "2017-08-21T15:20:26Z",
        "updatedAt": "2017-08-21T15:20:26Z",
        "author": {
          "login": "rainersigwald"
        }
      }
    ]
  }
}