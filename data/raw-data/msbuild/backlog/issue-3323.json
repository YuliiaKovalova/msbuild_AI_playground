{
  "number": 3323,
  "title": "Building a solution with project dependency give inconsistent behavior between VS and dotnet build",
  "body": "_From @nascosto on May 17, 2018 15:9_\n\n## Steps to reproduce\r\n* Create a solution with two projects, one netstandard2.0 and one netcoreapp2.1.\r\n* Add the netcoreapp2.1 project as a Project Dependency to the netstandard2.0 project in the solution. Do NOT add the netcoreapp2.1 as a Reference in the netstandard2.0 csproj (this would obviously be an error). I'm just trying to control build order of the projects.\r\n* run dotnet build/msbuild on the solution\r\n\r\n## Expected  behavior\r\nBuilding the solution from Visual Studio and running dotnet build on the solution have the same behavior.\r\n\r\n## Actual behavior\r\nThe solution builds successfully from Visual Studio, but using dotnet build it throws an error saying that the netcoreapp project cannot be referenced by a project that targets netstandard.\r\n\r\n## Environment data\r\n.NET Core SDK (reflecting any global.json):\r\n Version:   2.1.300-rc1-008673\r\n Commit:    f5e3ddbe73\r\n\r\nRuntime Environment:\r\n OS Name:     Windows\r\n OS Version:  10.0.15063\r\n OS Platform: Windows\r\n RID:         win10-x64\r\n Base Path:   C:\\Program Files\\dotnet\\sdk\\2.1.300-rc1-008673\\\r\n\r\nHost (useful for support):\r\n  Version: 2.1.0-rc1\r\n  Commit:  eb9bc92051\r\n\r\n.NET Core SDKs installed:\r\n  1.1.0 [C:\\Program Files\\dotnet\\sdk]\r\n  2.0.0 [C:\\Program Files\\dotnet\\sdk]\r\n  2.1.2 [C:\\Program Files\\dotnet\\sdk]\r\n  2.1.4 [C:\\Program Files\\dotnet\\sdk]\r\n  2.1.100 [C:\\Program Files\\dotnet\\sdk]\r\n  2.1.102 [C:\\Program Files\\dotnet\\sdk]\r\n  2.1.104 [C:\\Program Files\\dotnet\\sdk]\r\n  2.1.200 [C:\\Program Files\\dotnet\\sdk]\r\n  2.1.300-rc1-008673 [C:\\Program Files\\dotnet\\sdk]\r\n\r\n.NET Core runtimes installed:\r\n  Microsoft.AspNetCore.All 2.1.0-rc1-final [C:\\Program Files\\dotnet\\shared\\Microsoft.AspNetC\r\n  Microsoft.AspNetCore.App 2.1.0-rc1-final [C:\\Program Files\\dotnet\\shared\\Microsoft.AspNetC\r\n  Microsoft.NETCore.App 1.0.5 [C:\\Program Files\\dotnet\\shared\\Microsoft.NETCore.App]\r\n  Microsoft.NETCore.App 1.1.2 [C:\\Program Files\\dotnet\\shared\\Microsoft.NETCore.App]\r\n  Microsoft.NETCore.App 2.0.0 [C:\\Program Files\\dotnet\\shared\\Microsoft.NETCore.App]\r\n  Microsoft.NETCore.App 2.0.3 [C:\\Program Files\\dotnet\\shared\\Microsoft.NETCore.App]\r\n  Microsoft.NETCore.App 2.0.5 [C:\\Program Files\\dotnet\\shared\\Microsoft.NETCore.App]\r\n  Microsoft.NETCore.App 2.0.6 [C:\\Program Files\\dotnet\\shared\\Microsoft.NETCore.App]\r\n  Microsoft.NETCore.App 2.0.7 [C:\\Program Files\\dotnet\\shared\\Microsoft.NETCore.App]\r\n  Microsoft.NETCore.App 2.1.0-rc1 [C:\\Program Files\\dotnet\\shared\\Microsoft.NETCore.App]\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\n\n_Copied from original issue: dotnet/cli#9304_",
  "state": "CLOSED",
  "createdAt": "2018-05-17T16:46:27Z",
  "updatedAt": "2024-02-21T17:13:07Z",
  "closedAt": "2018-05-17T17:03:07Z",
  "author": {
    "login": "livarcocc"
  },
  "labels": [
    "triaged"
  ],
  "assignees": {
    "nodes": []
  },
  "milestone": null,
  "comments": {
    "nodes": [
      {
        "body": "This seems like an issue with the metaproj generated by msbuild. Moving the issue to msbuild. If that's not the case, please just re-activate this one.",
        "createdAt": "2018-05-17T16:46:28Z",
        "updatedAt": "2018-05-17T16:46:28Z",
        "author": {
          "login": "livarcocc"
        }
      },
      {
        "body": "Duplicate of #1915. You can use https://github.com/Microsoft/msbuild/issues/2661#issuecomment-338808156 as a workaround until we can derive a full fix.",
        "createdAt": "2018-05-17T17:03:04Z",
        "updatedAt": "2018-05-17T17:03:04Z",
        "author": {
          "login": "rainersigwald"
        }
      }
    ]
  }
}