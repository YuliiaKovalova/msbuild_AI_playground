{
  "number": 1509,
  "title": "When BaseIntermediateOutputPath is overridden in a project after importing common props, build in VS displays the error  error: \"BaseIntermediateOutputPath must end with a trailing slash.\"",
  "body": "1. Create a C# UWP project;\r\n2. Edit project and add <BaseIntermediateOutputPath>obj\\x86\\Debug</BaseIntermediateOutputPath> under <PropertyGroup> for currently selected configuration/platform;\r\n3. Rebuild the project.\r\n\r\nEXPECTED: \r\n\r\n4. Builds fine.\r\n\r\nACTUAL:\r\n\r\n4. Fails with error: \"BaseIntermediateOutputPath must end with a trailing slash.\"\r\n\r\nIt seems that is introduced with commit [862ce61](https://github.com/Microsoft/msbuild/commit/862ce619a23877cbfad54fd4acd547ef92f499b3)\r\n",
  "state": "CLOSED",
  "createdAt": "2016-12-27T22:05:44Z",
  "updatedAt": "2024-02-21T17:23:07Z",
  "closedAt": "2017-01-10T00:59:15Z",
  "author": {
    "login": "srdjanjovcic"
  },
  "labels": [
    "bug",
    "triaged"
  ],
  "assignees": {
    "nodes": [
      {
        "login": "jeffkl"
      }
    ]
  },
  "milestone": null,
  "comments": {
    "nodes": [
      {
        "body": "I have confirmed that this is a bug.  This project:\r\n\r\n``` xml\r\nProject xmlns=\"http://schemas.microsoft.com/developer/msbuild/2003\">\r\n  <Import Project=\"$(MSBuildToolsPath)\\Microsoft.Common.props\" />\r\n\r\n  <PropertyGroup>\r\n    <BaseIntermediateOutputPath>obj\\x86\\Debug</BaseIntermediateOutputPath>\r\n  </PropertyGroup>\r\n\r\n  <Import Project=\"$(MSBuildToolsPath)\\Microsoft.CSharp.targets\" />\r\n</Project>\r\n```\r\n\r\nResults in an error:\r\n```\r\nMicrosoft.Common.CurrentVersion.targets(743,5): error : The BaseIntermediateOutputPath must end with a trailing slash.\r\n```\r\nWe should probably add this back to Microsoft.Common.CurrentVersion.targets:\r\n```xml\r\n<BaseIntermediateOutputPath Condition=\"!HasTrailingSlash('$(BaseIntermediateOutputPath)')\">$(BaseIntermediateOutputPath)\\</BaseIntermediateOutputPath>\r\n```\r\n\r\nWe should also add a unit test to ensure this doesn't regress again.",
        "createdAt": "2017-01-03T17:41:13Z",
        "updatedAt": "2017-01-03T17:41:13Z",
        "author": {
          "login": "jeffkl"
        }
      },
      {
        "body": "It would be worth auditing all impacted properties, not only BaseIntermadiateOutputPath might be affected. UWP projects generated by a previous version of Unity also fail to build due to OutputPath missing a trailing backslash with 2017.",
        "createdAt": "2017-01-03T18:39:27Z",
        "updatedAt": "2017-01-03T18:39:27Z",
        "author": {
          "login": "jbevain"
        }
      }
    ]
  }
}