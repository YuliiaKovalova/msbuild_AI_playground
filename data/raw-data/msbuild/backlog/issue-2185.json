{
  "number": 2185,
  "title": "Publish command is generating hundreds of recursive nested directories of \\PublishOutput\\bin\\[Config]",
  "body": "When I publish my ASP.NET Core web application, hundreds of nested directories of \"\\bin\\Release\" are being generated in the output directory.  Eventually, after publishing my project multiple times, I started getting publishing failures with Visual Studio abruptly crashing (\"Visual Studio has stopped working\" with no error description whatsoever). I eventually determined the cause of the crash was because the filepaths had become too long, caused by this issue.  This issue does not happen when the `build` command is run by itself, only when running `publish`.  My project uses ASP.NET Core 1.0.1 .NET Framework 4.5 (`portable-net45+win8`); I'm using Visual Studio 2015; and I'm trying to publish to my local filesystem.\r\n\r\nHere is a snippet from my build output following a successful publish, but still showing this issue (as opposed to the many crashes, which happened 100% of the time until I changed the output directory to artificially and temporarily shorten the filepaths):\r\n```\r\n------ Publish started: Project: SmartConfirmResponses, Configuration: Release Any CPU ------\r\nConnecting to C:\\Temp\\Publish...\r\nrmdir /S /Q \"C:\\Users\\derek\\AppData\\Local\\Temp\\PublishTemp\\SmartConfirmResponses122\\\"\r\nC:\\Users\\derek\\AppData\\Local\\Temp\\PublishTemp\\SmartConfirmResponses122\\bin\\Debug\\PUBLIS~1\\bin\\Debug\\PUBLIS~1\\bin\\Release\\PUBLIS~1\\bin\\Release\\PUBLIS~1\\bin\\Release\\PUBLIS~1\\bin\\Release\\PUBLIS~1\\bin\\Release\\PUBLIS~1\\bin\\Release\\PUBLIS~1\\bin\\Release\\PUBLIS~1\\bin - The directory is not empty.\r\nC:\\Users\\derek\\AppData\\Local\\Temp\\PublishTemp\\SmartConfirmResponses122\\bin\\Debug\\PUBLIS~1\\bin\\Debug\\PUBLIS~1\\bin\\Release\\PUBLIS~1\\bin\\Release\\PUBLIS~1\\bin\\Release\\PUBLIS~2\\bin\\Release\\PUBLIS~1\\bin\\Release\\PUBLIS~1\\bin\\Release\\PUBLIS~1\\bin\\Release\\PUBLIS~1\\bin - The directory is not empty.\r\nC:\\Users\\derek\\AppData\\Local\\Temp\\PublishTemp\\SmartConfirmResponses122\\bin\\Debug\\PUBLIS~1\\bin\\Debug\\PUBLIS~1\\bin\\Release\\PUBLIS~1\\bin\\Release\\PUBLIS~1\\bin\\Release\\PUBLIS~3\\bin\\Release\\PUBLIS~1\\bin\\Release\\PUBLIS~1\\bin\\Release\\PUBLIS~1\\bin\\Release\\PUBLIS~1\\bin - The directory is not empty.\r\nC:\\Users\\derek\\AppData\\Local\\Temp\\PublishTemp\\SmartConfirmResponses122\\bin\\Debug\\PUBLIS~1\\bin\\Debug\\PUBLIS~1\\bin\\Release\\PUBLIS~1\\bin\\Release\\PUBLIS~1\\bin\\Release\\PUBLIS~3\\bin\\Release\\PUBLIS~1\\bin\\Release\\PUBLIS~2\\bin\\Release\\PUBLIS~1\\bin\\Release\\PUBLIS~1\\bin - The directory is not empty.\r\nC:\\Users\\derek\\AppData\\Local\\Temp\\PublishTemp\\SmartConfirmResponses122\\bin\\Debug\\PUBLIS~1\\bin\\Debug\\PUBLIS~1\\bin\\Release\\PUBLIS~1\\bin\\Release\\PUBLIS~2\\bin\\Release\\PUBLIS~1\\bin\\Release\\PUBLIS~1\\bin\\Release\\PUBLIS~1\\bin\\Release\\PUBLIS~1\\bin\\Release\\PUBLIS~1\\bin - The directory is not empty.\r\nC:\\Users\\derek\\AppData\\Local\\Temp\\PublishTemp\\SmartConfirmResponses122\\bin\\Debug\\PUBLIS~1\\bin\\Debug\\PUBLIS~1\\bin\\Release\\PUBLIS~1\\bin\\Release\\PUBLIS~3\\bin\\Release\\PUBLIS~1\\bin\\Release\\PUBLIS~1\\bin\\Release\\PUBLIS~1\\bin\\Release\\PUBLIS~1\\bin\\Release\\PUBLIS~1\\bin - The directory is not empty.\r\nC:\\Users\\derek\\AppData\\Local\\Temp\\PublishTemp\\SmartConfirmResponses122\\bin\\Debug\\PUBLIS~1\\bin\\Debug\\PUBLIS~1\\bin\\Release\\PUBLIS~1\\bin\\Release\\PUBLIS~3\\bin\\Release\\PUBLIS~1\\bin\\Release\\PUBLIS~2\\bin\\Release\\PUBLIS~1\\bin\\Release\\PUBLIS~1\\bin\\Release\\PUBLIS~1\\bin - The directory is not empty.\r\nC:\\Users\\derek\\AppData\\Local\\Temp\\PublishTemp\\SmartConfirmResponses122\\bin\\Debug\\PUBLIS~1\\bin\\Debug\\PUBLIS~1\\bin\\Release\\PUBLIS~2\\bin\\Release\\PUBLIS~1\\bin\\Release\\PUBLIS~1\\bin\\Release\\PUBLIS~1\\bin\\Release\\PUBLIS~1\\bin\\Release\\PUBLIS~1\\bin\\Release\\PUBLIS~1\\bin - The directory is not empty.\r\nC:\\Users\\derek\\AppData\\Local\\Temp\\PublishTemp\\SmartConfirmResponses122\\bin\\Debug\\PUBLIS~1\\bin\\Debug\\PUBLIS~1\\bin\\Release\\PUBLIS~3\\bin\\Release\\PUBLIS~1\\bin\\Release\\PUBLIS~1\\bin\\Release\\PUBLIS~1\\bin\\Release\\PUBLIS~1\\bin\\Release\\PUBLIS~1\\bin\\Release\\PUBLIS~1\\bin - The directory is not empty.\r\nC:\\Users\\derek\\AppData\\Local\\Temp\\PublishTemp\\SmartConfirmResponses122\\bin\\Debug\\PUBLIS~1\\bin\\Debug\\PUBLIS~1\\bin\\Release\\PUBLIS~3\\bin\\Release\\PUBLIS~1\\bin\\Release\\PUBLIS~2\\bin\\Release\\PUBLIS~1\\bin\\Release\\PUBLIS~1\\bin\\Release\\PUBLIS~1\\bin\\Release\\PUBLIS~1\\bin - The directory is not empty.\r\nC:\\Users\\derek\\AppData\\Local\\Temp\\PublishTemp\\SmartConfirmResponses122\\bin\\Debug\\PUBLIS~1\\bin\\Release\\PUBLIS~1\\bin\\Release\\PUBLIS~1\\bin\\Release\\PUBLIS~1\\bin\\Release\\PUBLIS~1\\bin\\Release\\PUBLIS~1\\bin\\Release\\PUBLIS~1\\bin\\Release\\PUBLIS~1\\bin\\Release\\PUBLIS~1\\bin - The system cannot find the path specified.\r\nC:\\Users\\derek\\AppData\\Local\\Temp\\PublishTemp\\SmartConfirmResponses122\\bin\\Debug\\PUBLIS~1\\bin\\Release\\PUBLIS~1\\bin\\Release\\PUBLIS~1\\bin\\Release\\PUBLIS~1\\bin\\Release\\PUBLIS~1\\bin\\Release\\PUBLIS~1\\bin\\Release\\PUBLIS~1\\bin\\Release\\PUBLIS~1\\bin\\Release\\PUBLIS~1\\Views - The system cannot find the path specified.\r\nC:\\Users\\derek\\AppData\\Local\\Temp\\PublishTemp\\SmartConfirmResponses122\\bin\\Debug\\PUBLIS~1\\bin\\Release\\PUBLIS~1\\bin\\Release\\PUBLIS~1\\bin\\Release\\PUBLIS~2\\bin\\Release\\PUBLIS~1\\bin\\Release\\PUBLIS~1\\bin\\Release\\PUBLIS~1\\bin\\Release\\PUBLIS~1\\bin\\Release\\PUBLIS~1\\bin - The system cannot find the path specified.\r\nC:\\Users\\derek\\AppData\\Local\\Temp\\PublishTemp\\SmartConfirmResponses122\\bin\\Debug\\PUBLIS~1\\bin\\Release\\PUBLIS~1\\bin\\Release\\PUBLIS~1\\bin\\Release\\PUBLIS~3\\bin\\Release\\PUBLIS~1\\bin\\Release\\PUBLIS~1\\bin\\Release\\PUBLIS~1\\bin\\Release\\PUBLIS~1\\bin\\Release\\PUBLIS~1\\bin - The system cannot find the path specified.\r\nC:\\Users\\derek\\AppData\\Local\\Temp\\PublishTemp\\SmartConfirmResponses122\\bin\\Debug\\PUBLIS~1\\bin\\Release\\PUBLIS~1\\bin\\Release\\PUBLIS~1\\bin\\Release\\PUBLIS~3\\bin\\Release\\PUBLIS~1\\bin\\Release\\PUBLIS~2\\bin\\Release\\PUBLIS~1\\bin\\Release\\PUBLIS~1\\bin\\Release\\PUBLIS~1\\bin - The system cannot find the path specified.\r\nC:\\Users\\derek\\AppData\\Local\\Temp\\PublishTemp\\SmartConfirmResponses122\\bin\\Debug\\PUBLIS~1\\bin\\Release\\PUBLIS~1\\bin\\Release\\PUBLIS~2\\bin\\Release\\PUBLIS~1\\bin\\Release\\PUBLIS~1\\bin\\Release\\PUBLIS~1\\bin\\Release\\PUBLIS~1\\bin\\Release\\PUBLIS~1\\bin\\Release\\PUBLIS~1\\bin - The system cannot find the path specified.\r\nC:\\Users\\derek\\AppData\\Local\\Temp\\PublishTemp\\SmartConfirmResponses122\\bin\\Debug\\PUBLIS~1\\bin\\Release\\PUBLIS~1\\bin\\Release\\PUBLIS~3\\bin\\Release\\PUBLIS~1\\bin\\Release\\PUBLIS~1\\bin\\Release\\PUBLIS~1\\bin\\Release\\PUBLIS~1\\bin\\Release\\PUBLIS~1\\bin\\Release\\PUBLIS~1\\bin - The system cannot find the path specified.\r\nC:\\Users\\derek\\AppData\\Local\\Temp\\PublishTemp\\SmartConfirmResponses122\\bin\\Debug\\PUBLIS~1\\bin\\Release\\PUBLIS~1\\bin\\Release\\PUBLIS~3\\bin\\Release\\PUBLIS~1\\bin\\Release\\PUBLIS~2\\bin\\Release\\PUBLIS~1\\bin\\Release\\PUBLIS~1\\bin\\Release\\PUBLIS~1\\bin\\Release\\PUBLIS~1\\bin - The system cannot find the path specified.\r\nC:\\Users\\derek\\AppData\\Local\\Temp\\PublishTemp\\SmartConfirmResponses122\\bin\\Debug\\PUBLIS~1\\bin\\Release\\PUBLIS~2\\bin\\Release\\PUBLIS~1\\bin\\Release\\PUBLIS~1\\bin\\Release\\PUBLIS~1\\bin\\Release\\PUBLIS~1\\bin\\Release\\PUBLIS~1\\bin\\Release\\PUBLIS~1\\bin\\Release\\PUBLIS~1\\bin - The system cannot find the path specified.\r\nC:\\Users\\derek\\AppData\\Local\\Temp\\PublishTemp\\SmartConfirmResponses122\\bin\\Debug\\PUBLIS~1\\bin\\Release\\PUBLIS~3\\bin\\Release\\PUBLIS~1\\bin\\Release\\PUBLIS~1\\bin\\Release\\PUBLIS~1\\bin\\Release\\PUBLIS~1\\bin\\Release\\PUBLIS~1\\bin\\Release\\PUBLIS~1\\bin\\Release\\PUBLIS~1\\bin - The system cannot find the path specified.\r\nC:\\Users\\derek\\AppData\\Local\\Temp\\PublishTemp\\SmartConfirmResponses122\\bin\\Debug\\PUBLIS~1\\bin\\Release\\PUBLIS~3\\bin\\Release\\PUBLIS~1\\bin\\Release\\PUBLIS~2\\bin\\Release\\PUBLIS~1\\bin\\Release\\PUBLIS~1\\bin\\Release\\PUBLIS~1\\bin\\Release\\PUBLIS~1\\bin\\Release\\PUBLIS~1\\bin - The system cannot find the path specified.\r\nC:\\Users\\derek\\AppData\\Local\\Temp\\PublishTemp\\SmartConfirmResponses122\\bin\\Release\\PUBLIS~1\\bin\\Release\\PUBLIS~1\\bin\\Release\\PUBLIS~1\\bin\\Release\\PUBLIS~1\\bin\\Release\\PUBLIS~1\\bin\\Release\\PUBLIS~1\\bin\\Release\\PUBLIS~1\\bin\\Release\\PUBLIS~1\\bin\\Release\\PUBLIS~1 - The directory is not empty.\r\nC:\\Users\\derek\\AppData\\Local\\Temp\\PublishTemp\\SmartConfirmResponses122\\bin\\Release\\PUBLIS~1\\bin\\Release\\PUBLIS~1\\bin\\Release\\PUBLIS~1\\bin\\Release\\PUBLIS~1\\bin\\Release\\PUBLIS~1\\bin\\Release\\PUBLIS~1\\bin\\Release\\PUBLIS~1\\bin\\Release\\PUBLIS~1\\Views\\Home\\Index.cshtml - The system cannot find the path specified.\r\nC:\\Users\\derek\\AppData\\Local\\Temp\\PublishTemp\\SmartConfirmResponses122\\bin\\Release\\PUBLIS~1\\bin\\Release\\PUBLIS~1\\bin\\Release\\PUBLIS~1\\bin\\Release\\PUBLIS~1\\bin\\Release\\PUBLIS~1\\bin\\Release\\PUBLIS~1\\bin\\Release\\PUBLIS~1\\bin\\Release\\PUBLIS~1\\Views\\Shared\\DataFilter.cshtml - The system cannot find the path specified.\r\nC:\\Users\\derek\\AppData\\Local\\Temp\\PublishTemp\\SmartConfirmResponses122\\bin\\Release\\PUBLIS~1\\bin\\Release\\PUBLIS~1\\bin\\Release\\PUBLIS~1\\bin\\Release\\PUBLIS~1\\bin\\Release\\PUBLIS~1\\bin\\Release\\PUBLIS~1\\bin\\Release\\PUBLIS~1\\bin\\Release\\PUBLIS~1\\Views\\Shared\\Error.cshtml - The system cannot find the path specified.\r\nC:\\Users\\derek\\AppData\\Local\\Temp\\PublishTemp\\SmartConfirmResponses122\\bin\\Release\\PUBLIS~1\\bin\\Release\\PUBLIS~1\\bin\\Release\\PUBLIS~1\\bin\\Release\\PUBLIS~1\\bin\\Release\\PUBLIS~1\\bin\\Release\\PUBLIS~1\\bin\\Release\\PUBLIS~1\\bin\\Release\\PUBLIS~1\\Views\\Shared\\_Layout.cshtml - The system cannot find the path specified.\r\nC:\\Users\\derek\\AppData\\Local\\Temp\\PublishTemp\\SmartConfirmResponses122\\bin\\Release\\PUBLIS~1\\bin\\Release\\PUBLIS~1\\bin\\Release\\PUBLIS~2\\bin\\Release\\PUBLIS~1\\bin\\Release\\PUBLIS~1\\bin\\Release\\PUBLIS~1\\bin\\Release\\PUBLIS~1\\bin\\Release\\PUBLIS~1\\bin\\Release\\PUBLIS~1 - The directory is not empty.\r\nC:\\Users\\derek\\AppData\\Local\\Temp\\PublishTemp\\SmartConfirmResponses122\\bin\\Release\\PUBLIS~1\\bin\\Release\\PUBLIS~1\\bin\\Release\\PUBLIS~3\\bin\\Release\\PUBLIS~1\\bin\\Release\\PUBLIS~1\\bin\\Release\\PUBLIS~1\\bin\\Release\\PUBLIS~1\\bin\\Release\\PUBLIS~1\\bin\\Release\\PUBLIS~1 - The directory is not empty.\r\nC:\\Users\\derek\\AppData\\Local\\Temp\\PublishTemp\\SmartConfirmResponses122\\bin\\Release\\PUBLIS~1\\bin\\Release\\PUBLIS~1\\bin\\Release\\PUBLIS~3\\bin\\Release\\PUBLIS~1\\bin\\Release\\PUBLIS~2\\bin\\Release\\PUBLIS~1\\bin\\Release\\PUBLIS~1\\bin\\Release\\PUBLIS~1\\bin\\Release\\PUBLIS~1 - The directory is not empty.\r\nC:\\Users\\derek\\AppData\\Local\\Temp\\PublishTemp\\SmartConfirmResponses122\\bin\\Release\\PUBLIS~1\\bin\\Release\\PUBLIS~2\\bin\\Release\\PUBLIS~1\\bin\\Release\\PUBLIS~1\\bin\\Release\\PUBLIS~1\\bin\\Release\\PUBLIS~1\\bin\\Release\\PUBLIS~1\\bin\\Release\\PUBLIS~1\\bin\\Release\\PUBLIS~1 - The directory is not empty.\r\nC:\\Users\\derek\\AppData\\Local\\Temp\\PublishTemp\\SmartConfirmResponses122\\bin\\Release\\PUBLIS~1\\bin\\Release\\PUBLIS~3\\bin\\Release\\PUBLIS~1\\bin\\Release\\PUBLIS~1\\bin\\Release\\PUBLIS~1\\bin\\Release\\PUBLIS~1\\bin\\Release\\PUBLIS~1\\bin\\Release\\PUBLIS~1\\bin\\Release\\PUBLIS~1 - The directory is not empty.\r\nC:\\Users\\derek\\AppData\\Local\\Temp\\PublishTemp\\SmartConfirmResponses122\\bin\\Release\\PUBLIS~1\\bin\\Release\\PUBLIS~3\\bin\\Release\\PUBLIS~1\\bin\\Release\\PUBLIS~2\\bin\\Release\\PUBLIS~1\\bin\\Release\\PUBLIS~1\\bin\\Release\\PUBLIS~1\\bin\\Release\\PUBLIS~1\\bin\\Release\\PUBLIS~1 - The directory is not empty.\r\nC:\\Users\\derek\\AppData\\Local\\Temp\\PublishTemp\\SmartConfirmResponses122\\bin\\Release\\PUBLIS~2\\bin\\Release\\PUBLIS~1\\bin\\Release\\PUBLIS~1\\bin\\Release\\PUBLIS~1\\bin\\Release\\PUBLIS~1\\bin\\Release\\PUBLIS~1\\bin\\Release\\PUBLIS~1\\bin\\Release\\PUBLIS~1\\bin\\Release\\PUBLIS~1 - The directory is not empty.\r\nC:\\Users\\derek\\AppData\\Local\\Temp\\PublishTemp\\SmartConfirmResponses122\\bin\\Release\\PUBLIS~3\\bin\\Release\\PUBLIS~1\\bin\\Release\\PUBLIS~1\\bin\\Release\\PUBLIS~1\\bin\\Release\\PUBLIS~1\\bin\\Release\\PUBLIS~1\\bin\\Release\\PUBLIS~1\\bin\\Release\\PUBLIS~1\\bin\\Release\\PUBLIS~1 - The directory is not empty.\r\nC:\\Users\\derek\\AppData\\Local\\Temp\\PublishTemp\\SmartConfirmResponses122\\bin\\Release\\PUBLIS~3\\bin\\Release\\PUBLIS~1\\bin\\Release\\PUBLIS~2\\bin\\Release\\PUBLIS~1\\bin\\Release\\PUBLIS~1\\bin\\Release\\PUBLIS~1\\bin\\Release\\PUBLIS~1\\bin\\Release\\PUBLIS~1\\bin\\Release\\PUBLIS~1 - The directory is not empty.\r\nEnvironment variables:\r\nPath=.\\node_modules\\.bin;C:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\Web\\External;%PATH%;C:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\Web\\External\\git\r\nC:\\Program Files\\dotnet\\dotnet.exe publish \"C:\\Users\\derek\\Documents\\Visual Studio 2015\\Projects\\PEC\\SmartConfirm\\SmartConfirmResponses\" --framework netcoreapp1.0 --output \"C:\\Users\\derek\\AppData\\Local\\Temp\\PublishTemp\\SmartConfirmResponses122\" --configuration Release --no-build\r\nPublishing SmartConfirmResponses for .NETCoreApp,Version=v1.0\r\nBundling with configuration from C:\\Users\\derek\\Documents\\Visual Studio 2015\\Projects\\PEC\\SmartConfirm\\SmartConfirmResponses\\bundleconfig.json\r\nProcessing wwwroot/css/site.min.css\r\n  Bundled\r\n  Minified\r\nProcessing wwwroot/js/site.min.js\r\n  Bundled\r\n  Minified\r\nConfiguring the following project for use with IIS: 'C:\\Users\\derek\\AppData\\Local\\Temp\\PublishTemp\\SmartConfirmResponses122'\r\nUpdating web.config at 'C:\\Users\\derek\\AppData\\Local\\Temp\\PublishTemp\\SmartConfirmResponses122\\web.config'\r\nConfiguring project completed successfully\r\npublish: Published to C:\\Users\\derek\\AppData\\Local\\Temp\\PublishTemp\\SmartConfirmResponses122\r\nPublished 1/1 projects successfully\r\nPublishing with publish method [FileSystem]\r\nPublishing files to C:\\Temp\\Publish\r\nExecuting command [\"C:\\Program Files (x86)\\IIS\\Microsoft Web Deploy V3\\msdeploy.exe\" -source:manifest='C:\\Users\\derek\\AppData\\Local\\Temp\\PublishTemp\\obj\\SmartConfirmResponses122\\SourceManifest.xml' -dest:manifest='C:\\Users\\derek\\AppData\\Local\\Temp\\PublishTemp\\obj\\SmartConfirmResponses122\\DestinationManifest.xml' -verb:sync -retryAttempts:20 -disablerule:BackupRule]\r\nInfo: Adding file (C:\\Temp\\Publish\\appsettings.json).\r\nInfo: Adding file (C:\\Temp\\Publish\\appsettings.Production.json).\r\nInfo: Adding directory (C:\\Temp\\Publish\\bin).\r\nInfo: Adding directory (C:\\Temp\\Publish\\bin\\Debug).\r\nInfo: Adding directory (C:\\Temp\\Publish\\bin\\Debug\\PublishOutput).\r\nInfo: Adding directory (C:\\Temp\\Publish\\bin\\Debug\\PublishOutput\\bin).\r\nInfo: Adding directory (C:\\Temp\\Publish\\bin\\Debug\\PublishOutput\\bin\\Debug).\r\nInfo: Adding directory (C:\\Temp\\Publish\\bin\\Debug\\PublishOutput\\bin\\Debug\\PublishOutput).\r\nInfo: Adding directory (C:\\Temp\\Publish\\bin\\Debug\\PublishOutput\\bin\\Debug\\PublishOutput\\bin).\r\nInfo: Adding directory (C:\\Temp\\Publish\\bin\\Debug\\PublishOutput\\bin\\Debug\\PublishOutput\\bin\\Release).\r\nInfo: Adding directory (C:\\Temp\\Publish\\bin\\Debug\\PublishOutput\\bin\\Debug\\PublishOutput\\bin\\Release\\PublishOutput).\r\nInfo: Adding directory (C:\\Temp\\Publish\\bin\\Debug\\PublishOutput\\bin\\Debug\\PublishOutput\\bin\\Release\\PublishOutput\\bin).\r\nInfo: Adding directory (C:\\Temp\\Publish\\bin\\Debug\\PublishOutput\\bin\\Debug\\PublishOutput\\bin\\Release\\PublishOutput\\bin\\Release).\r\nInfo: Adding directory (C:\\Temp\\Publish\\bin\\Debug\\PublishOutput\\bin\\Debug\\PublishOutput\\bin\\Release\\PublishOutput\\bin\\Release\\PublishOutput).\r\nInfo: Adding directory (C:\\Temp\\Publish\\bin\\Debug\\PublishOutput\\bin\\Debug\\PublishOutput\\bin\\Release\\PublishOutput\\bin\\Release\\PublishOutput\\bin).\r\nInfo: Adding directory (C:\\Temp\\Publish\\bin\\Debug\\PublishOutput\\bin\\Debug\\PublishOutput\\bin\\Release\\PublishOutput\\bin\\Release\\PublishOutput\\bin\\Release).\r\nInfo: Adding directory (C:\\Temp\\Publish\\bin\\Debug\\PublishOutput\\bin\\Debug\\PublishOutput\\bin\\Release\\PublishOutput\\bin\\Release\\PublishOutput\\bin\\Release\\PublishOutput).\r\nInfo: Adding directory (C:\\Temp\\Publish\\bin\\Debug\\PublishOutput\\bin\\Debug\\PublishOutput\\bin\\Release\\PublishOutput\\bin\\Release\\PublishOutput\\bin\\Release\\PublishOutput\\bin).\r\nInfo: Adding directory (C:\\Temp\\Publish\\bin\\Debug\\PublishOutput\\bin\\Debug\\PublishOutput\\bin\\Release\\PublishOutput\\bin\\Release\\PublishOutput\\bin\\Release\\PublishOutput\\bin\\Release).\r\nInfo: Adding directory (C:\\Temp\\Publish\\bin\\Debug\\PublishOutput\\bin\\Debug\\PublishOutput\\bin\\Release\\PublishOutput\\bin\\Release\\PublishOutput\\bin\\Release\\PublishOutput\\bin\\Release\\PublishOutput).\r\nInfo: Adding directory (C:\\Temp\\Publish\\bin\\Debug\\PublishOutput\\bin\\Debug\\PublishOutput\\bin\\Release\\PublishOutput\\bin\\Release\\PublishOutput\\bin\\Release\\PublishOutput\\bin\\Release\\PublishOutput\\bin).\r\nInfo: Adding directory (C:\\Temp\\Publish\\bin\\Debug\\PublishOutput\\bin\\Debug\\PublishOutput\\bin\\Release\\PublishOutput\\bin\\Release\\PublishOutput\\bin\\Release\\PublishOutput\\bin\\Release\\PublishOutput\\bin\\Release).\r\n...\r\n```",
  "state": "CLOSED",
  "createdAt": "2017-06-07T13:53:24Z",
  "updatedAt": "2024-02-21T17:18:40Z",
  "closedAt": "2017-06-09T16:48:30Z",
  "author": {
    "login": "derekpec"
  },
  "labels": [
    "triaged"
  ],
  "assignees": {
    "nodes": []
  },
  "milestone": null,
  "comments": {
    "nodes": [
      {
        "body": "Due to the publishing failure and VS crashing, I initially tried to change my output directory target location from `.\\bin\\Release\\PublishOutput` to `C:\\temp\\Publish`, in an effort to shorten the filepaths, per the recommendations in https://github.com/Microsoft/dotnet/issues/234 and https://github.com/aspnet/Home/issues/790#issuecomment-306723506.  Sometimes this work-around works for me, sometimes it doesn't.  The underlying issue is clearly the incorrect generation of all these nested directories.",
        "createdAt": "2017-06-07T14:02:55Z",
        "updatedAt": "2017-06-07T14:02:55Z",
        "author": {
          "login": "derekpec"
        }
      },
      {
        "body": "In addition to the above partially-working work-around, I have tried:\r\n- wiping my Publishing Profiles and creating new ones, multiple times\r\n- right-clicking my project and selecting \"Clean\"\r\n- changing the Configuration in my Publish Profile and even creating a new Configuration\r\n- wiping my project.json file and re-creating it\r\n- updating the \"publishOptions\" of my project.json file ([see below](https://github.com/Microsoft/msbuild/issues/2185#issuecomment-307390399))\r\n\r\nThen, I went back to look at earlier versions of my project that I had published and saved copies of and found that this issue has actually been present from my first publish!  It appears the nested directories get deeper and longer each additional publish, perhaps?\r\n\r\nI wonder how many others have this issue and are running into max filepath warnings as described in the two issues referenced in my previous comment and https://github.com/Microsoft/msbuild/issues/53.",
        "createdAt": "2017-06-07T14:17:06Z",
        "updatedAt": "2017-06-09T13:38:29Z",
        "author": {
          "login": "derekpec"
        }
      },
      {
        "body": "I tried the \"fixes\" described at https://github.com/aspnet/Tooling/issues/927#issuecomment-270519625 and https://github.com/dotnet/sdk/issues/207#issuecomment-252261547, with no success. \r\n\r\nHere is my project.json:\r\n\r\n```\r\n{\r\n  \"dependencies\": {\r\n    \"Microsoft.NETCore.App\": {\r\n      \"version\": \"1.0.1\",\r\n      \"type\": \"platform\"\r\n    },\r\n    \"Microsoft.AspNetCore.Diagnostics\": \"1.0.0\",\r\n    \"Microsoft.AspNetCore.Mvc\": \"1.0.1\",\r\n    \"Microsoft.AspNetCore.Razor.Tools\": {\r\n      \"version\": \"1.0.0-preview2-final\",\r\n      \"type\": \"build\"\r\n    },\r\n    \"Microsoft.AspNetCore.Routing\": \"1.0.1\",\r\n    \"Microsoft.AspNetCore.Server.IISIntegration\": \"1.0.0\",\r\n    \"Microsoft.AspNetCore.Server.Kestrel\": \"1.0.1\",\r\n    \"Microsoft.AspNetCore.StaticFiles\": \"1.0.0\",\r\n    \"Microsoft.Extensions.Configuration.EnvironmentVariables\": \"1.0.0\",\r\n    \"Microsoft.Extensions.Configuration.Json\": \"1.0.0\",\r\n    \"Microsoft.Extensions.Logging\": \"1.1.1\",\r\n    \"Microsoft.Extensions.Logging.Console\": \"1.0.0\",\r\n    \"Microsoft.Extensions.Logging.Debug\": \"1.0.0\",\r\n    \"Microsoft.Extensions.Options.ConfigurationExtensions\": \"1.0.0\",\r\n    \"Microsoft.VisualStudio.Web.BrowserLink.Loader\": \"14.0.0\",\r\n    \"Microsoft.EntityFrameworkCore.SqlServer\": \"1.1.2\"\r\n  },\r\n  \"tools\": {\r\n    \"BundlerMinifier.Core\": \"2.0.238\",\r\n    \"Microsoft.AspNetCore.Razor.Tools\": \"1.0.0-preview2-final\",\r\n    \"Microsoft.AspNetCore.Server.IISIntegration.Tools\": \"1.0.0-preview2-final\",\r\n    \"Microsoft.EntityFrameworkCore.Tools\": \"1.0.0-preview2-final\"\r\n  },\r\n  \"frameworks\": {\r\n    \"netcoreapp1.0\": {\r\n      \"imports\": [\r\n        \"dotnet5.6\",\r\n        \"portable-net45+win8\"\r\n      ]\r\n    }\r\n  },\r\n  \"buildOptions\": {\r\n    \"emitEntryPoint\": true,\r\n    \"preserveCompilationContext\": true,\r\n    \"xmlDoc\": false\r\n  },\r\n  \"runtimeOptions\": {\r\n    \"configProperties\": {\r\n      \"System.GC.Server\": true\r\n    }\r\n  },\r\n  \"publishOptions\": {\r\n    \"exclude\": [\r\n      \"bin/**\",\r\n      \"obj/**\",\r\n      \"node_modules\",\r\n      \"**.user\",\r\n      \"**.vspscc\"\r\n    ],\r\n    \"include\": [\r\n      \"wwwroot\",\r\n      \"Views\",\r\n      \"appsettings.json\",\r\n      \"web.config\"\r\n    ]\r\n  },\r\n  \"scripts\": {\r\n    \"prepublish\": [ \"bower install\", \"dotnet bundle\" ],\r\n    \"postpublish\": [ \"dotnet publish-iis --publish-folder %publish:OutputPath% --framework %publish:FullTargetFramework%\" ]\r\n  }\r\n}\r\n```",
        "createdAt": "2017-06-09T13:36:23Z",
        "updatedAt": "2017-06-09T13:36:23Z",
        "author": {
          "login": "derekpec"
        }
      },
      {
        "body": "@derekpec Can you clarify whether you're using MSBuild or the older preview tooling? You're posting only a `project.json`, which is not consumed by MSBuild.",
        "createdAt": "2017-06-09T15:12:22Z",
        "updatedAt": "2017-06-09T15:12:22Z",
        "author": {
          "login": "rainersigwald"
        }
      },
      {
        "body": "@rainersigwald - Sorry, I guess I was using the older tooling with `project.json`/`.xproj`, and not `MSBuild`/`.csproj`. I had [incorrectly] assume `build` was a wrapper for `msbuild` and didn't realize the two were different.  I'm still learning ASP.NET Core and trying to keep up with all the recent changes/updates. I thought to start with VS 2015 to avoid all the [potential] new bugs in VS 2017, but now I see that the default templating (e.g. with `project.json`) is already outdated.  @eerhardt helped point me in the right direction to migrate, which fixed (or, at least, bypassed) the issue: https://github.com/dotnet/sdk/issues/207#issuecomment-307406173.  Thanks.  I guess since `project.json` is no longer supported (that's _sooo_ 2016!), I'll close this issue.  Thanks again to both of you.",
        "createdAt": "2017-06-09T16:47:56Z",
        "updatedAt": "2017-06-09T16:47:56Z",
        "author": {
          "login": "derekpec"
        }
      },
      {
        "body": "> I had [incorrectly] assume `build` was a wrapper for `msbuild` and didn't realize the two were different.\r\n\r\nIn your defense, that's true _now_, just not with the older tooling. You were just ahead of your time \ud83d\ude01 ",
        "createdAt": "2017-06-09T17:00:50Z",
        "updatedAt": "2017-06-09T17:00:50Z",
        "author": {
          "login": "rainersigwald"
        }
      },
      {
        "body": "If anyone is reading this and may still be dealing with this issue, here's a pro tip:  skip the `bin` directory when you copy your files to your deployment server.  Even when I have been able to successfully publish my project without a VS 2015 crash (using the workaround of setting the publish directory in the publish profile to something short like `C:\\temp`), the filepaths in `bin` are too long to transfer to the destination workstation.  There was no error message generated when I tried to transfer them (as is all too common); it simply \"didn't work\". Lo and behold, leave out the `bin` folder and it \"just works\" as expected.  Clearly this is an issue with the requested destination filepath being too long, although I wish we could get a [descriptive] error message indicating such.",
        "createdAt": "2017-06-16T12:29:54Z",
        "updatedAt": "2017-06-16T12:31:53Z",
        "author": {
          "login": "derekpec"
        }
      }
    ]
  }
}