{
  "number": 5162,
  "title": "Using /isolate Against Solution with reference to non-managed project type results in MSB4252",
  "body": "Attempting the following:\r\n\r\n```\r\nmsbuild Utilities.sln /m /isolate /t:Build /p:Configuration=Release\r\n```\r\n\r\nResults in the following redacted error:\r\n\r\n```\r\nMicrosoft (R) Build Engine version 16.5.0+d4cbfca49 for .NET Framework\r\nCopyright (C) Microsoft Corporation. All rights reserved.\r\n\r\nBuild started 3/5/2020 10:03:16 AM.\r\n     1>Project \"C:\\REDACTED\\Utilities.sln\" on node 1 (Build target(s)).\r\n     1>ValidateSolutionConfiguration:\r\n         Building solution configuration \"Release|Any CPU\".\r\n     1>C:\\REDACTED\\Utilities.sln.metaproj : error : MSB4252: Project \"C:\\REDACTED\\Utilities.sln\" has a reference to \"C:\\REDACTED\\Utilities.synproj\" (default target(s)) but the build result for the reference is not in the engine cache. In isolated builds this could mean one of the following: [C:\\REDACTED\\Utilities.sln]\r\nC:\\REDACTED\\Utilities.sln.metaproj : error :     - the reference was not explicitly specified as a ProjectReference item in \"C:\\REDACTED\\Utilities.sln\" [C:\\REDACTED\\Utilities.sln]\r\nC:\\REDACTED\\Utilities.sln.metaproj : error :     - the reference was not included in the provided input caches [C:\\REDACTED\\Utilities.sln]\r\nC:\\REDACTED\\Utilities.sln.metaproj : error :     - the reference was called with a target which is not specified in the ProjectReferenceTargets item in \"C:\\REDACTED\\Utilities.sln\" [C:\\REDACTED\\Utilities.sln]\r\nC:\\REDACTED\\Utilities.sln.metaproj : error :      [C:\\REDACTED\\Utilities.sln]\r\n     1>C:\\REDACTED\\Utilities.sln.metaproj : error : MSB4252: Project \"C:\\REDACTED\\Utilities.sln\" has a reference to \"C:\\REDACTED\\SynergyStructures.synproj\" (default target(s)) but the build result for the reference is not in the engine cache. In isolated builds this could mean one of the following: [C:\\REDACTED\\Utilities.sln]\r\nC:\\REDACTED\\Utilities.sln.metaproj : error :     - the reference was not explicitly specified as a ProjectReference item in \"C:\\REDACTED\\Utilities.sln\" [C:\\REDACTED\\Utilities.sln]\r\nC:\\REDACTED\\Utilities.sln.metaproj : error :     - the reference was not included in the provided input caches [C:\\REDACTED\\Utilities.sln]\r\nC:\\REDACTED\\Utilities.sln.metaproj : error :     - the reference was called with a target which is not specified in the ProjectReferenceTargets item in \"C:\\REDACTED\\Utilities.sln\" [C:\\REDACTED\\Utilities.sln]\r\nC:\\REDACTED\\Utilities.sln.metaproj : error :      [C:\\REDACTED\\Utilities.sln]\r\n     1>C:\\REDACTED\\Utilities.sln.metaproj : error : MSB4252: Project \"C:\\REDACTED\\Utilities.sln\" has a reference to \"C:\\REDACTED\\Repository.synproj\" (default target(s)) but the build result for the reference is not in the engine cache. In isolated builds this could mean one of the following: [C:\\REDACTED\\Utilities.sln]\r\nC:\\REDACTED\\Utilities.sln.metaproj : error :     - the reference was not explicitly specified as a ProjectReference item in \"C:\\REDACTED\\Utilities.sln\" [C:\\REDACTED\\Utilities.sln]\r\nC:\\REDACTED\\Utilities.sln.metaproj : error :     - the reference was not included in the provided input caches [C:\\REDACTED\\Utilities.sln]\r\nC:\\REDACTED\\Utilities.sln.metaproj : error :     - the reference was called with a target which is not specified in the ProjectReferenceTargets item in \"C:\\REDACTED\\Utilities.sln\" [C:\\REDACTED\\Utilities.sln]\r\nC:\\REDACTED\\Utilities.sln.metaproj : error :      [C:\\REDACTED\\Utilities.sln]\r\n     1>Done Building Project \"C:\\REDACTED\\Utilities.sln\" (Build target(s)) -- FAILED.\r\n\r\nBuild FAILED.\r\n\r\n       \"C:\\REDACTED\\Utilities.sln\" (Build target) (1) ->\r\n       (Build target) -> \r\n         C:\\REDACTED\\Utilities.sln.metaproj : error : MSB4252: Project \"C:\\REDACTED\\Utilities.sln\" has a reference to \"C:\\REDACTED\\Utilities.synproj\" (default target(s)) but the build result for the reference is not in the engine cache. In isolated builds this could mean one of the following: [C:\\REDACTED\\Utilities.sln]\r\n       C:\\REDACTED\\Utilities.sln.metaproj : error :     - the reference was not explicitly specified as a ProjectReference item in \"C:\\REDACTED\\Utilities.sln\" [C:\\REDACTED\\Utilities.sln]\r\n       C:\\REDACTED\\Utilities.sln.metaproj : error :     - the reference was not included in the provided input caches [C:\\REDACTED\\Utilities.sln]\r\n       C:\\REDACTED\\Utilities.sln.metaproj : error :     - the reference was called with a target which is not specified in the ProjectReferenceTargets item in \"C:\\REDACTED\\Utilities.sln\" [C:\\REDACTED\\Utilities.sln]\r\n       C:\\REDACTED\\Utilities.sln.metaproj : error :      [C:\\REDACTED\\Utilities.sln]\r\n         C:\\REDACTED\\Utilities.sln.metaproj : error : MSB4252: Project \"C:\\REDACTED\\Utilities.sln\" has a reference to \"C:\\REDACTED\\SynergyStructures.synproj\" (default target(s)) but the build result for the reference is not in the engine cache. In isolated builds this could mean one of the following: [C:\\REDACTED\\Utilities.sln]\r\n       C:\\REDACTED\\Utilities.sln.metaproj : error :     - the reference was not explicitly specified as a ProjectReference item in \"C:\\REDACTED\\Utilities.sln\" [C:\\REDACTED\\Utilities.sln]\r\n       C:\\REDACTED\\Utilities.sln.metaproj : error :     - the reference was not included in the provided input caches [C:\\REDACTED\\Utilities.sln]\r\n       C:\\REDACTED\\Utilities.sln.metaproj : error :     - the reference was called with a target which is not specified in the ProjectReferenceTargets item in \"C:\\REDACTED\\Utilities.sln\" [C:\\REDACTED\\Utilities.sln]\r\n       C:\\REDACTED\\Utilities.sln.metaproj : error :      [C:\\REDACTED\\Utilities.sln]\r\n         C:\\REDACTED\\Utilities.sln.metaproj : error : MSB4252: Project \"C:\\REDACTED\\Utilities.sln\" has a reference to \"C:\\REDACTED\\Repository.synproj\" (default target(s)) but the build result for the reference is not in the engine cache. In isolated builds this could mean one of the following: [C:\\REDACTED\\Utilities.sln]\r\n       C:\\REDACTED\\Utilities.sln.metaproj : error :     - the reference was not explicitly specified as a ProjectReference item in \"C:\\REDACTED\\Utilities.sln\" [C:\\REDACTED\\Utilities.sln]\r\n       C:\\REDACTED\\Utilities.sln.metaproj : error :     - the reference was not included in the provided input caches [C:\\REDACTED\\Utilities.sln]\r\n       C:\\REDACTED\\Utilities.sln.metaproj : error :     - the reference was called with a target which is not specified in the ProjectReferenceTargets item in \"C:\\REDACTED\\Utilities.sln\" [C:\\REDACTED\\Utilities.sln]\r\n       C:\\REDACTED\\Utilities.sln.metaproj : error :      [C:\\REDACTED\\Utilities.sln]\r\n\r\n    0 Warning(s)\r\n    3 Error(s)\r\n\r\nTime Elapsed 00:00:00.26\r\n```\r\n\r\nThe structure of the Solution file (Utilities.sln) looks like this:\r\n\r\n```\r\ndigraph {\r\n\"Utilities.synproj\" -> \"Repository.synproj\"\r\n\"Utilities.synproj\" -> \"SynergyStructures.synproj\"\r\n\"SynergyStructures.synproj\" -> \"Repository.synproj\"\r\n}\r\n```\r\n\r\n![image](https://user-images.githubusercontent.com/2592881/76007604-8a4e9800-5ecb-11ea-9e64-51f985802377.png)\r\n\r\nReading https://github.com/microsoft/msbuild/blob/d004974104fde202e633b3c97e0ece3287aa62f9/documentation/specs/static-graph.md#single-project-isolated-builds-implementation-details I am trying to understand what the root cause of the issue may be?\r\n\r\n### Environment data\r\n`msbuild /version` output:\r\n\r\n```\r\nMicrosoft (R) Build Engine version 16.5.0+d4cbfca49 for .NET Framework\r\nCopyright (C) Microsoft Corporation. All rights reserved.\r\n\r\n16.5.0.12403\r\n```\r\n\r\nOS info: Windows 10 1909",
  "state": "OPEN",
  "createdAt": "2020-03-05T17:28:03Z",
  "updatedAt": "2024-02-21T16:29:48Z",
  "closedAt": null,
  "author": {
    "login": "aolszowka"
  },
  "labels": [
    "Area: Static Graph",
    "triaged"
  ],
  "assignees": {
    "nodes": [
      {
        "login": "cdmihai"
      }
    ]
  },
  "milestone": null,
  "comments": {
    "nodes": [
      {
        "body": "I suspect this is a weird interaction between solution guessing and `/isolate`. I'll try and repro on my side.\r\n\r\nAs a workaround, you can try avoiding solution files altogether, by using msbuild-native traversal projects instead: https://github.com/microsoft/MSBuildSdks/tree/master/src/Traversal. They need only reference the root projects, not the entire closure.",
        "createdAt": "2020-03-06T00:02:37Z",
        "updatedAt": "2020-03-06T00:02:37Z",
        "author": {
          "login": "cdmihai"
        }
      },
      {
        "body": "I wasn't able to figure out how to use the msbuild-native traversal project type, however because this dependency tree is pretty simple I am able just to give it `Utilities.synproj`. I still error but the error message is slightly different:\r\n\r\n```\r\nMicrosoft (R) Build Engine version 16.5.0+d4cbfca49 for .NET Framework\r\nCopyright (C) Microsoft Corporation. All rights reserved.\r\n\r\nBuild started 3/6/2020 7:59:23 AM.\r\n     1>Project \"R:\\REDACTED\\Utilities.synproj\" on node 1 (Build target(s)).\r\n     1>C:\\Program Files (x86)\\Microsoft Visual Studio\\2019\\Preview\\MSBuild\\Current\\Bin\\Microsoft.Common.CurrentVersion.targets(1630,5): error : MSB4252: Project \"R:\\REDACTED\\Utilities.synproj\" has a reference to \"R:\\REDACTED\\Repository.synproj\" (GetTargetFrameworks target(s)) but the build result for the reference is not in the engine cache. In isolated builds this could mean one of the following: [R:\\REDACTED\\Utilities.synproj]\r\nC:\\Program Files (x86)\\Microsoft Visual Studio\\2019\\Preview\\MSBuild\\Current\\Bin\\Microsoft.Common.CurrentVersion.targets(1630,5): error :     - the reference was not explicitly specified as a ProjectReference item in \"R:\\REDACTED\\Utilities.synproj\" [R:\\REDACTED\\Utilities.synproj]\r\nC:\\Program Files (x86)\\Microsoft Visual Studio\\2019\\Preview\\MSBuild\\Current\\Bin\\Microsoft.Common.CurrentVersion.targets(1630,5): error :     - the reference was not included in the provided input caches [R:\\REDACTED\\Utilities.synproj]\r\nC:\\Program Files (x86)\\Microsoft Visual Studio\\2019\\Preview\\MSBuild\\Current\\Bin\\Microsoft.Common.CurrentVersion.targets(1630,5): error :     - the reference was called with a target which is not specified in the ProjectReferenceTargets item in \"R:\\REDACTED\\Utilities.synproj\" [R:\\REDACTED\\Utilities.synproj]\r\nC:\\Program Files (x86)\\Microsoft Visual Studio\\2019\\Preview\\MSBuild\\Current\\Bin\\Microsoft.Common.CurrentVersion.targets(1630,5): error :      [R:\\REDACTED\\Utilities.synproj]\r\n     1>C:\\Program Files (x86)\\Microsoft Visual Studio\\2019\\Preview\\MSBuild\\Current\\Bin\\Microsoft.Common.CurrentVersion.targets(1630,5): error : MSB4252: Project \"R:\\REDACTED\\Utilities.synproj\" has a reference to \"R:\\REDACTED\\SynergyStructures.synproj\" (GetTargetFrameworks target(s)) but the build result for the reference is not in the engine cache. In isolated builds this could mean one of the following: [R:\\REDACTED\\Utilities.synproj]\r\nC:\\Program Files (x86)\\Microsoft Visual Studio\\2019\\Preview\\MSBuild\\Current\\Bin\\Microsoft.Common.CurrentVersion.targets(1630,5): error :     - the reference was not explicitly specified as a ProjectReference item in \"R:\\REDACTED\\Utilities.synproj\" [R:\\REDACTED\\Utilities.synproj]\r\nC:\\Program Files (x86)\\Microsoft Visual Studio\\2019\\Preview\\MSBuild\\Current\\Bin\\Microsoft.Common.CurrentVersion.targets(1630,5): error :     - the reference was not included in the provided input caches [R:\\REDACTED\\Utilities.synproj]\r\nC:\\Program Files (x86)\\Microsoft Visual Studio\\2019\\Preview\\MSBuild\\Current\\Bin\\Microsoft.Common.CurrentVersion.targets(1630,5): error :     - the reference was called with a target which is not specified in the ProjectReferenceTargets item in \"R:\\REDACTED\\Utilities.synproj\" [R:\\REDACTED\\Utilities.synproj]\r\nC:\\Program Files (x86)\\Microsoft Visual Studio\\2019\\Preview\\MSBuild\\Current\\Bin\\Microsoft.Common.CurrentVersion.targets(1630,5): error :      [R:\\REDACTED\\Utilities.synproj]\r\n     1>Done Building Project \"R:\\REDACTED\\Utilities.synproj\" (Build target(s)) -- FAILED.\r\n\r\nBuild FAILED.\r\n\r\n       \"R:\\REDACTED\\Utilities.synproj\" (Build target) (1) ->\r\n       (_GetProjectReferenceTargetFrameworkProperties target) -> \r\n         C:\\Program Files (x86)\\Microsoft Visual Studio\\2019\\Preview\\MSBuild\\Current\\Bin\\Microsoft.Common.CurrentVersion.targets(1630,5): error : MSB4252: Project \"R:\\REDACTED\\Utilities.synproj\" has a reference to \"R:\\REDACTED\\Repository.synproj\" (GetTargetFrameworks target(s)) but the build result for the reference is not in the engine cache. In isolated builds this could mean one of the following: [R:\\REDACTED\\Utilities.synproj]\r\n       C:\\Program Files (x86)\\Microsoft Visual Studio\\2019\\Preview\\MSBuild\\Current\\Bin\\Microsoft.Common.CurrentVersion.targets(1630,5): error :     - the reference was not explicitly specified as a ProjectReference item in \"R:\\REDACTED\\Utilities.synproj\" [R:\\REDACTED\\Utilities.synproj]\r\n       C:\\Program Files (x86)\\Microsoft Visual Studio\\2019\\Preview\\MSBuild\\Current\\Bin\\Microsoft.Common.CurrentVersion.targets(1630,5): error :     - the reference was not included in the provided input caches [R:\\REDACTED\\Utilities.synproj]\r\n       C:\\Program Files (x86)\\Microsoft Visual Studio\\2019\\Preview\\MSBuild\\Current\\Bin\\Microsoft.Common.CurrentVersion.targets(1630,5): error :     - the reference was called with a target which is not specified in the ProjectReferenceTargets item in \"R:\\REDACTED\\Utilities.synproj\" [R:\\REDACTED\\Utilities.synproj]\r\n       C:\\Program Files (x86)\\Microsoft Visual Studio\\2019\\Preview\\MSBuild\\Current\\Bin\\Microsoft.Common.CurrentVersion.targets(1630,5): error :      [R:\\REDACTED\\Utilities.synproj]\r\n         C:\\Program Files (x86)\\Microsoft Visual Studio\\2019\\Preview\\MSBuild\\Current\\Bin\\Microsoft.Common.CurrentVersion.targets(1630,5): error : MSB4252: Project \"R:\\REDACTED\\Utilities.synproj\" has a reference to \"R:\\REDACTED\\SynergyStructures.synproj\" (GetTargetFrameworks target(s)) but the build result for the reference is not in the engine cache. In isolated builds this could mean one of the following: [R:\\REDACTED\\Utilities.synproj]\r\n       C:\\Program Files (x86)\\Microsoft Visual Studio\\2019\\Preview\\MSBuild\\Current\\Bin\\Microsoft.Common.CurrentVersion.targets(1630,5): error :     - the reference was not explicitly specified as a ProjectReference item in \"R:\\REDACTED\\Utilities.synproj\" [R:\\REDACTED\\Utilities.synproj]\r\n       C:\\Program Files (x86)\\Microsoft Visual Studio\\2019\\Preview\\MSBuild\\Current\\Bin\\Microsoft.Common.CurrentVersion.targets(1630,5): error :     - the reference was not included in the provided input caches [R:\\REDACTED\\Utilities.synproj]\r\n       C:\\Program Files (x86)\\Microsoft Visual Studio\\2019\\Preview\\MSBuild\\Current\\Bin\\Microsoft.Common.CurrentVersion.targets(1630,5): error :     - the reference was called with a target which is not specified in the ProjectReferenceTargets item in \"R:\\REDACTED\\Utilities.synproj\" [R:\\REDACTED\\Utilities.synproj]\r\n       C:\\Program Files (x86)\\Microsoft Visual Studio\\2019\\Preview\\MSBuild\\Current\\Bin\\Microsoft.Common.CurrentVersion.targets(1630,5): error :      [R:\\REDACTED\\Utilities.synproj]\r\n\r\n    0 Warning(s)\r\n    2 Error(s)\r\n\r\nTime Elapsed 00:00:00.59\r\n```\r\n\r\nHere's a redacted version of `Utilities.synproj` that shows that `Repository.synproj` and `SynergyStructures.synproj` are project references. If you need more I can provide redacting as needed.\r\n\r\n```xml\r\n<?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<Project ToolsVersion=\"15.0\" DefaultTargets=\"Build\" xmlns=\"http://schemas.microsoft.com/developer/msbuild/2003\">\r\n  <Import Project=\"..\\..\\..\\Synergy.Traditional.PropertyGroups.msbuild\" />\r\n  <PropertyGroup>\r\n    <CommonPropertiesFileLocation>..\\..\\..\\Synergy.Traditional.PropertyGroups.msbuild</CommonPropertiesFileLocation>\r\n    <Configuration Condition=\" '$(Configuration)' == '' \">Debug</Configuration>\r\n    <DBL_DisWarnOpt>881,1033</DBL_DisWarnOpt>\r\n    <DBL_DisWarnOptCheck>True</DBL_DisWarnOptCheck>\r\n    <DBL_qAlign>True</DBL_qAlign>\r\n    <DBL_qTrim>True</DBL_qTrim>\r\n    <DBL_qWarnLevel>4</DBL_qWarnLevel>\r\n    <DBL_WarnToErr>1005,1006,1007,1014,1017,1018,1024,1028,1029,1031,1038,1040,132,134,149,185,214,215,312,314,320,337,339,357,363,365,366,367,368,418,513,518,533,534,543,545,601,602,603,604,657,691,706,719,720,721,730,731,755,770,771,787,788,791,795,798,799,801,824,825,841,844,863,868,875,878,882,910,916,917,918,919,920,948,952,958,968,985,986,996</DBL_WarnToErr>\r\n    <DBL_WarnToErrCheck>True</DBL_WarnToErrCheck>\r\n    <DBLink_ReferenceCheck>True</DBLink_ReferenceCheck>\r\n    <EnableCommonProperties>True</EnableCommonProperties>\r\n    <Name>Utilities</Name>\r\n    <OutputName>Utilities</OutputName>\r\n    <OutputType>elb</OutputType>\r\n    <Platform Condition=\" '$(Configuration)' == '' \">AnyCPU</Platform>\r\n    <ProjectGuid>{REDACTED-REDACTED-REDACTED-REDACTED-REDACTED}</ProjectGuid>\r\n    <ProjectTypeGuids>{7B8CF543-378A-4EC1-BB1B-98E4DC6E6820};{BBD0F5D1-1CC4-42fd-BA4C-A96779C64378}</ProjectTypeGuids>\r\n    <RootNamespace>REDACTED</RootNamespace>\r\n    <StartupObject></StartupObject>\r\n  </PropertyGroup>\r\n  <PropertyGroup Condition=\"$(REDACTED) != '' AND $(REDACTED) &gt;= 2\">\r\n    <DBL_qBoundsCheck>True</DBL_qBoundsCheck>\r\n  </PropertyGroup>\r\n  <PropertyGroup Condition=\" '$(Configuration)|$(Platform)' == 'Debug|AnyCPU' \">\r\n    <DBLink_OtherOptions>-W1</DBLink_OtherOptions>\r\n    <DebugOptimize>Debug</DebugOptimize>\r\n    <EnableUnmanagedDebugging>false</EnableUnmanagedDebugging>\r\n    <IncludeDebugInformation>true</IncludeDebugInformation>\r\n    <LanguageCompatibilityLevel>10030303</LanguageCompatibilityLevel>\r\n    <OutputPath>bin\\$(Configuration)\\$(Platform)</OutputPath>\r\n    <PlatformTarget>x86</PlatformTarget>\r\n    <TargetRuntimeLevel>10030303</TargetRuntimeLevel>\r\n    <UnevaluatedOutputPath>exe:</UnevaluatedOutputPath>\r\n  </PropertyGroup>\r\n  <PropertyGroup Condition=\" '$(Configuration)|$(Platform)' == 'Release|AnyCPU' \">\r\n    <DBLink_OtherOptions>-W1</DBLink_OtherOptions>\r\n    <DebugOptimize>Optimize</DebugOptimize>\r\n    <EnableUnmanagedDebugging>false</EnableUnmanagedDebugging>\r\n    <IncludeDebugInformation>False</IncludeDebugInformation>\r\n    <LanguageCompatibilityLevel>10030303</LanguageCompatibilityLevel>\r\n    <OutputPath>bin\\$(Configuration)\\$(Platform)</OutputPath>\r\n    <PlatformTarget>x86</PlatformTarget>\r\n    <TargetRuntimeLevel>10030303</TargetRuntimeLevel>\r\n    <UnevaluatedOutputPath>exe:</UnevaluatedOutputPath>\r\n  </PropertyGroup>\r\n  <ItemGroup>\r\n    <Compile Include=\"Accumulator.dbl\" />\r\n    <!--Snipped ~50 additional compile items-->\r\n    <Compile Include=\"var.dbl\" />\r\n  </ItemGroup>\r\n  <ItemGroup>\r\n    <ProjectReference Include=\"..\\..\\..\\Schemas\\Repository.synproj\">\r\n      <Name>Repository</Name>\r\n      <Project>{REDACTED-REDACTED-REDACTED-REDACTED-REDACTED}</Project>\r\n      <Private>False</Private>\r\n    </ProjectReference>\r\n    <ProjectReference Include=\"..\\..\\SynergyStructures\\Program\\SynergyStructures.synproj\">\r\n      <Name>SynergyStructures</Name>\r\n      <Project>{REDACTED-REDACTED-REDACTED-REDACTED-REDACTED}</Project>\r\n      <Private>False</Private>\r\n    </ProjectReference>\r\n  </ItemGroup>\r\n  <ItemGroup>\r\n    <Reference Include=\"WND:tklib.elb\" Condition=\"$(REDACTED) == '' OR $(REDACTED) == 0\" />\r\n    <Reference Include=\"WND:tklib_qcheck.elb\" Condition=\"$(REDACTED) != '' AND $(REDACTED) &gt;= 2\" />\r\n  </ItemGroup>\r\n  <Import Project=\"$(MSBuildExtensionsPath)\\Synergex\\dbl\\Synergex.SynergyDE.Traditional.targets\" />\r\n  <PropertyGroup>\r\n    <PostBuildEvent></PostBuildEvent>\r\n    <PreBuildEvent></PreBuildEvent>\r\n  </PropertyGroup>\r\n</Project>\r\n```\r\n",
        "createdAt": "2020-03-06T15:12:17Z",
        "updatedAt": "2020-03-06T15:12:17Z",
        "author": {
          "login": "aolszowka"
        }
      },
      {
        "body": ">  I still error but the error message is slightly different:\r\n\r\nThis is probably a different reason from the solution failure. The solution failure is probably a bug, this one is a legit /isolate failure (since no solutions are involved).\r\n\r\nThis error exists because static graph cannot know how a project will call into other projects (via the MSBuild task). Static graph is constructed before the build, before targets are run, so it only sees evaluation elements (elements outside of target elements). The remedy for now is for the user to [specify these calling patterns at evaluation time](https://github.com/microsoft/msbuild/blob/master/documentation/specs/static-graph.md#inferring-which-targets-to-run-for-a-project-within-the-graph) (outside of targets). The bad prediction can be due to missmatching targets (A calls B with different targets), or due to different global properties on A and B.\r\n\r\nIn this particular instance the error means that vanilla msbuild did something static graph did not predict. Static graph did not predict that `R:\\REDACTED\\Utilities.synproj` (with some global properties) would call `R:\\REDACTED\\Repository.synproj` (with some global properties) with the target `GetTargetFrameworks`.\r\nThe global properties are printed in the latest msbuild version of the error message. You can update msbuild/VS to get them, or you can use the binlog viewer to find them. Global properties are important because in the msbuild engine, the identity of a project is actually a tuple of (project file, global properties). When project A calls into project B, it's actually (A, global props) calling to (B, global props).\r\n\r\n`GetTargetFrameworks` is part of the [p2p protocol](https://github.com/microsoft/msbuild/blob/master/documentation/ProjectReference-Protocol.md), which is already specified for static graph [here ](https://github.com/microsoft/msbuild/blob/master/src/Tasks/Microsoft.Managed.Before.targets) and [here](https://github.com/microsoft/msbuild/blob/master/src/Tasks/Microsoft.Managed.After.targets). This means that C# projects are static graph /isolate friendly \"out of the box\", they don't have to specify the target protocol because the sdk already specifies it for them. Unfortunately these files [get imported only into managed projects](https://github.com/microsoft/msbuild/blob/052facdfd710a31960b83e5d1d2242390bcd630c/src/Tasks/Microsoft.CSharp.targets#L159-L163) and wrap around the import of `Microsoft.Common.CurrentVersion.targets`. So in your case the synproj sdk probably does not end up importing these. As a workaround you'll have to copy paste the target protocol either into your repo (maybe in [directory.build.targets](https://docs.microsoft.com/en-us/visualstudio/msbuild/customize-your-build?view=vs-2019#directorybuildprops-and-directorybuildtargets)), or into the synproj sdk. I created #5164 to separate the target protocol between the common p2p protocol and the c# specific one.\r\n\r\nI would say don't necessarily get blocked on /isolate for now. It helps you to find areas of your runtime graph that are hidden from static graph (thus allowing better scheduling and potentially avoiding race conditions if the unknown graph writes into the same files as the known graph), helps ensure some build correctness, and helps with distribution and caching of your build when msbuild is orchestrated by higher level engines like BuildXL. But for starters you can run without it, especially if your repository uses ProjectReference to specify dependencies (static graph only finds edges and nodes by following ProjectReference, it's blind to anything else). \r\n",
        "createdAt": "2020-03-06T20:26:19Z",
        "updatedAt": "2020-03-06T20:26:34Z",
        "author": {
          "login": "cdmihai"
        }
      },
      {
        "body": "Action Items for this:\r\n\r\n* Because we're not going to chase on /isolate (and because it looks like the third party needs to make changes). I am leaving that portion with the third party for now.\r\n* The /isolate not working on solution files types probably should be tracked. This would be with Microsoft.\r\n\r\nFeel free to close this issue to re-purpose it for tracking down the solution file issue.\r\n\r\nThank you",
        "createdAt": "2020-03-09T14:55:57Z",
        "updatedAt": "2020-03-09T14:55:57Z",
        "author": {
          "login": "aolszowka"
        }
      }
    ]
  }
}