{
  "number": 7453,
  "title": "ArgumentNullException leading to a VS crash",
  "body": "### Issue Description\r\n\r\nSeeing an ANE crash while debugging VS, after creating a project.\r\n\r\nDiscovered while researching a hang reported in https://devdiv.visualstudio.com/DevDiv/_workitems/edit/1462801. Perhaps the failures are related.\r\n\r\n### Steps to Reproduce\r\n\r\n- Launch VS\r\n- Start with no solution\r\n- Add a text file (to create an empty solution)\r\n- Add a new Console App\r\n- See an exception that leads to a crash\r\n\r\n### Analysis\r\n\r\n```\r\nSystem.ArgumentNullException: Parameter \"packet\" cannot be null.\r\n   at Microsoft.Build.Shared.ErrorUtilities.VerifyThrowArgumentNull(Object parameter, String parameterName, String resourceName)\r\n   at Microsoft.Build.BackEnd.NodeProviderOutOfProc.SendData(Int32 nodeId, INodePacket packet)\r\n   at Microsoft.Build.BackEnd.NodeManager.SendData(Int32 node, INodePacket packet)\r\n   at Microsoft.Build.BackEnd.SdkResolution.MainNodeSdkResolverService.PacketReceived(Int32 node, INodePacket packet)\r\n   at Microsoft.Build.BackEnd.NodePacketFactory.PacketFactoryRecord.DeserializeAndRoutePacket(Int32 nodeId, ITranslator translator)\r\n   at Microsoft.Build.BackEnd.NodePacketFactory.DeserializeAndRoutePacket(Int32 nodeId, NodePacketType packetType, ITranslator translator)\r\n   at Microsoft.Build.BackEnd.NodeProviderOutOfProcBase.NodeContext.ReadAndRoutePacket(NodePacketType packetType, Byte[] packetData, Int32 packetLength)\r\n   at Microsoft.Build.BackEnd.NodeProviderOutOfProcBase.NodeContext.BodyReadComplete(IAsyncResult result)\r\n   at System.IO.Pipes.PipeStream.AsyncPSCallback(UInt32 errorCode, UInt32 numBytes, NativeOverlapped* pOverlapped)\r\n   at System.Threading._IOCompletionCallback.PerformIOCompletionCallback(UInt32 errorCode, UInt32 numBytes, NativeOverlapped* pOVERLAP)\r\n```\r\n\r\nThe ANE originates here:\r\n\r\nhttps://github.com/dotnet/msbuild/blob/9c173296404f9c365cc524569766f16d7cfcf308/src/Build/BackEnd/Components/SdkResolution/MainNodeSdkResolverService.cs#L93\r\n\r\n`response` will be null in the `finally` block if there was an exception. That null value triggers an exception, which crashes VS in the above scenario.\r\n\r\n`#nullable enable` would flag this issue in the code.\r\n\r\n### Versions & Configurations\r\n\r\nVS 17.2.0 Preview 3.0 [32308.589.main]",
  "state": "OPEN",
  "createdAt": "2022-03-10T00:18:34Z",
  "updatedAt": "2024-08-30T17:28:53Z",
  "closedAt": null,
  "author": {
    "login": "drewnoakes"
  },
  "labels": [
    "bug",
    "triaged"
  ],
  "assignees": {
    "nodes": []
  },
  "milestone": null,
  "comments": {
    "nodes": [
      {
        "body": "I updated this code recently but this code path didn't change that much.  It used to run inside a throw away task.\r\n\r\nhttps://github.com/dotnet/msbuild/blob/fb700f90493a0bf47623511edf28b1d6c114e4fa/src/Build/BackEnd/Components/SdkResolution/MainNodeSdkResolverService.cs#L152-L179\r\n\r\nI wonder if its been throwing for a while?  If an exception is thrown, a \"fatal build error\" is logged, I wonder if we can get those exception details?\r\n\r\nThis code is handling a request from an out-of-proc node to get the path to an MSBuild project SDK.  The out-of-proc node is waiting for a response we need to send something back I think.  I really want to know what the exception is...",
        "createdAt": "2022-03-10T00:44:39Z",
        "updatedAt": "2022-03-10T00:44:39Z",
        "author": {
          "login": "jeffkl"
        }
      },
      {
        "body": "@jeffkl it should be easy enough to repro with the above steps. Let me know if it doesn't repro for you and we can take a look on my machine.",
        "createdAt": "2022-03-10T01:48:47Z",
        "updatedAt": "2022-03-10T20:44:26Z",
        "author": {
          "login": "drewnoakes"
        }
      },
      {
        "body": "Interesting yeah it repros on 17.1.0 at least which means its not a _regression_ from my recent change.  Still not great obviously but it seems like the problem has been around for a while.\r\n\r\nI tried debugging my local experimental instance which repro'd the problem but didn't see the exception, how do I get this to happen in a debugger? This is what I tried:\r\n\r\n* Launch local VS\r\n* Launch Experimental instance\r\n* Attach VS to experimental instance\r\n* Load symbols for MSBuild assemblies\r\n* Configure debugger to break on ArgumentNullException\r\n* Repro problem in experimental instance\r\n",
        "createdAt": "2022-03-10T03:39:47Z",
        "updatedAt": "2022-03-10T03:39:47Z",
        "author": {
          "login": "jeffkl"
        }
      },
      {
        "body": "@drewnoakes Thanks for filing this, I got it to show me the exception.  The .NET SDK resolver is throwing because the solution path is an empty string:\r\n\r\n![image](https://user-images.githubusercontent.com/17556515/157701115-0ffd8c13-9e86-4731-9875-3bb88089e3b4.png)\r\n\r\n![image](https://user-images.githubusercontent.com/17556515/157701396-b8dbe9b8-e76d-4874-af2c-8cc2e5a8b2b4.png)\r\n\r\nhttps://github.com/dotnet/sdk/blob/b69e8f53c6f65fc8f26fefc0cbff03725ee0f8ba/src/Resolvers/Microsoft.DotNet.MSBuildSdkResolver/MSBuildSdkResolver.cs#L91\r\n\r\nI can fix the MSBuild side of things to not throw an unhandled exception and we'll need to update the .NET SDK resolver to handle this as well.  I had to make a similar update to the NuGet SDK resolver:\r\n\r\nhttps://github.com/NuGet/NuGet.Client/pull/4335\r\n\r\nFYI @rainersigwald @BenVillalobos ",
        "createdAt": "2022-03-10T16:02:23Z",
        "updatedAt": "2022-03-10T16:02:23Z",
        "author": {
          "login": "jeffkl"
        }
      },
      {
        "body": "@BenVillalobos when working on a fix I realized that this is fallout from https://github.com/dotnet/msbuild/pull/6763 which technically is incomplete since it now throws an exception on the main node when an out-of-proc node is requesting SDK resolution.  Should the fix be to serialize the `SDKResolverException` back to the out-of-proc node and throw it there?  Otherwise the current APIs only let me send back an error message to the out-of-proc node.  \ud83d\ude21 ",
        "createdAt": "2022-03-10T18:11:03Z",
        "updatedAt": "2022-03-10T18:11:03Z",
        "author": {
          "login": "jeffkl"
        }
      },
      {
        "body": "> Should the fix be to serialize the SDKResolverException back to the out-of-proc node and throw it there?\r\n\r\nthis sounds right, I'm not sure how large the work item is. it sounds like a new issue should be filed for it, where this one is specifically to capture the right exception before letting it throw",
        "createdAt": "2022-03-10T19:21:04Z",
        "updatedAt": "2022-03-10T19:21:04Z",
        "author": {
          "login": "benvillalobos"
        }
      },
      {
        "body": "I also encountered an ArgumentNullException when I was building a .NET Aspire project using the tool aspirate:\r\n\r\n![image](https://github.com/user-attachments/assets/68b0ef47-9efc-43b5-be34-5d7a02960545)\r\n\r\n```\r\nPS C:\\Users\\32512\\source\\repos\\LiveMusicProjectX\\AspireApp.AppHost> aspirate.exe init\r\n\r\n     _                    _           ___\r\n    / \\     ___   _ __   (_)  _ __   ( _ )\r\n   / _ \\   / __| | '_ \\  | | | '__|  / _ \\\r\n  / ___ \\  \\__ \\ | |_) | | | | |    | (_) |\r\n /_/   \\_\\ |___/ | .__/  |_| |_|     \\___/\r\n                 |_|\r\nHandle deployments of a .NET Aspire AppHost\r\n\r\n\r\n\u2500\u2500 Handle Initialization Defaults \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\r\n(?) Done: Set 'Container builder' to 'docker'.\r\nAspirate supports setting a fall-back value for projects that have not yet set a 'ContainerRegistry' in their csproj\r\nfile.\r\nWould you like to set a fall-back value for the container registry? [y/n] (n): n\r\nAspirate supports setting a repository prefix for all for projects.\r\nWould you like to set this value? [y/n] (n): n\r\n(?) Done: Set 'Container fallback tag' to 'latest'.\r\nAspirate supports setting a custom directory for 'Templates' that are used when generating kustomize manifests.\r\nWould you like to use a custom directory (selecting 'n' will default to built in templates ? [y/n] (n): n\r\n(?) Done: Configuration for aspirate has been bootstrapped successfully at\r\n'C:\\Users\\32512\\source\\repos\\LiveMusicProjectX\\AspireApp.AppHost\\.\\aspirate.json'.\r\n\r\n ?? Execution Completed ??\r\nPS C:\\Users\\32512\\source\\repos\\LiveMusicProjectX\\AspireApp.AppHost> aspirate generate\r\n\r\n     _                    _           ___\r\n    / \\     ___   _ __   (_)  _ __   ( _ )\r\n   / _ \\   / __| | '_ \\  | | | '__|  / _ \\\r\n  / ___ \\  \\__ \\ | |_) | | | | |    | (_) |\r\n /_/   \\_\\ |___/ | .__/  |_| |_|     \\___/\r\n                 |_|\r\nHandle deployments of a .NET Aspire AppHost\r\n\r\n\r\n\u2500\u2500 Handling Aspirate State \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\r\n\r\n\u2500\u2500 Handling Aspirate Secrets \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\r\nSecrets are to be protected by a password\r\n\r\nPlease enter new Password: *\r\nPlease enter it again to confirm: *\r\nSecret State has been initialised!.\r\n\r\n\u2500\u2500 Handling Configuration \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\r\nSuccessfully loaded existing aspirate bootstrap settings from '.'.\r\n\r\n\u2500\u2500 Handling Aspire Manifest \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\r\nGenerating Aspire Manifest for supplied App Host\r\n(?) Done:  Created Aspire Manifest At Path:\r\nC:\\Users\\32512\\source\\repos\\LiveMusicProjectX\\AspireApp.AppHost\\manifest.json\r\n\r\n\u2500\u2500 Selecting Required Components \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\r\n\r\n\u2500\u2500 Handling Aspire Dashboard \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\r\nWould you like to deploy the aspire dashboard and connect the OTLP endpoint? [y/n] (y): y\r\n\r\n\u2500\u2500 Handling Inputs \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\r\n\r\n\u2500\u2500 Handle Value and Parameter Substitution \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\r\n\r\n\u2500\u2500 Handling DAPR Components \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\r\nNo Dapr components selected, skipping Dapr annotations.\r\n\r\n\u2500\u2500 Gathering Information about deployables \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\r\nGathering container details for each project in selected components\r\n(?) Done:  Populated container details cache for project livemusicserver\r\nGathering Tasks Completed - Cache Populated.\r\n\r\n\u2500\u2500 Handling Projects \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\r\nBuilding all project resources, and pushing containers\r\n\r\nExecuting: dotnet publish\r\n\"C:\\Users\\32512\\source\\repos\\LiveMusicProjectX\\AspireApp.AppHost\\../LiveMusicServer/LiveMusicServer.csproj\"\r\n-t:PublishContainer --verbosity \"quiet\" --nologo -r \"linux-x64\" -p:ContainerRepository=\"livemusicserver\"\r\n-p:ContainerImageTag=\"latest\"\r\nMSBUILD : error MSB4166:\r\n\u701b\u612f\u59ad\u9410\u5149\u20ac?\u9225\u6fca\u7e43\u93c3\u2545\u20ac\u20ac\u9351\u6052\u20ac\u509b\ue11c\u9366\u3125\u53e7\u95c2\ue15c\u20ac\u509a\u5f72\u6d60\u30e5\u6e6a\u9225\u6dd0:\\Users\\32512\\AppData\\Local\\Temp\\MSBuildTemp\\\u9225\u6fc5\u8151\u9428\u52ec\u6783\u6d60\u6735\u8151\u93b5\r\n\u60e7\u57cc\u7487\u5a43\u67c7\u6dc7\u2103\u4f05\u951b\u5c7d\u82df\u704f\u55d7\u53fe\u935b\u85c9\u6095\u6d93?MSBuild_*.failure.txt\u9286\u509e\u20ac\u6c33\u7e43\u704f?MSBUILDDEBUGPATH\r\n\u941c\ue21a\ue568\u9359\u6a40\u567a\u7481\u53e5\u8d1f\u934f\u6735\u7cac\u9429\ue1bc\u7d8d\u951b\u5c7d\u5f72\u93c7\u5b58\u657c\u59dd\u3084\u7d85\u7f03\ue1ba\u20ac?\r\nMSBUILD : error MSB4166:\r\nC:\\Users\\32512\\AppData\\Local\\Temp\\MSBuildTemp\\MSBuild_pid-11684_35201d88d2ef435f91e00de445495441.failure.txt:\r\nMSBUILD : error MSB4166: UNHANDLED EXCEPTIONS FROM PROCESS 11684:\r\nMSBUILD : error MSB4166: =====================\r\nMSBUILD : error MSB4166: 2024/8/30 4:04:33\r\nMSBUILD : error MSB4166: System.ArgumentNullException: Value cannot be null. (Parameter 'value')\r\nMSBUILD : error MSB4166:    at System.ArgumentNullException.Throw(String paramName)\r\nMSBUILD : error MSB4166:    at System.IO.BinaryWriter.Write(String value)\r\nMSBUILD : error MSB4166:    at Microsoft.Build.Framework.TelemetryEventArgs.WriteToStream(BinaryWriter writer)\r\nMSBUILD : error MSB4166:    at Microsoft.Build.Shared.LogMessagePacketBase.WriteToStream(ITranslator translator)\r\nMSBUILD : error MSB4166:    at Microsoft.Build.BackEnd.NodeEndpointOutOfProcBase.RunReadLoop(Stream localReadPipe,\r\nStream localWritePipe, ConcurrentQueue`1 localPacketQueue, AutoResetEvent localPacketAvailable, AutoResetEvent\r\nlocalTerminatePacketPump)\r\nMSBUILD : error MSB4166: ===================\r\nMSBUILD : error MSB4166:\r\nMSBUILD : error MSB4166:\r\n\r\n\u93c8\u590a\u5f72\u9422\u3127\u6b91\u5bb8\u30e4\u7d94\u7490\u71bb\u6d47\u93c7\u5b58\u67ca\u9286\u509b\u6e41\u934f\u5ba0\ue1db\u7f01\u55d5\u4fca\u93ad\ue224\u7d1d\u7487\u75af\u7e4d\u741b?`dotnet workload list`\u9286?\r\n(1): Aspirate will now exit.\r\n```\r\n\r\n```\r\nUNHANDLED EXCEPTIONS FROM PROCESS 9072:\r\n=====================\r\n2024/8/30 4:04:55\r\nSystem.ArgumentNullException: Value cannot be null. (Parameter 'value')\r\n   at System.ArgumentNullException.Throw(String paramName)\r\n   at System.IO.BinaryWriter.Write(String value)\r\n   at Microsoft.Build.Framework.TelemetryEventArgs.WriteToStream(BinaryWriter writer)\r\n   at Microsoft.Build.Shared.LogMessagePacketBase.WriteToStream(ITranslator translator)\r\n   at Microsoft.Build.BackEnd.NodeEndpointOutOfProcBase.RunReadLoop(Stream localReadPipe, Stream localWritePipe, ConcurrentQueue`1 localPacketQueue, AutoResetEvent localPacketAvailable, AutoResetEvent localTerminatePacketPump)\r\n===================\r\n```\r\n",
        "createdAt": "2024-08-29T20:16:39Z",
        "updatedAt": "2024-08-29T20:16:39Z",
        "author": {
          "login": "ArsiIksait"
        }
      },
      {
        "body": "@ArsiIksait can you update your .NET SDK? That crash should be fixed by https://github.com/dotnet/msbuild/pull/10464.",
        "createdAt": "2024-08-30T16:11:02Z",
        "updatedAt": "2024-08-30T16:11:02Z",
        "author": {
          "login": "rainersigwald"
        }
      },
      {
        "body": "@rainersigwald How do I update my .NET SDK? Is it from https://dotnet.microsoft.com/zh-cn/download Install .NET SDK 8.0.401? Or do I need to build this project myself?\r\n![image](https://github.com/user-attachments/assets/d8404a57-4a3b-4fc4-83d1-6ea224cd8f03)\r\n",
        "createdAt": "2024-08-30T17:05:54Z",
        "updatedAt": "2024-08-30T17:05:54Z",
        "author": {
          "login": "ArsiIksait"
        }
      },
      {
        "body": "@rainersigwald Thank you, this problem was solved after I updated it, but then a new problem appeared, I don't know what's happening\r\n\r\n```\r\nExecuting: dotnet publish\r\n\"C:\\Users\\32512\\source\\repos\\AspireApp.AppHost\\../AspireApp.ApiService/AspireApp.ApiService.csproj\" -t:PublishContainer\r\n--verbosity \"quiet\" --nologo -r \"linux-x64\" -p:ContainerRepository=\"apiservice\" -p:ContainerImageTag=\"latest\"\r\nC:\\Program Files\\dotnet\\sdk\\8.0.401\\Containers\\build\\Microsoft.NET.Build.Containers.targets(242,5): error MSB4018:\r\n\u9225\u6dd0reateNewImage\u9225\u6fc5\u6362\u9354\u2103\u5270\u6fb6\u6827\u3051\u7490\u30e3\u20ac?[C:\\Users\\32512\\source\\repos\\AspireApp.ApiService\\AspireApp.ApiService.csproj]\r\nC:\\Program Files\\dotnet\\sdk\\8.0.401\\Containers\\build\\Microsoft.NET.Build.Containers.targets(242,5): error MSB4018:\r\nSystem.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.\r\n[C:\\Users\\32512\\source\\repos\\AspireApp.ApiService\\AspireApp.ApiService.csproj]\r\nC:\\Program Files\\dotnet\\sdk\\8.0.401\\Containers\\build\\Microsoft.NET.Build.Containers.targets(242,5): error MSB4018:    at\r\nSystem.Net.Security.SslStream.EnsureFullTlsFrameAsync[TIOAdapter](CancellationToken cancellationToken, Int32\r\nestimatedSize) [C:\\Users\\32512\\source\\repos\\AspireApp.ApiService\\AspireApp.ApiService.csproj]\r\nC:\\Program Files\\dotnet\\sdk\\8.0.401\\Containers\\build\\Microsoft.NET.Build.Containers.targets(242,5): error MSB4018:    at\r\nSystem.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IV\r\nalueTaskSource<TResult>.GetResult(Int16 token)\r\n[C:\\Users\\32512\\source\\repos\\AspireApp.ApiService\\AspireApp.ApiService.csproj]\r\nC:\\Program Files\\dotnet\\sdk\\8.0.401\\Containers\\build\\Microsoft.NET.Build.Containers.targets(242,5): error MSB4018:    at\r\nSystem.Net.Security.SslStream.ReadAsyncInternal[TIOAdapter](Memory`1 buffer, CancellationToken cancellationToken)\r\n[C:\\Users\\32512\\source\\repos\\AspireApp.ApiService\\AspireApp.ApiService.csproj]\r\nC:\\Program Files\\dotnet\\sdk\\8.0.401\\Containers\\build\\Microsoft.NET.Build.Containers.targets(242,5): error MSB4018:    at\r\nSystem.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IV\r\nalueTaskSource<TResult>.GetResult(Int16 token)\r\n[C:\\Users\\32512\\source\\repos\\AspireApp.ApiService\\AspireApp.ApiService.csproj]\r\nC:\\Program Files\\dotnet\\sdk\\8.0.401\\Containers\\build\\Microsoft.NET.Build.Containers.targets(242,5): error MSB4018:    at\r\nSystem.Net.Http.HttpConnection.FillAsync(Boolean async)\r\n[C:\\Users\\32512\\source\\repos\\AspireApp.ApiService\\AspireApp.ApiService.csproj]\r\nC:\\Program Files\\dotnet\\sdk\\8.0.401\\Containers\\build\\Microsoft.NET.Build.Containers.targets(242,5): error MSB4018:    at\r\nSystem.Net.Http.HttpConnection.CopyToContentLengthAsync(Stream destination, Boolean async, UInt64 length, Int32\r\nbufferSize, CancellationToken cancellationToken)\r\n[C:\\Users\\32512\\source\\repos\\AspireApp.ApiService\\AspireApp.ApiService.csproj]\r\nC:\\Program Files\\dotnet\\sdk\\8.0.401\\Containers\\build\\Microsoft.NET.Build.Containers.targets(242,5): error MSB4018:    at\r\nSystem.Net.Http.HttpConnection.ContentLengthReadStream.CompleteCopyToAsync(Task copyTask, CancellationToken\r\ncancellationToken) [C:\\Users\\32512\\source\\repos\\AspireApp.ApiService\\AspireApp.ApiService.csproj]\r\nC:\\Program Files\\dotnet\\sdk\\8.0.401\\Containers\\build\\Microsoft.NET.Build.Containers.targets(242,5): error MSB4018:    at\r\nMicrosoft.NET.Build.Containers.Registry.DownloadBlobAsync(String repository, Descriptor descriptor, CancellationToken\r\ncancellationToken) in /_/src/Containers/Microsoft.NET.Build.Containers/Registry/Registry.cs:line 337\r\n[C:\\Users\\32512\\source\\repos\\AspireApp.ApiService\\AspireApp.ApiService.csproj]\r\nC:\\Program Files\\dotnet\\sdk\\8.0.401\\Containers\\build\\Microsoft.NET.Build.Containers.targets(242,5): error MSB4018:    at\r\nMicrosoft.NET.Build.Containers.DockerCli.WriteImageToStreamAsync(BuiltImage image, SourceImageReference sourceReference,\r\nDestinationImageReference destinationReference, Stream imageStream, CancellationToken cancellationToken) in\r\n/_/src/Containers/Microsoft.NET.Build.Containers/LocalDaemons/DockerCli.cs:line 282\r\n[C:\\Users\\32512\\source\\repos\\AspireApp.ApiService\\AspireApp.ApiService.csproj]\r\nC:\\Program Files\\dotnet\\sdk\\8.0.401\\Containers\\build\\Microsoft.NET.Build.Containers.targets(242,5): error MSB4018:    at\r\nMicrosoft.NET.Build.Containers.DockerCli.LoadAsync(BuiltImage image, SourceImageReference sourceReference,\r\nDestinationImageReference destinationReference, CancellationToken cancellationToken) in\r\n/_/src/Containers/Microsoft.NET.Build.Containers/LocalDaemons/DockerCli.cs:line 104\r\n[C:\\Users\\32512\\source\\repos\\AspireApp.ApiService\\AspireApp.ApiService.csproj]\r\nC:\\Program Files\\dotnet\\sdk\\8.0.401\\Containers\\build\\Microsoft.NET.Build.Containers.targets(242,5): error MSB4018:    at\r\nMicrosoft.NET.Build.Containers.Tasks.CreateNewImage.PushToLocalRegistryAsync(BuiltImage builtImage, SourceImageReference\r\nsourceImageReference, DestinationImageReference destinationImageReference, Telemetry telemetry, CancellationToken\r\ncancellationToken) in /_/src/Containers/Microsoft.NET.Build.Containers/Tasks/CreateNewImage.cs:line 218\r\n[C:\\Users\\32512\\source\\repos\\AspireApp.ApiService\\AspireApp.ApiService.csproj]\r\nC:\\Program Files\\dotnet\\sdk\\8.0.401\\Containers\\build\\Microsoft.NET.Build.Containers.targets(242,5): error MSB4018:    at\r\nMicrosoft.NET.Build.Containers.Tasks.CreateNewImage.ExecuteAsync(CancellationToken cancellationToken) in\r\n/_/src/Containers/Microsoft.NET.Build.Containers/Tasks/CreateNewImage.cs:line 182\r\n[C:\\Users\\32512\\source\\repos\\AspireApp.ApiService\\AspireApp.ApiService.csproj]\r\nC:\\Program Files\\dotnet\\sdk\\8.0.401\\Containers\\build\\Microsoft.NET.Build.Containers.targets(242,5): error MSB4018:    at\r\nMicrosoft.NET.Build.Containers.Tasks.CreateNewImage.Execute() in\r\n/_/src/Containers/Microsoft.NET.Build.Containers/Tasks/CreateNewImage.cs:line 36\r\n[C:\\Users\\32512\\source\\repos\\AspireApp.ApiService\\AspireApp.ApiService.csproj]\r\nC:\\Program Files\\dotnet\\sdk\\8.0.401\\Containers\\build\\Microsoft.NET.Build.Containers.targets(242,5): error MSB4018:    at\r\nMicrosoft.Build.BackEnd.TaskExecutionHost.Execute()\r\n[C:\\Users\\32512\\source\\repos\\AspireApp.ApiService\\AspireApp.ApiService.csproj]\r\nC:\\Program Files\\dotnet\\sdk\\8.0.401\\Containers\\build\\Microsoft.NET.Build.Containers.targets(242,5): error MSB4018:    at\r\nMicrosoft.Build.BackEnd.TaskBuilder.ExecuteInstantiatedTask(TaskExecutionHost taskExecutionHost, TaskLoggingContext\r\ntaskLoggingContext, TaskHost taskHost, ItemBucket bucket, TaskExecutionMode howToExecuteTask)\r\n[C:\\Users\\32512\\source\\repos\\AspireApp.ApiService\\AspireApp.ApiService.csproj]\r\n\r\n\u93c8\u590a\u5f72\u9422\u3127\u6b91\u5bb8\u30e4\u7d94\u7490\u71bb\u6d47\u93c7\u5b58\u67ca\u9286\u509b\u6e41\u934f\u5ba0\ue1db\u7f01\u55d5\u4fca\u93ad\ue224\u7d1d\u7487\u75af\u7e4d\u741b?`dotnet workload list`\u9286?\r\n(1): Aspirate will now exit.\r\n\r\n```",
        "createdAt": "2024-08-30T17:28:52Z",
        "updatedAt": "2024-08-30T17:28:52Z",
        "author": {
          "login": "ArsiIksait"
        }
      }
    ]
  }
}