{
  "number": 3440,
  "title": "error CS0101: when moving to Directory.Build.props",
  "body": "When building; I get the warning to following warning:\r\n\r\n> C:\\Program Files\\dotnet\\sdk\\2.1.201\\Microsoft.Common.CurrentVersion.targets(818,5): warning MSB3539: The value of the property \"BaseIntermediateOutputPath\" was modified after it was used by MSBuild which can lead to unexpected build results. Tools such as NuGet will write outputs to the path specified by the \"MSBuildProjectExtensionsPath\" instead. To set this property, you must do so before\r\n> Microsoft.Common.props is imported, for example by using Directory.Build.props.  For more information, please visit https://go.microsoft.com/fwlink/?linkid=869650\r\n\r\nI had the following construction:\r\nProject file:\r\n```\r\n<Project Sdk=\"Microsoft.NET.Sdk.Web\">\r\n  <Import Project=\"../config/configuration.props\" />\r\n[snip]\r\n</Project>\r\n```\r\nconfiguration.props:\r\n```\r\n<Project>\r\n  <PropertyGroup>\r\n    <Configurations>Debug;Release</Configurations>\r\n    <Platforms>AnyCPU</Platforms>\r\n    <AppendTargetFrameworkToOutputPath>false</AppendTargetFrameworkToOutputPath>\r\n    <BaseIntermediateOutputPath>..\\..\\artifacts\\obj\\</BaseIntermediateOutputPath>\r\n    <OutputPath Condition=\"'$(Configuration)' == 'Release'\">..\\..\\artifacts\\build\\</OutputPath>\r\n  </PropertyGroup>\r\n</Project>\r\n```\r\nI had created a configuration.props to unify the same properties across a couple of projects within the solution. As the warning suggests; I created a _Directory.Build.props_ on solution-level; remove the line from the _configuration.props_ and added it to a newly created _Directory.Build.props_:\r\n```\r\n<Project>\r\n    <PropertyGroup>\r\n      <BaseIntermediateOutputPath>..\\..\\artifacts\\obj\\</BaseIntermediateOutputPath>\r\n    </PropertyGroup>\r\n</Project>\r\n```\r\n\r\nI do see some files appearing in the artifacts\\obj folder; but:\r\n\r\n### Actual behavior\r\n```\r\n{Project1} -> r\\artifacts\\build\\win10-x64\\{Project1}.dll\r\nobj\\Debug\\{Project2}.Program.cs(3,7): error CS0101: The namespace '<global namespace>'\r\nalready contains a definition for 'AutoGeneratedProgram' [\\src\\{Project2}\\{Project2}.csproj]\r\n```\r\n### Expected  behavior\r\nA working build.\r\n\r\nI even tried\r\n```\r\n<BaseIntermediateOutputPath>..\\..\\artifacts\\obj\\$(MSBuildProjectName)</BaseIntermediateOutputPath>\r\n```\r\nbut, this also doesn't work.",
  "state": "CLOSED",
  "createdAt": "2018-06-21T14:51:03Z",
  "updatedAt": "2024-02-21T17:12:35Z",
  "closedAt": "2018-06-25T16:43:01Z",
  "author": {
    "login": "Duracell1989"
  },
  "labels": [
    "triaged"
  ],
  "assignees": {
    "nodes": []
  },
  "milestone": null,
  "comments": {
    "nodes": [
      {
        "body": "When you change your `BaseIntermediateOutputPath`, be sure to delete the default `obj` folder in your project file since the generated .cs files in there will conflict with the ones in the new location.",
        "createdAt": "2018-06-23T00:11:45Z",
        "updatedAt": "2018-06-23T00:11:45Z",
        "author": {
          "login": "dasMulli"
        }
      },
      {
        "body": "That's it!",
        "createdAt": "2018-06-25T16:43:01Z",
        "updatedAt": "2018-06-25T16:43:01Z",
        "author": {
          "login": "Duracell1989"
        }
      }
    ]
  }
}