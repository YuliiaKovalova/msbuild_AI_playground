{
  "number": 2153,
  "title": "Bug - Exception when running dotnet publish within a \u201cbuild\u201d Docker Container",
  "body": "(Talked about this with David Kean, he told me to submit this bug)\r\nI think there's a bug in a MSBuild environment, using dotnet publish, when running within a \u201cbuild\u201d Docker Container.\r\nBuilding locally on the PC, either with VS 2017 or with the dotnet CLI on local windows works ok, but when building within a \"build container\" using a CI docker-compose.ci.build.yml we\u2019re getting this issue which is a hard stopper.\r\n\u00a0\r\nHere\u2019s the issue:\r\nWhen running \u00a0\"Docker-compose -f docker-compose.ci.build.yml up\", as we explain here: \r\nhttps://github.com/dotnet-architecture/eShopOnContainers/wiki/03.-Setting-the-eShopOnContainers-solution-up-in-a-Windows-CLI-environment-(dotnet-CLI,-Docker-CLI-and-VS-Code)\r\nThis is the docker-compose.ci.build.yml we\u2019re executing when building the bits within the \u201cbuild\u201d container:\r\nhttps://github.com/dotnet-architecture/eShopOnContainers/blob/dev/docker-compose.ci.build.yml \r\nAnd this is the command using the dotnet CLI to build the bits:\r\ncommand: /bin/bash -c \"pushd ./src/Web/WebSPA && npm rebuild node-sass && popd && dotnet restore ./eShopOnContainers-ServicesAndWebApps.sln && dotnet publish ./eShopOnContainers-ServicesAndWebApps.sln -c Release -o ./obj/Docker/publish\"\r\n\u00a0\r\nI'm getting an error, eventually, from the build container, when it is running \u201cdotnet publish\u201d:\r\nerror MSB4017: The build stopped unexpectedly because of an unexpected logger failure. System.IO.IOException The process cannot access the file because it is being used by another process.\r\nHowever, when building from Visual Studio 2017.2, I have no issues and it builds and deploys right.\r\nLooks like a strange concurrency issue within the build container. Any idea on how to solve this or any workaround for it?\r\n\u00a0\r\nBut the interesting thing is that it is happening with a Logger used by MSBuild? : Microsoft.Build.Exceptions.InternalLoggerException\r\n\u00a0\r\nThis exception is used to wrap an unhandled exception from a logger. This exception aborts the build, and it can only be thrown by the MSBuild engine.\r\n\u00a0\r\nMicrosoft.Build.Exceptions.InternalLoggerException: The build stopped unexpectedly because of an unexpected logger failure. ---> System.IO.IOException: The process cannot access the file because it is being used by another process.\r\n\u00a0\r\n\u00a0\r\nIn any case, since the issue can be reproduced with eShopOnContainer in any machine with Docker for Windows and .NET Core 1.1.2 installed, who in the MSBUILD team should repro this issue so you try to identify the issue or bug?\r\n\u00a0\r\nHere's the full output:\r\nPS D:\\GITREPOS\\eShopOnContainers-dev> Docker-compose -f docker-compose.ci.build.yml up\r\n\r\nPulling ci-build (microsoft/aspnetcore-build:1.1.2)...\r\n1.1.2: Pulling from microsoft/aspnetcore-build\r\n10a267c67f42: Already exists\r\nfb5937da9414: Pull complete\r\n9021b2326a1e: Pull complete\r\n5df21d865eab: Pull complete\r\ne4db626d1d21: Pull complete\r\n87b3f796757a: Pull complete\r\n629d4f39b75b: Pull complete\r\n21c29d072c6e: Pull complete\r\n39d6d7136f1b: Pull complete\r\n74021b8a9867: Pull complete\r\nDigest: sha256:9251d6953ca2fccfee1968e000c78d90e0ce629821246166b2d353fd884d62bf\r\nStatus: Downloaded newer image for microsoft/aspnetcore-build:1.1.2\r\nCreating eshoponcontainersdev_ci-build_1\r\nAttaching to eshoponcontainersdev_ci-build_1\r\nci-build_1\u00a0 | /src/src/Web/WebSPA /src\r\nci-build_1\u00a0 |\r\nci-build_1\u00a0 | > node-sass@4.5.3 install /src/src/Web/WebSPA/node_modules/node-sass\r\nci-build_1\u00a0 | > node scripts/install.js\r\nci-build_1\u00a0 |\r\nci-build_1\u00a0 | Downloading binary from https://github.com/sass/node-sass/releases/download/v4.5.3/linux-x64-48_binding.node\r\nci-build_1\u00a0 | Download complete\r\nci-build_1\u00a0 | Binary saved to /src/src/Web/WebSPA/node_modules/node-sass/vendor/linux-x64-48/binding.node\r\nci-build_1\u00a0 | Caching binary to /root/.npm/node-sass/4.5.3/linux-x64-48_binding.node\r\nci-build_1\u00a0 |\r\nci-build_1\u00a0 | > node-sass@4.5.3 postinstall /src/src/Web/WebSPA/node_modules/node-sass\r\nci-build_1\u00a0 | > node scripts/build.js\r\nci-build_1\u00a0 |\r\nci-build_1\u00a0 | Binary found at /src/src/Web/WebSPA/node_modules/node-sass/vendor/linux-x64-48/binding.node\r\nci-build_1\u00a0 | Testing binary\r\nci-build_1\u00a0 | Binary is fine\r\nci-build_1\u00a0 | node-sass@4.5.3 /src/src/Web/WebSPA/node_modules/node-sass\r\nci-build_1\u00a0 | /src\r\nci-build_1\u00a0 | /src/docker-compose.dcproj : error MSB4019: The imported project \"/usr/share/dotnet/sdk/1.0.4/Sdks/Microsoft.Docker.Sdk/Sdk/Sdk.props\" was not found. Confirm that the path in the <Import> declarat\r\nion is correct, and that the file exists on disk.\r\nci-build_1\u00a0 |\u00a0\u00a0 Restoring packages for /src/src/BuildingBlocks/EventBus/EventBus/EventBus.csproj...\r\nci-build_1\u00a0 |\u00a0\u00a0 Restoring packages for /src/src/BuildingBlocks/EventBus/EventBus.Tests/EventBus.Tests.csproj...\r\nci-build_1\u00a0 |\u00a0\u00a0 Restoring packages for /src/src/BuildingBlocks/EventBus/EventBusRabbitMQ/EventBusRabbitMQ.csproj...\r\nci-build_1\u00a0 |\u00a0\u00a0 Installing System.Runtime.Serialization.Formatters 4.3.0.\r\nci-build_1\u00a0 |\u00a0\u00a0 Installing Newtonsoft.Json 10.0.2.\r\nci-build_1\u00a0 |\u00a0\u00a0 Installing RabbitMQ.Client 4.1.3.\r\nci-build_1\u00a0 |\u00a0\u00a0 Installing Polly 5.1.0.\r\nci-build_1\u00a0 |\u00a0\u00a0 Installing System.ValueTuple 4.3.1.\r\nci-build_1\u00a0 |\u00a0\u00a0 Generating MSBuild file /src/src/BuildingBlocks/EventBus/EventBus/obj/EventBus.csproj.nuget.g.props.\r\nci-build_1\u00a0 |\u00a0\u00a0 Generating MSBuild file /src/src/BuildingBlocks/EventBus/EventBusRabbitMQ/obj/EventBusRabbitMQ.csproj.nuget.g.props.\r\nci-build_1\u00a0 |\u00a0\u00a0 Writing lock file to disk. Path: /src/src/BuildingBlocks/EventBus/EventBus/obj/project.assets.json\r\nci-build_1\u00a0 |\u00a0\u00a0 Writing lock file to disk. Path: /src/src/BuildingBlocks/EventBus/EventBusRabbitMQ/obj/project.assets.json\r\nci-build_1\u00a0 |\u00a0\u00a0 Restore completed in 2.7 sec for /src/src/BuildingBlocks/EventBus/EventBus/EventBus.csproj.\r\nci-build_1\u00a0 |\u00a0\u00a0 Restore completed in 2.7 sec for /src/src/BuildingBlocks/EventBus/EventBusRabbitMQ/EventBusRabbitMQ.csproj.\r\nci-build_1\u00a0 |\u00a0\u00a0 Restoring packages for /src/src/BuildingBlocks/EventBus/IntegrationEventLogEF/IntegrationEventLogEF.csproj...\r\nci-build_1\u00a0 |\u00a0\u00a0 Restoring packages for /src/src/BuildingBlocks/HealthChecks/src/Microsoft.AspNetCore.HealthChecks/Microsoft.AspNetCore.HealthChecks.csproj...\r\nci-build_1\u00a0 |\u00a0\u00a0 Installing System.Diagnostics.TextWriterTraceListener 4.0.0.\r\nci-build_1\u00a0 |\u00a0\u00a0 Installing System.ComponentModel.EventBasedAsync 4.0.11.\r\nci-build_1\u00a0 |\u00a0\u00a0 Installing System.Diagnostics.TraceSource 4.0.0.\r\nci-build_1\u00a0 |\u00a0\u00a0 Installing System.Xml.XPath.XmlDocument 4.0.1.\r\nci-build_1\u00a0 |\u00a0\u00a0 Installing xunit.abstractions 2.0.1.\r\nci-build_1\u00a0 |\u00a0\u00a0 Installing Microsoft.TestPlatform.ObjectModel 15.0.0.\r\nci-build_1\u00a0 |\u00a0\u00a0 Installing xunit.extensibility.core 2.2.0.\r\nci-build_1\u00a0 |\u00a0\u00a0 Installing xunit.extensibility.execution 2.2.0.\r\nci-build_1\u00a0 |\u00a0\u00a0 Installing Microsoft.TestPlatform.TestHost 15.0.0.\r\nci-build_1\u00a0 |\u00a0\u00a0 Installing xunit.core 2.2.0.\r\nci-build_1\u00a0 |\u00a0\u00a0 Installing xunit.assert 2.2.0.\r\nci-build_1\u00a0 |\u00a0\u00a0 Installing Microsoft.DotNet.PlatformAbstractions 1.1.0.\r\nci-build_1\u00a0 |\u00a0\u00a0 Installing Microsoft.Extensions.DependencyModel 1.1.0.\r\nci-build_1\u00a0 |\u00a0\u00a0 Installing Microsoft.TestPlatform.ObjectModel 11.0.0.\r\nci-build_1\u00a0 |\u00a0\u00a0 Installing Microsoft.NET.Test.Sdk 15.0.0.\r\nci-build_1\u00a0 |\u00a0\u00a0 Installing xunit 2.2.0.\r\nci-build_1\u00a0 |\u00a0\u00a0 Installing xunit.runner.visualstudio 2.2.0.\r\nci-build_1\u00a0 |\u00a0\u00a0 Generating MSBuild file /src/src/BuildingBlocks/HealthChecks/src/Microsoft.AspNetCore.HealthChecks/obj/Microsoft.AspNetCore.HealthChecks.csproj.nuget.g.props.\r\nci-build_1\u00a0 |\u00a0\u00a0 Writing lock file to disk. Path: /src/src/BuildingBlocks/HealthChecks/src/Microsoft.AspNetCore.HealthChecks/obj/project.assets.json\r\nci-build_1\u00a0 |\u00a0\u00a0 Restore completed in 594.82 ms for /src/src/BuildingBlocks/HealthChecks/src/Microsoft.AspNetCore.HealthChecks/Microsoft.AspNetCore.HealthChecks.csproj.\r\nci-build_1\u00a0 |\u00a0\u00a0 Restoring packages for /src/src/BuildingBlocks/HealthChecks/src/Microsoft.Extensions.HealthChecks.SqlServer/Microsoft.Extensions.HealthChecks.SqlServer.csproj...\r\nci-build_1\u00a0 |\u00a0\u00a0 Generating MSBuild file /src/src/BuildingBlocks/HealthChecks/src/Microsoft.Extensions.HealthChecks.SqlServer/obj/Microsoft.Extensions.HealthChecks.SqlServer.csproj.nuget.g.props.\r\nci-build_1\u00a0 |\u00a0\u00a0 Writing lock file to disk. Path: /src/src/BuildingBlocks/HealthChecks/src/Microsoft.Extensions.HealthChecks.SqlServer/obj/project.assets.json\r\nci-build_1\u00a0 |\u00a0\u00a0 Restore completed in 266.12 ms for /src/src/BuildingBlocks/HealthChecks/src/Microsoft.Extensions.HealthChecks.SqlServer/Microsoft.Extensions.HealthChecks.SqlServer.csproj.\r\nci-build_1\u00a0 |\u00a0\u00a0 Restoring packages for /src/src/BuildingBlocks/HealthChecks/src/Microsoft.Extensions.HealthChecks/Microsoft.Extensions.HealthChecks.csproj...\r\nci-build_1\u00a0 |\u00a0\u00a0 Generating MSBuild file /src/src/BuildingBlocks/EventBus/EventBus.Tests/obj/EventBus.Tests.csproj.nuget.g.props.\r\nci-build_1\u00a0 |\u00a0\u00a0 Generating MSBuild file /src/src/BuildingBlocks/EventBus/EventBus.Tests/obj/EventBus.Tests.csproj.nuget.g.targets.\r\nci-build_1\u00a0 |\u00a0\u00a0 Writing lock file to disk. Path: /src/src/BuildingBlocks/EventBus/EventBus.Tests/obj/project.assets.json\r\nci-build_1\u00a0 |\u00a0\u00a0 Restore completed in 4.23 sec for /src/src/BuildingBlocks/EventBus/EventBus.Tests/EventBus.Tests.csproj.\r\nci-build_1\u00a0 |\u00a0\u00a0 Restoring packages for /src/src/BuildingBlocks/Resilience/Resilience.Http/Resilience.Http.csproj...\r\nci-build_1\u00a0 |\u00a0\u00a0 Generating MSBuild file /src/src/BuildingBlocks/HealthChecks/src/Microsoft.Extensions.HealthChecks/obj/Microsoft.Extensions.HealthChecks.csproj.nuget.g.props.\r\nci-build_1\u00a0 |\u00a0\u00a0 Writing lock file to disk. Path: /src/src/BuildingBlocks/HealthChecks/src/Microsoft.Extensions.HealthChecks/obj/project.assets.json\r\nci-build_1\u00a0 |\u00a0\u00a0 Restore completed in 195.01 ms for /src/src/BuildingBlocks/HealthChecks/src/Microsoft.Extensions.HealthChecks/Microsoft.Extensions.HealthChecks.csproj.\r\nci-build_1\u00a0 |\u00a0\u00a0 Restoring packages for /src/src/Services/Basket/Basket.API/Basket.API.csproj...\r\nci-build_1\u00a0 |\u00a0\u00a0 Generating MSBuild file /src/src/BuildingBlocks/Resilience/Resilience.Http/obj/Resilience.Http.csproj.nuget.g.props.\r\nci-build_1\u00a0 |\u00a0\u00a0 Writing lock file to disk. Path: /src/src/BuildingBlocks/Resilience/Resilience.Http/obj/project.assets.json\r\nci-build_1\u00a0 |\u00a0\u00a0 Restore completed in 204.96 ms for /src/src/BuildingBlocks/Resilience/Resilience.Http/Resilience.Http.csproj.\r\nci-build_1\u00a0 |\u00a0\u00a0 Restoring packages for /src/src/Services/Catalog/Catalog.API/Catalog.API.csproj...\r\nci-build_1\u00a0 |\u00a0\u00a0 Installing Microsoft.EntityFrameworkCore.SqlServer.Design 1.1.2.\r\nci-build_1\u00a0 |\u00a0\u00a0 Generating MSBuild file /src/src/BuildingBlocks/EventBus/IntegrationEventLogEF/obj/IntegrationEventLogEF.csproj.nuget.g.props.\r\nci-build_1\u00a0 |\u00a0\u00a0 Writing lock file to disk. Path: /src/src/BuildingBlocks/EventBus/IntegrationEventLogEF/obj/project.assets.json\r\nci-build_1\u00a0 |\u00a0\u00a0 Restore completed in 3.87 sec for /src/src/BuildingBlocks/EventBus/IntegrationEventLogEF/IntegrationEventLogEF.csproj.\r\nci-build_1\u00a0 |\u00a0\u00a0 Restoring packages for /src/src/Services/Identity/Identity.API/Identity.API.csproj...\r\nci-build_1\u00a0 |\u00a0\u00a0 Installing System.Runtime.Handles 4.0.0.\r\nci-build_1\u00a0 |\u00a0\u00a0 Installing System.Threading.Overlapped 4.0.0.\r\nci-build_1\u00a0 |\u00a0\u00a0 Installing System.Reflection.Primitives 4.0.0.\r\nci-build_1\u00a0 |\u00a0\u00a0 Installing System.Runtime.InteropServices 4.0.20.\r\nci-build_1\u00a0 |\u00a0\u00a0 Installing System.IO.FileSystem 4.0.0.\r\nci-build_1\u00a0 |\u00a0\u00a0 Installing System.Text.Encoding.Extensions 4.0.10.\r\nci-build_1\u00a0 |\u00a0\u00a0 Installing System.Text.RegularExpressions 4.0.10.\r\nci-build_1\u00a0 |\u00a0\u00a0 Installing System.Threading.Tasks 4.0.10.\r\nci-build_1\u00a0 |\u00a0\u00a0 Installing System.IO.FileSystem.Primitives 4.0.0.\r\nci-build_1\u00a0 |\u00a0\u00a0 Installing System.Text.Encoding 4.0.10.\r\nci-build_1\u00a0 |\u00a0\u00a0 Installing System.Reflection 4.0.0.\r\nci-build_1\u00a0 |\u00a0\u00a0 Installing System.Private.Uri 4.0.0.\r\nci-build_1\u00a0 |\u00a0\u00a0 Installing System.Threading.Tasks 4.0.0.\r\nci-build_1\u00a0 |\u00a0\u00a0 Installing System.Text.Encoding 4.0.0.\r\nci-build_1\u00a0 |\u00a0\u00a0 Installing StackExchange.Redis 1.2.3.\r\nci-build_1\u00a0 |\u00a0\u00a0 Installing Microsoft.Extensions.Localization.Abstractions 1.0.0.\r\nci-build_1\u00a0 |\u00a0\u00a0 Installing IdentityServer4.AccessTokenValidation 1.2.0.\r\nci-build_1\u00a0 |\u00a0\u00a0 Installing Microsoft.AspNetCore.WebUtilities 1.0.0.\r\nci-build_1\u00a0 |\u00a0\u00a0 Installing Swashbuckle.AspNetCore 1.0.0.\r\nci-build_1\u00a0 |\u00a0\u00a0 Installing IdentityModel.AspNetCore.ScopeValidation 1.1.0.\r\nci-build_1\u00a0 |\u00a0\u00a0 Installing System.IdentityModel.Tokens.Jwt 5.1.3.\r\nci-build_1\u00a0 |\u00a0\u00a0 Installing Microsoft.AspNetCore.Authentication.JwtBearer 1.1.1.\r\nci-build_1\u00a0 |\u00a0\u00a0 Installing IdentityModel.AspNetCore.OAuth2Introspection 2.1.0.\r\nci-build_1\u00a0 |\u00a0\u00a0 Installing IdentityModel 2.8.0.\r\nci-build_1\u00a0 |\u00a0\u00a0 Installing Swashbuckle.AspNetCore.Swagger 1.0.0.\r\nci-build_1\u00a0 |\u00a0\u00a0 Installing Swashbuckle.AspNetCore.SwaggerGen 1.0.0.\r\nci-build_1\u00a0 |\u00a0\u00a0 Installing Swashbuckle.AspNetCore.SwaggerUI 1.0.0.\r\nci-build_1\u00a0 |\u00a0\u00a0 Installing Microsoft.IdentityModel.Tokens 5.1.3.\r\nci-build_1\u00a0 |\u00a0\u00a0 Installing Microsoft.AspNetCore.Authentication 1.1.1.\r\nci-build_1\u00a0 |\u00a0\u00a0 Installing System.ValueTuple 4.3.0.\r\nci-build_1\u00a0 |\u00a0\u00a0 Installing System.Net.Http 4.3.1.\r\nci-build_1\u00a0 |\u00a0\u00a0 Installing Microsoft.AspNetCore.Mvc.Formatters.Json 1.0.0.\r\nci-build_1\u00a0 |\u00a0\u00a0 Installing Microsoft.AspNetCore.Mvc.Core 1.0.0.\r\nci-build_1\u00a0 |\u00a0\u00a0 Installing Microsoft.AspNetCore.Mvc.ApiExplorer 1.0.0.\r\nci-build_1\u00a0 |\u00a0\u00a0 Installing Microsoft.AspNetCore.Mvc.DataAnnotations 1.0.0.\r\nci-build_1\u00a0 |\u00a0\u00a0 Installing Microsoft.Extensions.FileProviders.Embedded 1.0.0.\r\nci-build_1\u00a0 |\u00a0\u00a0 Installing Microsoft.AspNetCore.StaticFiles 1.0.0.\r\nci-build_1\u00a0 |\u00a0\u00a0 Installing Microsoft.AspNetCore.Routing 1.0.0.\r\nci-build_1\u00a0 |\u00a0\u00a0 Installing System.Xml.XPath 4.0.0.\r\nci-build_1\u00a0 |\u00a0\u00a0 Installing Microsoft.IdentityModel.Logging 1.1.3.\r\nci-build_1\u00a0 |\u00a0\u00a0 Installing Microsoft.Extensions.WebEncoders 1.1.1.\r\nci-build_1\u00a0 |\u00a0\u00a0 Installing Microsoft.AspNetCore.Http.Extensions 1.1.1.\r\nci-build_1\u00a0 |\u00a0\u00a0 Installing Microsoft.AspNetCore.Http 1.1.1.\r\nci-build_1\u00a0 |\u00a0\u00a0 Installing Microsoft.AspNetCore.DataProtection 1.1.1.\r\nci-build_1\u00a0 |\u00a0\u00a0 Installing Microsoft.AspNetCore.Mvc.Abstractions 1.0.0.\r\nci-build_1\u00a0 |\u00a0\u00a0 Installing Microsoft.AspNetCore.Authorization 1.0.0.\r\nci-build_1\u00a0 |\u00a0\u00a0 Installing Microsoft.AspNetCore.Http 1.0.0.\r\nci-build_1\u00a0 |\u00a0\u00a0 Installing Microsoft.Extensions.Localization 1.0.0.\r\nci-build_1\u00a0 |\u00a0\u00a0 Installing Microsoft.Extensions.WebEncoders 1.0.0.\r\nci-build_1\u00a0 |\u00a0\u00a0 Installing Microsoft.AspNetCore.Routing.Abstractions 1.0.0.\r\nci-build_1\u00a0 |\u00a0\u00a0 Installing Microsoft.Extensions.Options 1.0.0.\r\nci-build_1\u00a0 |\u00a0\u00a0 Installing Microsoft.Extensions.ObjectPool 1.0.0.\r\nci-build_1\u00a0 |\u00a0\u00a0 Installing System.Collections 4.0.10.\r\nci-build_1\u00a0 |\u00a0\u00a0 Installing System.Diagnostics.Debug 4.0.10.\r\nci-build_1\u00a0 |\u00a0\u00a0 Installing System.Globalization 4.0.10.\r\nci-build_1\u00a0 |\u00a0\u00a0 Installing System.Runtime.Extensions 4.0.10.\r\nci-build_1\u00a0 |\u00a0\u00a0 Installing System.IO 4.0.10.\r\nci-build_1\u00a0 |\u00a0\u00a0 Installing System.Runtime 4.0.20.\r\nci-build_1\u00a0 |\u00a0\u00a0 Installing System.Resources.ResourceManager 4.0.0.\r\nci-build_1\u00a0 |\u00a0\u00a0 Installing System.Xml.ReaderWriter 4.0.10.\r\nci-build_1\u00a0 |\u00a0\u00a0 Installing Microsoft.Net.Http.Headers 1.1.1.\r\nci-build_1\u00a0 |\u00a0\u00a0 Installing Microsoft.AspNetCore.WebUtilities 1.1.1.\r\nci-build_1\u00a0 |\u00a0\u00a0 Installing Microsoft.Extensions.ObjectPool 1.1.0.\r\nci-build_1\u00a0 |\u00a0\u00a0 Installing Microsoft.AspNetCore.DataProtection.Abstractions 1.1.1.\r\nci-build_1\u00a0 |\u00a0\u00a0 Installing Microsoft.AspNetCore.Cryptography.Internal 1.1.1.\r\nci-build_1\u00a0 |\u00a0\u00a0 Installing System.Threading 4.0.10.\r\nci-build_1\u00a0 |\u00a0\u00a0 Generating MSBuild file /src/src/Services/Basket/Basket.API/obj/Basket.API.csproj.nuget.g.props.\r\nci-build_1\u00a0 |\u00a0\u00a0 Writing lock file to disk. Path: /src/src/Services/Basket/Basket.API/obj/project.assets.json\r\nci-build_1\u00a0 |\u00a0\u00a0 Restore completed in 7.5 sec for /src/src/Services/Basket/Basket.API/Basket.API.csproj.\r\nci-build_1\u00a0 |\u00a0\u00a0 Restoring packages for /src/src/Services/Ordering/Ordering.API/Ordering.API.csproj...\r\nci-build_1\u00a0 |\u00a0\u00a0 Generating MSBuild file /src/src/Services/Catalog/Catalog.API/obj/Catalog.API.csproj.nuget.g.props.\r\nci-build_1\u00a0 |\u00a0\u00a0 Generating MSBuild file /src/src/Services/Catalog/Catalog.API/obj/Catalog.API.csproj.nuget.g.targets.\r\nci-build_1\u00a0 |\u00a0\u00a0 Writing lock file to disk. Path: /src/src/Services/Catalog/Catalog.API/obj/project.assets.json\r\nci-build_1\u00a0 |\u00a0\u00a0 Restore completed in 7.72 sec for /src/src/Services/Catalog/Catalog.API/Catalog.API.csproj.\r\nci-build_1\u00a0 |\u00a0\u00a0 Restoring packages for /src/src/Services/Ordering/Ordering.Domain/Ordering.Domain.csproj...\r\nci-build_1\u00a0 |\u00a0\u00a0 Installing MediatR.Extensions.Microsoft.DependencyInjection 2.0.0.\r\nci-build_1\u00a0 |\u00a0\u00a0 Installing MediatR 3.0.1.\r\nci-build_1\u00a0 |\u00a0\u00a0 Generating MSBuild file /src/src/Services/Ordering/Ordering.Domain/obj/Ordering.Domain.csproj.nuget.g.props.\r\nci-build_1\u00a0 |\u00a0\u00a0 Writing lock file to disk. Path: /src/src/Services/Ordering/Ordering.Domain/obj/project.assets.json\r\nci-build_1\u00a0 |\u00a0\u00a0 Restore completed in 747.66 ms for /src/src/Services/Ordering/Ordering.Domain/Ordering.Domain.csproj.\r\nci-build_1\u00a0 |\u00a0\u00a0 Restoring packages for /src/src/Services/Ordering/Ordering.Infrastructure/Ordering.Infrastructure.csproj...\r\nci-build_1\u00a0 |\u00a0\u00a0 Generating MSBuild file /src/src/Services/Ordering/Ordering.Infrastructure/obj/Ordering.Infrastructure.csproj.nuget.g.props.\r\nci-build_1\u00a0 |\u00a0\u00a0 Writing lock file to disk. Path: /src/src/Services/Ordering/Ordering.Infrastructure/obj/project.assets.json\r\nci-build_1\u00a0 |\u00a0\u00a0 Restore completed in 561.51 ms for /src/src/Services/Ordering/Ordering.Infrastructure/Ordering.Infrastructure.csproj.\r\nci-build_1\u00a0 |\u00a0\u00a0 Restoring packages for /src/src/Web/WebMVC/WebMVC.csproj...\r\nci-build_1\u00a0 |\u00a0\u00a0 Installing runtime.win7-x86.runtime.native.System.Data.SqlClient.sni 4.0.1.\r\nci-build_1\u00a0 |\u00a0\u00a0 Installing runtime.win7-x64.runtime.native.System.Data.SqlClient.sni 4.0.1.\r\nci-build_1\u00a0 |\u00a0\u00a0 Installing runtime.native.System.Data.SqlClient.sni 4.0.0.\r\nci-build_1\u00a0 |\u00a0\u00a0 Installing System.IO.Pipes 4.0.0.\r\nci-build_1\u00a0 |\u00a0\u00a0 Installing System.Data.SqlClient 4.1.0.\r\nci-build_1\u00a0 |\u00a0\u00a0 Installing FluentValidation 6.4.0.\r\nci-build_1\u00a0 |\u00a0\u00a0 Installing Autofac 4.0.0.\r\nci-build_1\u00a0 |\u00a0\u00a0 Installing Dapper 1.50.2.\r\nci-build_1\u00a0 |\u00a0\u00a0 Installing FluentValidation.AspNetCore 6.4.0.\r\nci-build_1\u00a0 |\u00a0\u00a0 Installing Autofac.Extensions.DependencyInjection 4.1.0.\r\nci-build_1\u00a0 |\u00a0\u00a0 Installing FluentValidation.MVC6 6.4.0.\r\nci-build_1\u00a0 |\u00a0\u00a0 Installing Microsoft.Composition 1.0.27.\r\nci-build_1\u00a0 |\u00a0\u00a0 Installing Microsoft.CodeAnalysis.Workspaces.Common 1.3.0.\r\nci-build_1\u00a0 |\u00a0\u00a0 Installing Microsoft.CodeAnalysis.CSharp.Workspaces 1.3.0.\r\nci-build_1\u00a0 |\u00a0\u00a0 Installing NuGet.Frameworks 3.5.0.\r\nci-build_1\u00a0 |\u00a0\u00a0 Installing Microsoft.VisualStudio.Web.CodeGeneration.Utils 1.1.1.\r\nci-build_1\u00a0 |\u00a0\u00a0 Installing Microsoft.VisualStudio.Web.CodeGeneration.Templating 1.1.1.\r\nci-build_1\u00a0 |\u00a0\u00a0 Installing Microsoft.VisualStudio.Web.CodeGeneration.Core 1.1.1.\r\nci-build_1\u00a0 |\u00a0\u00a0 Installing Microsoft.VisualStudio.Web.CodeGeneration.EntityFrameworkCore 1.1.1.\r\nci-build_1\u00a0 |\u00a0\u00a0 Installing Microsoft.Extensions.CommandLineUtils 1.1.1.\r\nci-build_1\u00a0 |\u00a0\u00a0 Installing Microsoft.VisualStudio.Web.CodeGeneration 1.1.1.\r\nci-build_1\u00a0 |\u00a0\u00a0 Installing Microsoft.AspNetCore.Cryptography.KeyDerivation 1.1.1.\r\nci-build_1\u00a0 |\u00a0\u00a0 Installing IdentityModel 2.5.1.\r\nci-build_1\u00a0 |\u00a0\u00a0 Installing Microsoft.AspNetCore.Cors 1.1.1.\r\nci-build_1\u00a0 |\u00a0\u00a0 Installing Microsoft.VisualStudio.Web.CodeGenerators.Mvc 1.1.1.\r\nci-build_1\u00a0 |\u00a0\u00a0 Installing Microsoft.AspNetCore.Identity 1.1.1.\r\nci-build_1\u00a0 |\u00a0\u00a0 Installing IdentityServer4 1.3.1.\r\nci-build_1\u00a0 |\u00a0\u00a0 Installing Microsoft.VisualStudio.Web.CodeGeneration.Design 1.1.1.\r\nci-build_1\u00a0 |\u00a0\u00a0 Installing Microsoft.VisualStudio.Web.BrowserLink.Loader 14.1.0.\r\nci-build_1\u00a0 |\u00a0\u00a0 Installing IdentityServer4.EntityFramework 1.0.1.\r\nci-build_1\u00a0 |\u00a0\u00a0 Installing IdentityServer4.AspNetIdentity 1.0.1.\r\nci-build_1\u00a0 |\u00a0\u00a0 Installing Microsoft.EntityFrameworkCore.Relational 1.1.1.\r\nci-build_1\u00a0 |\u00a0\u00a0 Installing Microsoft.EntityFrameworkCore 1.1.1.\r\nci-build_1\u00a0 |\u00a0\u00a0 Installing AutoMapper 6.0.1.\r\nci-build_1\u00a0 |\u00a0\u00a0 Generating MSBuild file /src/src/Services/Ordering/Ordering.API/obj/Ordering.API.csproj.nuget.g.props.\r\nci-build_1\u00a0 |\u00a0\u00a0 Generating MSBuild file /src/src/Services/Ordering/Ordering.API/obj/Ordering.API.csproj.nuget.g.targets.\r\nci-build_1\u00a0 |\u00a0\u00a0 Writing lock file to disk. Path: /src/src/Services/Ordering/Ordering.API/obj/project.assets.json\r\nci-build_1\u00a0 |\u00a0\u00a0 Restore completed in 7.02 sec for /src/src/Services/Ordering/Ordering.API/Ordering.API.csproj.\r\nci-build_1\u00a0 |\u00a0\u00a0 Restoring packages for /src/src/Web/WebSPA/WebSPA.csproj...\r\nci-build_1\u00a0 |\u00a0\u00a0 Generating MSBuild file /src/src/Web/WebMVC/obj/WebMVC.csproj.nuget.g.props.\r\nci-build_1\u00a0 |\u00a0\u00a0 Generating MSBuild file /src/src/Web/WebMVC/obj/WebMVC.csproj.nuget.g.targets.\r\nci-build_1\u00a0 |\u00a0\u00a0 Writing lock file to disk. Path: /src/src/Web/WebMVC/obj/project.assets.json\r\nci-build_1\u00a0 |\u00a0\u00a0 Restore completed in 7.54 sec for /src/src/Web/WebMVC/WebMVC.csproj.\r\nci-build_1\u00a0 |\u00a0\u00a0 Restoring packages for /src/src/Web/WebStatus/WebStatus.csproj...\r\nci-build_1\u00a0 |\u00a0\u00a0 Generating MSBuild file /src/src/Services/Identity/Identity.API/obj/Identity.API.csproj.nuget.g.props.\r\nci-build_1\u00a0 |\u00a0\u00a0 Generating MSBuild file /src/src/Services/Identity/Identity.API/obj/Identity.API.csproj.nuget.g.targets.\r\nci-build_1\u00a0 |\u00a0\u00a0 Writing lock file to disk. Path: /src/src/Services/Identity/Identity.API/obj/project.assets.json\r\nci-build_1\u00a0 |\u00a0\u00a0 Restore completed in 15.13 sec for /src/src/Services/Identity/Identity.API/Identity.API.csproj.\r\nci-build_1\u00a0 |\u00a0\u00a0 Restoring packages for /src/test/Services/FunctionalTests/FunctionalTests.csproj...\r\nci-build_1\u00a0 |\u00a0\u00a0 Installing Microsoft.Extensions.Configuration.FileExtensions 1.0.0.\r\nci-build_1\u00a0 |\u00a0\u00a0 Installing Microsoft.Extensions.Configuration.EnvironmentVariables 1.0.0.\r\nci-build_1\u00a0 |\u00a0\u00a0 Installing Microsoft.Extensions.DependencyInjection 1.0.0.\r\nci-build_1\u00a0 |\u00a0\u00a0 Installing Microsoft.Extensions.Logging 1.0.0.\r\nci-build_1\u00a0 |\u00a0\u00a0 Installing Microsoft.Extensions.Configuration.Json 1.0.0.\r\nci-build_1\u00a0 |\u00a0\u00a0 Installing Microsoft.AspNetCore.Hosting 1.0.0.\r\nci-build_1\u00a0 |\u00a0\u00a0 Installing Microsoft.Extensions.DiagnosticAdapter 1.0.0.\r\nci-build_1\u00a0 |\u00a0\u00a0 Installing Microsoft.ApplicationInsights 2.2.0.\r\nci-build_1\u00a0 |\u00a0\u00a0 Installing Microsoft.Extensions.Configuration 1.0.0.\r\nci-build_1\u00a0 |\u00a0\u00a0 Installing Microsoft.ApplicationInsights.AspNetCore 2.0.0.\r\nci-build_1\u00a0 |\u00a0\u00a0 Generating MSBuild file /src/src/Web/WebStatus/obj/WebStatus.csproj.nuget.g.props.\r\nci-build_1\u00a0 |\u00a0\u00a0 Writing lock file to disk. Path: /src/src/Web/WebStatus/obj/project.assets.json\r\nci-build_1\u00a0 |\u00a0\u00a0 Restore completed in 5.05 sec for /src/src/Web/WebStatus/WebStatus.csproj.\r\nci-build_1\u00a0 |\u00a0\u00a0 Restoring packages for /src/test/Services/IntegrationTests/IntegrationTests.csproj...\r\nci-build_1\u00a0 |\u00a0\u00a0 Installing System.IO 4.0.0.\r\nci-build_1\u00a0 |\u00a0\u00a0 Installing System.Linq.Expressions 4.0.0.\r\nci-build_1\u00a0 |\u00a0\u00a0 Installing System.ObjectModel 4.0.0.\r\nci-build_1\u00a0 |\u00a0\u00a0 Installing System.Globalization 4.0.0.\r\nci-build_1\u00a0 |\u00a0\u00a0 Installing Microsoft.AspNetCore.Mvc.Abstractions 1.0.1.\r\nci-build_1\u00a0 |\u00a0\u00a0 Installing Microsoft.AspNetCore.Razor 1.0.0.\r\nci-build_1\u00a0 |\u00a0\u00a0 Installing System.Dynamic.Runtime 4.0.0.\r\nci-build_1\u00a0 |\u00a0\u00a0 Installing System.Collections.Concurrent 4.0.0.\r\nci-build_1\u00a0 |\u00a0\u00a0 Installing System.Diagnostics.Tracing 4.0.0.\r\nci-build_1\u00a0 |\u00a0\u00a0 Installing System.Runtime 4.0.0.\r\nci-build_1\u00a0 |\u00a0\u00a0 Installing System.Runtime.Extensions 4.0.0.\r\nci-build_1\u00a0 |\u00a0\u00a0 Installing System.Collections 4.0.0.\r\nci-build_1\u00a0 |\u00a0\u00a0 Installing System.Linq 4.0.0.\r\nci-build_1\u00a0 |\u00a0\u00a0 Installing System.Threading 4.0.0.\r\nci-build_1\u00a0 |\u00a0\u00a0 Installing System.Diagnostics.Debug 4.0.0.\r\nci-build_1\u00a0 |\u00a0\u00a0 Installing Microsoft.AspNetCore.Mvc.Core 1.0.1.\r\nci-build_1\u00a0 |\u00a0\u00a0 Installing Microsoft.AspNetCore.TestHost 1.1.2.\r\nci-build_1\u00a0 |\u00a0\u00a0 Installing Microsoft.AspNetCore.AngularServices 1.0.0-beta-000014.\r\nci-build_1\u00a0 |\u00a0\u00a0 Installing Microsoft.AspNetCore.Mvc.TagHelpers 1.0.1.\r\nci-build_1\u00a0 |\u00a0\u00a0 Installing Microsoft.AspNetCore.SpaServices 1.0.0-beta-000014.\r\nci-build_1\u00a0 |\u00a0\u00a0 Installing Microsoft.Extensions.Caching.Memory 1.0.0.\r\nci-build_1\u00a0 |\u00a0\u00a0 Installing Microsoft.AspNetCore.Mvc.Razor 1.0.1.\r\nci-build_1\u00a0 |\u00a0\u00a0 Installing Microsoft.AspNetCore.NodeServices 1.0.0-beta-000014.\r\nci-build_1\u00a0 |\u00a0\u00a0 Installing Microsoft.Extensions.Caching.Abstractions 1.0.0.\r\nci-build_1\u00a0 |\u00a0\u00a0 Installing Microsoft.Extensions.FileProviders.Composite 1.0.0.\r\nci-build_1\u00a0 |\u00a0\u00a0 Installing Microsoft.AspNetCore.Mvc.Razor.Host 1.0.1.\r\nci-build_1\u00a0 |\u00a0\u00a0 Installing Microsoft.AspNetCore.Mvc.ViewFeatures 1.0.1.\r\nci-build_1\u00a0 |\u00a0\u00a0 Installing System.Threading.Tasks.Dataflow 4.5.25.\r\nci-build_1\u00a0 |\u00a0\u00a0 Installing Microsoft.AspNetCore.Razor.Runtime 1.0.0.\r\nci-build_1\u00a0 |\u00a0\u00a0 Installing Microsoft.AspNetCore.Diagnostics.Abstractions 1.0.0.\r\nci-build_1\u00a0 |\u00a0\u00a0 Installing Microsoft.AspNetCore.Mvc.Formatters.Json 1.0.1.\r\nci-build_1\u00a0 |\u00a0\u00a0 Installing Microsoft.AspNetCore.Html.Abstractions 1.0.0.\r\nci-build_1\u00a0 |\u00a0\u00a0 Installing Microsoft.AspNetCore.Mvc.DataAnnotations 1.0.1.\r\nci-build_1\u00a0 |\u00a0\u00a0 Installing Castle.Core 4.0.0.\r\nci-build_1\u00a0 |\u00a0\u00a0 Installing Moq 4.7.10.\r\nci-build_1\u00a0 |\u00a0\u00a0 Generating MSBuild file /src/test/Services/FunctionalTests/obj/FunctionalTests.csproj.nuget.g.props.\r\nci-build_1\u00a0 |\u00a0\u00a0 Generating MSBuild file /src/test/Services/FunctionalTests/obj/FunctionalTests.csproj.nuget.g.targets.\r\nci-build_1\u00a0 |\u00a0\u00a0 Writing lock file to disk. Path: /src/test/Services/FunctionalTests/obj/project.assets.json\r\nci-build_1\u00a0 |\u00a0\u00a0 Restore completed in 10.68 sec for /src/test/Services/FunctionalTests/FunctionalTests.csproj.\r\nci-build_1\u00a0 |\u00a0\u00a0 Restoring packages for /src/test/Services/UnitTest/UnitTest.csproj...\r\nci-build_1\u00a0 |\u00a0\u00a0 Generating MSBuild file /src/test/Services/IntegrationTests/obj/IntegrationTests.csproj.nuget.g.props.\r\nci-build_1\u00a0 |\u00a0\u00a0 Generating MSBuild file /src/test/Services/IntegrationTests/obj/IntegrationTests.csproj.nuget.g.targets.\r\nci-build_1\u00a0 |\u00a0\u00a0 Writing lock file to disk. Path: /src/test/Services/IntegrationTests/obj/project.assets.json\r\nci-build_1\u00a0 |\u00a0\u00a0 Restore completed in 8.33 sec for /src/test/Services/IntegrationTests/IntegrationTests.csproj.\r\nci-build_1\u00a0 |\u00a0\u00a0 Restoring packages for /src/src/Services/Identity/Identity.API/Identity.API.csproj...\r\nci-build_1\u00a0 |\u00a0\u00a0 Generating MSBuild file /src/src/Web/WebSPA/obj/WebSPA.csproj.nuget.g.props.\r\nci-build_1\u00a0 |\u00a0\u00a0 Generating MSBuild file /src/src/Web/WebSPA/obj/WebSPA.csproj.nuget.g.targets.\r\nci-build_1\u00a0 |\u00a0\u00a0 Writing lock file to disk. Path: /src/src/Web/WebSPA/obj/project.assets.json\r\nci-build_1\u00a0 |\u00a0\u00a0 Restore completed in 20 sec for /src/src/Web/WebSPA/WebSPA.csproj.\r\nci-build_1\u00a0 |\u00a0\u00a0 Restoring packages for /src/src/Web/WebSPA/WebSPA.csproj...\r\nci-build_1\u00a0 |\u00a0\u00a0 Installing Microsoft.NETCore.Jit 1.0.2.\r\nci-build_1\u00a0 |\u00a0\u00a0 Installing Microsoft.NETCore.Runtime.CoreCLR 1.0.2.\r\nci-build_1\u00a0 |\u00a0\u00a0 Installing Microsoft.DotNet.Watcher.Tools 1.0.0-msbuild3-final.\r\nci-build_1\u00a0 |\u00a0\u00a0 Installing Microsoft.NETCore.DotNetHostPolicy 1.0.1.\r\nci-build_1\u00a0 |\u00a0\u00a0 Installing Microsoft.NETCore.App 1.0.0.\r\nci-build_1\u00a0 |\u00a0\u00a0 Restore completed in 1.36 sec for /src/src/Web/WebSPA/WebSPA.csproj.\r\nci-build_1\u00a0 |\u00a0\u00a0 Restoring packages for /src/src/Services/Identity/Identity.API/Identity.API.csproj...\r\nci-build_1\u00a0 |\u00a0\u00a0 Installing Microsoft.NETCore.Jit 1.0.4.\r\nci-build_1\u00a0 |\u00a0\u00a0 Installing Microsoft.NETCore.Runtime.CoreCLR 1.0.4.\r\nci-build_1\u00a0 |\u00a0\u00a0 Installing Microsoft.NETCore.App 1.1.0.\r\nci-build_1\u00a0 |\u00a0\u00a0 Installing NUglify 1.5.5.\r\nci-build_1\u00a0 |\u00a0\u00a0 Installing BundlerMinifier.Core 2.4.337.\r\nci-build_1\u00a0 |\u00a0\u00a0 Restore completed in 5.05 sec for /src/src/Services/Identity/Identity.API/Identity.API.csproj.\r\nci-build_1\u00a0 |\u00a0\u00a0 Restoring packages for /src/src/Services/Ordering/Ordering.API/Ordering.API.csproj...\r\nci-build_1\u00a0 |\u00a0\u00a0 Installing Microsoft.EntityFrameworkCore.Tools.DotNet 1.0.0-msbuild3-final.\r\nci-build_1\u00a0 |\u00a0\u00a0 Installing Microsoft.EntityFrameworkCore.Tools.DotNet 1.0.0.\r\nci-build_1\u00a0 |\u00a0\u00a0 Restore completed in 1.15 sec for /src/src/Services/Identity/Identity.API/Identity.API.csproj.\r\nci-build_1\u00a0 |\u00a0\u00a0 Restoring packages for /src/src/Web/WebMVC/WebMVC.csproj...\r\nci-build_1\u00a0 |\u00a0\u00a0 Restore completed in 887 ms for /src/src/Services/Ordering/Ordering.API/Ordering.API.csproj.\r\nci-build_1\u00a0 |\u00a0\u00a0 Restoring packages for /src/src/Web/WebSPA/WebSPA.csproj...\r\nci-build_1\u00a0 |\u00a0\u00a0 Installing Microsoft.Extensions.Configuration.Abstractions 1.0.1.\r\nci-build_1\u00a0 |\u00a0\u00a0 Installing Microsoft.Extensions.Configuration 1.0.1.\r\nci-build_1\u00a0 |\u00a0\u00a0 Installing Microsoft.Extensions.Configuration.FileExtensions 1.0.1.\r\nci-build_1\u00a0 |\u00a0\u00a0 Installing Microsoft.Extensions.Configuration.Json 1.0.1.\r\nci-build_1\u00a0 |\u00a0\u00a0 Installing Microsoft.Extensions.Configuration.UserSecrets 1.0.1.\r\nci-build_1\u00a0 |\u00a0\u00a0 Installing Microsoft.Extensions.SecretManager.Tools 1.0.0-msbuild3-final.\r\nci-build_1\u00a0 |\u00a0\u00a0 Restore completed in 2.37 sec for /src/src/Web/WebMVC/WebMVC.csproj.\r\nci-build_1\u00a0 |\u00a0\u00a0 Restoring packages for /src/src/Web/WebStatus/WebStatus.csproj...\r\nci-build_1\u00a0 |\u00a0\u00a0 Installing NuGet.Packaging.Core.Types 3.5.0-beta2-1484.\r\nci-build_1\u00a0 |\u00a0\u00a0 Installing System.Resources.Writer 4.0.0.\r\nci-build_1\u00a0 |\u00a0\u00a0 Installing System.Runtime.Serialization.Xml 4.1.1.\r\nci-build_1\u00a0 |\u00a0\u00a0 Installing Microsoft.Extensions.CommandLineUtils 1.0.0.\r\nci-build_1\u00a0 |\u00a0\u00a0 Installing NuGet.Packaging.Core 3.5.0-beta2-1484.\r\nci-build_1\u00a0 |\u00a0\u00a0 Installing NuGet.Common 3.5.0-beta2-1484.\r\nci-build_1\u00a0 |\u00a0\u00a0 Installing NuGet.Versioning 3.5.0-beta2-1484.\r\nci-build_1\u00a0 |\u00a0\u00a0 Installing NuGet.Frameworks 3.5.0-beta2-1484.\r\nci-build_1\u00a0 |\u00a0\u00a0 Installing Microsoft.DotNet.ProjectModel 1.0.0-rc3-003121.\r\nci-build_1\u00a0 |\u00a0\u00a0 Installing Microsoft.Build.Tasks.Core 15.1.0-preview-000458-02.\r\nci-build_1\u00a0 |\u00a0\u00a0 Installing Microsoft.Build 15.1.0-preview-000458-02.\r\nci-build_1\u00a0 |\u00a0\u00a0 Installing Microsoft.Build.Utilities.Core 15.1.0-preview-000458-02.\r\nci-build_1\u00a0 |\u00a0\u00a0 Installing Microsoft.Build.Framework 15.1.0-preview-000458-02.\r\nci-build_1\u00a0 |\u00a0\u00a0 Installing NuGet.Packaging 3.5.0-beta2-1484.\r\nci-build_1\u00a0 |\u00a0\u00a0 Installing NuGet.RuntimeModel 3.5.0-beta2-1484.\r\nci-build_1\u00a0 |\u00a0\u00a0 Installing Microsoft.Build.Runtime 15.1.0-preview-000458-02.\r\nci-build_1\u00a0 |\u00a0\u00a0 Installing Microsoft.VisualStudio.Web.CodeGeneration.Tools 1.0.0-msbuild3-final.\r\nci-build_1\u00a0 |\u00a0\u00a0 Restore completed in 3.02 sec for /src/src/Web/WebSPA/WebSPA.csproj.\r\nci-build_1\u00a0 |\u00a0\u00a0 Installing Microsoft.Build 15.1.548.\r\nci-build_1\u00a0 |\u00a0\u00a0 Installing Microsoft.Build.Tasks.Core 15.1.548.\r\nci-build_1\u00a0 |\u00a0\u00a0 Installing Microsoft.Build.Utilities.Core 15.1.548.\r\nci-build_1\u00a0 |\u00a0\u00a0 Installing Microsoft.Build.Framework 15.1.548.\r\nci-build_1\u00a0 |\u00a0\u00a0 Installing Microsoft.Build.Runtime 15.1.548.\r\nci-build_1\u00a0 |\u00a0\u00a0 Installing Microsoft.Extensions.CommandLineUtils 1.0.1.\r\nci-build_1\u00a0 |\u00a0\u00a0 Installing Microsoft.VisualStudio.Web.CodeGeneration.Tools 1.0.0.\r\nci-build_1\u00a0 |\u00a0\u00a0 Restore completed in 1.42 sec for /src/src/Web/WebStatus/WebStatus.csproj.\r\nci-build_1\u00a0 |\u00a0\u00a0 Generating MSBuild file /src/test/Services/UnitTest/obj/UnitTest.csproj.nuget.g.props.\r\nci-build_1\u00a0 |\u00a0\u00a0 Generating MSBuild file /src/test/Services/UnitTest/obj/UnitTest.csproj.nuget.g.targets.\r\nci-build_1\u00a0 |\u00a0\u00a0 Writing lock file to disk. Path: /src/test/Services/UnitTest/obj/project.assets.json\r\nci-build_1\u00a0 |\u00a0\u00a0 Restore completed in 12.4 sec for /src/test/Services/UnitTest/UnitTest.csproj.\r\nci-build_1\u00a0 |\r\nci-build_1\u00a0 |\u00a0\u00a0 NuGet Config files used:\r\nci-build_1\u00a0 |\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 /src/nuget.config\r\nci-build_1\u00a0 |\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 /root/.nuget/NuGet/NuGet.Config\r\nci-build_1\u00a0 |\r\nci-build_1\u00a0 |\u00a0\u00a0 Feeds used:\r\nci-build_1\u00a0 |\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 https://dotnet.myget.org/F/aspnet-feb2017-patch/api/v3/index.json\r\nci-build_1\u00a0 |\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 https://api.nuget.org/v3/index.json\r\nci-build_1\u00a0 |\r\nci-build_1\u00a0 |\u00a0\u00a0 Installed:\r\nci-build_1\u00a0 |\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 2 package(s) to /src/src/BuildingBlocks/EventBus/EventBus/EventBus.csproj\r\nci-build_1\u00a0 |\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 5 package(s) to /src/src/BuildingBlocks/EventBus/EventBusRabbitMQ/EventBusRabbitMQ.csproj\r\nci-build_1\u00a0 |\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 2 package(s) to /src/src/BuildingBlocks/HealthChecks/src/Microsoft.AspNetCore.HealthChecks/Microsoft.AspNetCore.HealthChecks.csproj\r\nci-build_1\u00a0 |\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 2 package(s) to /src/src/BuildingBlocks/HealthChecks/src/Microsoft.Extensions.HealthChecks.SqlServer/Microsoft.Extensions.HealthChecks.SqlServer.csproj\r\nci-build_1\u00a0 |\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 22 package(s) to /src/src/BuildingBlocks/EventBus/EventBus.Tests/EventBus.Tests.csproj\r\nci-build_1\u00a0 |\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 2 package(s) to /src/src/BuildingBlocks/HealthChecks/src/Microsoft.Extensions.HealthChecks/Microsoft.Extensions.HealthChecks.csproj\r\nci-build_1\u00a0 |\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 3 package(s) to /src/src/BuildingBlocks/Resilience/Resilience.Http/Resilience.Http.csproj\r\nci-build_1\u00a0 |\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 3 package(s) to /src/src/BuildingBlocks/EventBus/IntegrationEventLogEF/IntegrationEventLogEF.csproj\r\nci-build_1\u00a0 |\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 70 package(s) to /src/src/Services/Basket/Basket.API/Basket.API.csproj\r\nci-build_1\u00a0 |\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 49 package(s) to /src/src/Services/Catalog/Catalog.API/Catalog.API.csproj\r\nci-build_1\u00a0 |\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 2 package(s) to /src/src/Services/Ordering/Ordering.Domain/Ordering.Domain.csproj\r\nci-build_1\u00a0 |\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 2 package(s) to /src/src/Services/Ordering/Ordering.Infrastructure/Ordering.Infrastructure.csproj\r\nci-build_1\u00a0 |\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 87 package(s) to /src/src/Services/Ordering/Ordering.API/Ordering.API.csproj\r\nci-build_1\u00a0 |\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 29 package(s) to /src/src/Web/WebMVC/WebMVC.csproj\r\nci-build_1\u00a0 |\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 43 package(s) to /src/src/Services/Identity/Identity.API/Identity.API.csproj\r\nci-build_1\u00a0 |\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 33 package(s) to /src/src/Web/WebStatus/WebStatus.csproj\r\nci-build_1\u00a0 |\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 81 package(s) to /src/test/Services/FunctionalTests/FunctionalTests.csproj\r\nci-build_1\u00a0 |\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 105 package(s) to /src/test/Services/IntegrationTests/IntegrationTests.csproj\r\nci-build_1\u00a0 |\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 89 package(s) to /src/src/Web/WebSPA/WebSPA.csproj\r\nci-build_1\u00a0 |\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 106 package(s) to /src/test/Services/UnitTest/UnitTest.csproj\r\nci-build_1\u00a0 | Microsoft (R) Build Engine version 15.1.1012.6693\r\nci-build_1\u00a0 | Copyright (C) Microsoft Corporation. All rights reserved.\r\nci-build_1\u00a0 |\r\nci-build_1\u00a0 |\u00a0\u00a0 Ordering.Domain -> /src/src/Services/Ordering/Ordering.Domain/bin/Release/netstandard1.6.1/Ordering.Domain.dll\r\nci-build_1\u00a0 |\u00a0\u00a0 EventBus -> /src/src/BuildingBlocks/EventBus/EventBus/bin/Release/netcoreapp1.1/EventBus.dll\r\nci-build_1\u00a0 |\u00a0\u00a0 EventBusRabbitMQ -> /src/src/BuildingBlocks/EventBus/EventBusRabbitMQ/bin/Release/netcoreapp1.1/EventBusRabbitMQ.dll\r\nci-build_1\u00a0 |\u00a0\u00a0 IntegrationEventLogEF -> /src/src/BuildingBlocks/EventBus/IntegrationEventLogEF/bin/Release/netcoreapp1.1/IntegrationEventLogEF.dll\r\nci-build_1\u00a0 |\u00a0\u00a0 Microsoft.Extensions.HealthChecks -> /src/src/BuildingBlocks/HealthChecks/src/Microsoft.Extensions.HealthChecks/bin/Release/netstandard1.3/Microsoft.Extensions.HealthChecks.dll\r\nci-build_1\u00a0 |\u00a0\u00a0 Microsoft.AspNetCore.HealthChecks -> /src/src/BuildingBlocks/HealthChecks/src/Microsoft.AspNetCore.HealthChecks/bin/Release/netstandard1.3/Microsoft.AspNetCore.HealthChecks.dll\r\nci-build_1\u00a0 |\u00a0\u00a0 Microsoft.Extensions.HealthChecks.SqlServer -> /src/src/BuildingBlocks/HealthChecks/src/Microsoft.Extensions.HealthChecks.SqlServer/bin/Release/netstandard1.3/Microsoft.Extensions.HealthChecks.S\r\nqlServer.dll\r\nci-build_1\u00a0 |\u00a0\u00a0 Resilience.Http -> /src/src/BuildingBlocks/Resilience/Resilience.Http/bin/Release/netstandard1.4/Resilience.Http.dll\r\nci-build_1\u00a0 |\u00a0\u00a0 Basket.API -> /src/src/Services/Basket/Basket.API/bin/Release/netcoreapp1.1/Basket.API.dll\r\nci-build_1\u00a0 | Startup.cs(36,17): warning CS0618: 'ConfigurationExtensions.AddUserSecrets(IConfigurationBuilder)' is obsolete: 'This method is obsolete and will be removed in a future version. The recommended al\r\nternative is .AddUserSecrets(string userSecretsId) or .AddUserSecrets<TStartup>().' [/src/src/Web/WebMVC/WebMVC.csproj]\r\nci-build_1\u00a0 |\u00a0\u00a0 WebMVC -> /src/src/Web/WebMVC/bin/Release/netcoreapp1.1/WebMVC.dll\r\nci-build_1\u00a0 | /src/docker-compose.dcproj : error MSB4019: The imported project \"/usr/share/dotnet/sdk/1.0.4/Sdks/Microsoft.Docker.Sdk/Sdk/Sdk.props\" was not found. Confirm that the path in the <Import> declarat\r\nion is correct, and that the file exists on disk.\r\nci-build_1\u00a0 |\u00a0\u00a0 Bundling with configuration from /src/src/Web/WebMVC/bundleconfig.json\r\nci-build_1\u00a0 |\u00a0\u00a0 Processing wwwroot/css/site.min.css\r\nci-build_1\u00a0 |\u00a0\u00a0 Processing wwwroot/js/site.min.js\r\nci-build_1\u00a0 | Startup.cs(32,17): warning CS0618: 'ConfigurationExtensions.AddUserSecrets(IConfigurationBuilder)' is obsolete: 'This method is obsolete and will be removed in a future version. The recommended al\r\nternative is .AddUserSecrets(string userSecretsId) or .AddUserSecrets<TStartup>().' [/src/src/Web/WebSPA/WebSPA.csproj]\r\nci-build_1\u00a0 |\u00a0\u00a0 WebSPA -> /src/src/Web/WebSPA/bin/Release/netcoreapp1.1/WebSPA.dll\r\nci-build_1\u00a0 |\u00a0\u00a0 WebStatus -> /src/src/Web/WebStatus/bin/Release/netcoreapp1.1.2/WebStatus.dll\r\nci-build_1\u00a0 |\u00a0\u00a0 npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@^1.0.0 (node_modules/chokidar/node_modules/fsevents):\r\nci-build_1\u00a0 |\u00a0\u00a0 npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@1.1.1: wanted {\"os\":\"darwin\",\"arch\":\"any\"} (current: {\"os\":\"linux\",\"arch\":\"x64\"})\r\nci-build_1\u00a0 |\r\nci-build_1\u00a0 |\u00a0\u00a0 > eshopaspnetnetcoredockerspa@0.0.0 build:prod /src/src/Web/WebSPA\r\nci-build_1\u00a0 |\u00a0\u00a0 > ng build --prod --aot --extract-css\r\nci-build_1\u00a0 |\r\nci-build_1\u00a0 | TestIntegrationEventHandler.cs(18,27): warning CS1998: This async method lacks 'await' operators and will run synchronously. Consider using the 'await' operator to await non-blocking API calls, or\r\n\u00a0'await Task.Run(...)' to do CPU-bound work on a background thread. [/src/src/BuildingBlocks/EventBus/EventBus.Tests/EventBus.Tests.csproj]\r\nci-build_1\u00a0 | TestIntegrationOtherEventHandler.cs(18,27): warning CS1998: This async method lacks 'await' operators and will run synchronously. Consider using the 'await' operator to await non-blocking API call\r\ns, or 'await Task.Run(...)' to do CPU-bound work on a background thread. [/src/src/BuildingBlocks/EventBus/EventBus.Tests/EventBus.Tests.csproj]\r\nci-build_1\u00a0 |\u00a0\u00a0 EventBus.Tests -> /src/src/BuildingBlocks/EventBus/EventBus.Tests/bin/Release/netcoreapp1.1/EventBus.Tests.dll\r\nci-build_1\u00a0 |\u00a0\u00a0 Ordering.Infrastructure -> /src/src/Services/Ordering/Ordering.Infrastructure/bin/Release/netstandard1.6.1/Ordering.Infrastructure.dll\r\nci-build_1\u00a0 |\u00a0\u00a0 Catalog.API -> /src/src/Services/Catalog/Catalog.API/bin/Release/netcoreapp1.1/Catalog.API.dll\r\nci-build_1\u00a0 |\u00a0\u00a0 Ordering.API -> /src/src/Services/Ordering/Ordering.API/bin/Release/netcoreapp1.1/Ordering.API.dll\r\nci-build_1\u00a0 |\u00a0\u00a0\u00a0 11% building modules 16/17 modules 1 active ...modules/bootstrap/scss/bootstrap.scssTemplate parse warnings:\r\nci-build_1\u00a0 |\u00a0\u00a0 The <template> element is deprecated. Use <ng-template> instead (\"\r\nci-build_1\u00a0 |\u00a0\u00a0\u00a0\u00a0 <div class=\"card\">\r\nci-build_1\u00a0 |\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 [WARNING ->]<template ngFor let-panel [ngForOf]=\"panels\">\r\nci-build_1\u00a0 |\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 <div role=\"tab\" id=\"{{panel.id}}-header\" [attr.ar\"): ng:///src/src/Web/WebSPA/node_modules/@ng-bootstrap/ng-bootstrap/accordion/accordion.d.ts.NgbAccordion.html@2:4\r\nci-build_1\u00a0 |\u00a0\u00a0 Hash: 9dd7f6f65d3e4eba0b05\r\nci-build_1\u00a0 |\u00a0\u00a0 Time: 47098ms\r\nci-build_1\u00a0 |\u00a0\u00a0 chunk\u00a0\u00a0\u00a0 {0} polyfills.c0a18ee9c7c94760ddd8.bundle.js (polyfills) 157 kB {4} [initial] [rendered]\r\nci-build_1\u00a0 |\u00a0\u00a0 chunk\u00a0\u00a0\u00a0 {1} main.e4e35f8150b323458d55.bundle.js (main) 434 kB {3} [initial] [rendered]\r\nci-build_1\u00a0 |\u00a0\u00a0 chunk\u00a0\u00a0\u00a0 {2} styles.49001adc0c15d2f1e99b.bundle.css (styles) 122 bytes {4} [initial] [rendered]\r\nci-build_1\u00a0 |\u00a0\u00a0 chunk\u00a0\u00a0\u00a0 {3} vendor.f4633ac498d971e27dc2.bundle.js (vendor) 2.12 MB [initial] [rendered]\r\nci-build_1\u00a0 |\u00a0\u00a0 chunk\u00a0\u00a0\u00a0 {4} inline.ed35c9bf10035defe776.bundle.js (inline) 0 bytes [entry] [rendered]\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 25% building modules 126/283 modules 157 active ...odules/rxjs/add/o\r\nperator/takeUnMSBUILD : error MSB4017: The build stopped unexpectedly because of an unexpected logger failure.\r\nci-build_1\u00a0 | Microsoft.Build.Exceptions.InternalLoggerException: The build stopped unexpectedly because of an unexpected logger failure. ---> System.IO.IOException: The process cannot access the file because i\r\nt is being used by another process.\r\nci-build_1\u00a0 |\u00a0\u00a0\u00a0 at System.ConsolePal.Write(SafeFileHandle fd, Byte* bufPtr, Int32 count)\r\nci-build_1\u00a0 |\u00a0\u00a0\u00a0 at System.ConsolePal.Write(SafeFileHandle fd, Byte[] buffer, Int32 offset, Int32 count)\r\nci-build_1\u00a0 |\u00a0\u00a0\u00a0 at System.ConsolePal.UnixConsoleStream.Write(Byte[] buffer, Int32 offset, Int32 count)\r\nci-build_1\u00a0 |\u00a0\u00a0\u00a0 at System.IO.StreamWriter.Flush(Boolean flushStream, Boolean flushEncoder)\r\nci-build_1\u00a0 |\u00a0\u00a0\u00a0 at System.IO.StreamWriter.Write(String value)\r\nci-build_1\u00a0 |\u00a0\u00a0\u00a0 at System.IO.SyncTextWriter.Write(String value)\r\nci-build_1\u00a0 |\u00a0\u00a0\u00a0 at Microsoft.Build.BackEnd.Logging.ParallelConsoleLogger.WriteBasedOnPrefix(String nonNullMessage, Boolean prefixAlreadyWritten, Int32 adjustedPrefixWidth)\r\nci-build_1\u00a0 |\u00a0\u00a0\u00a0 at Microsoft.Build.BackEnd.Logging.ParallelConsoleLogger.WriteMessageAligned(String message, Boolean prefixAlreadyWritten, Int32 prefixAdjustment)\r\nci-build_1\u00a0 |\u00a0\u00a0\u00a0 at Microsoft.Build.BackEnd.Logging.ParallelConsoleLogger.PrintMessage(BuildMessageEventArgs e, Boolean lightenText)\r\nci-build_1\u00a0 |\u00a0\u00a0\u00a0 at Microsoft.Build.BackEnd.Logging.ParallelConsoleLogger.MessageHandler(Object sender, BuildMessageEventArgs e)\r\nci-build_1\u00a0 |\u00a0\u00a0\u00a0 at Microsoft.Build.BackEnd.Logging.EventSourceSink.RaiseMessageEvent(Object sender, BuildMessageEventArgs buildEvent)\r\nci-build_1\u00a0 |\u00a0\u00a0\u00a0 --- End of inner exception stack trace ---\r\nci-build_1\u00a0 |\u00a0\u00a0\u00a0 at Microsoft.Build.Exceptions.InternalLoggerException.Throw(Exception innerException, BuildEventArgs e, String messageResourceName, Boolean initializationException, String[] messageArgs)\r\nci-build_1\u00a0 |\u00a0\u00a0\u00a0 at Microsoft.Build.BackEnd.Logging.EventSourceSink.RaiseMessageEvent(Object sender, BuildMessageEventArgs buildEvent)\r\nci-build_1\u00a0 |\u00a0\u00a0\u00a0 at Microsoft.Build.BackEnd.Logging.EventSourceSink.Consume(BuildEventArgs buildEvent)\r\nci-build_1\u00a0 |\u00a0\u00a0\u00a0 at Microsoft.Build.BackEnd.Logging.EventSourceSink.Consume(BuildEventArgs buildEvent, Int32 sinkId)\r\nci-build_1\u00a0 |\u00a0\u00a0\u00a0 at Microsoft.Build.BackEnd.Logging.EventRedirectorToSink.Microsoft.Build.Framework.IEventRedirector.ForwardEvent(BuildEventArgs buildEvent)\r\nci-build_1\u00a0 |\u00a0\u00a0\u00a0 at Microsoft.Build.Logging.ConfigurableForwardingLogger.ForwardToCentralLogger(BuildEventArgs e)\r\nci-build_1\u00a0 |\u00a0\u00a0\u00a0 at Microsoft.Build.Logging.ConfigurableForwardingLogger.MessageHandler(Object sender, BuildMessageEventArgs e)\r\nci-build_1\u00a0 |\u00a0\u00a0\u00a0 at Microsoft.Build.BackEnd.Logging.EventSourceSink.RaiseMessageEvent(Object sender, BuildMessageEventArgs buildEvent)\r\neshoponcontainersdev_ci-build_1 exited with code 1\r\n\r\n\u00a0\r\nThanks in advanced,\r\nCesar.\r\n\u00a0\r\nCesar de la Torre\r\nSr. Program Manager\r\n.NET Product Team\r\nMicrosoft Corp.",
  "state": "OPEN",
  "createdAt": "2017-06-01T01:47:59Z",
  "updatedAt": "2024-02-21T16:36:43Z",
  "closedAt": null,
  "author": {
    "login": "CESARDELATORRE"
  },
  "labels": [
    "triaged"
  ],
  "assignees": {
    "nodes": []
  },
  "milestone": null,
  "comments": {
    "nodes": [
      {
        "body": "This is the important stack:\r\n```\r\nci-build_1  | Microsoft.Build.Exceptions.InternalLoggerException: The build stopped unexpectedly because of an unexpected logger failure. ---> System.IO.IOException: The process cannot access the file because i\r\nt is being used by another process.\r\nci-build_1  |    at System.ConsolePal.Write(SafeFileHandle fd, Byte* bufPtr, Int32 count)\r\nci-build_1  |    at System.ConsolePal.Write(SafeFileHandle fd, Byte[] buffer, Int32 offset, Int32 count)\r\nci-build_1  |    at System.ConsolePal.UnixConsoleStream.Write(Byte[] buffer, Int32 offset, Int32 count)\r\nci-build_1  |    at System.IO.StreamWriter.Flush(Boolean flushStream, Boolean flushEncoder)\r\nci-build_1  |    at System.IO.StreamWriter.Write(String value)\r\nci-build_1  |    at System.IO.SyncTextWriter.Write(String value)\r\nci-build_1  |    at Microsoft.Build.BackEnd.Logging.ParallelConsoleLogger.WriteBasedOnPrefix(String nonNullMessage, Boolean prefixAlreadyWritten, Int32 adjustedPrefixWidth)\r\nci-build_1  |    at Microsoft.Build.BackEnd.Logging.ParallelConsoleLogger.WriteMessageAligned(String message, Boolean prefixAlreadyWritten, Int32 prefixAdjustment)\r\nci-build_1  |    at Microsoft.Build.BackEnd.Logging.ParallelConsoleLogger.PrintMessage(BuildMessageEventArgs e, Boolean lightenText)\r\nci-build_1  |    at Microsoft.Build.BackEnd.Logging.ParallelConsoleLogger.MessageHandler(Object sender, BuildMessageEventArgs e)\r\nci-build_1  |    at Microsoft.Build.BackEnd.Logging.EventSourceSink.RaiseMessageEvent(Object sender, BuildMessageEventArgs buildEvent)\r\n```\r\n\r\n@stephentoub Do you understand under what circumstances Console will throw this on Unix?",
        "createdAt": "2017-06-01T01:50:25Z",
        "updatedAt": "2017-06-01T01:50:25Z",
        "author": {
          "login": "davkean"
        }
      },
      {
        "body": "Interesting.  This error suggests that the write syscall returned EWOULDBLOCK.  To my knowledge that should only happen if the file descriptor is for a socket and the socket has been marked as non-blocking (and the write would block).  Is it possible stdout for this process is somehow a non-blocking socket?  Maybe whatever is creating this process is using socketpair to create a set of connected sockets for redirecting the output (and using SOCK_NONBLOCK with that for some reason)?",
        "createdAt": "2017-06-01T02:54:33Z",
        "updatedAt": "2017-06-01T02:58:15Z",
        "author": {
          "login": "stephentoub"
        }
      },
      {
        "body": "Hi,\r\nSome more info about this issue, for if it helps.\r\n\r\n1. It happens using MSBUILD under linux, in one Docker container (from image microsoft/aspnetcore-build:1.1.2)\r\n2. The faulting project is always the same: WebSPA which is a SPA app\r\n3. Error **happens always in the same place:** when doing webpack stuff:\r\n```\r\nci-build_1  |   chunk    {0} polyfills.87e39779d6f39f634d5e.bundle.js (polyfills) 165 kB {4} [initial] [rendered]\r\nci-build_1  |   chunk    {1} main.277eedef43a206635514.bundle.js (main) 476 kB {3} [initial] [rendered]\r\nci-build_1  |   chunk    {2} styles.19d3cfe86ac611e30cdc.bundle.css (styles) 122 bytes {4} [initial] [rendered]\r\nci-build_1  |   chunk    {3} vendor.4e76a58d85c019fc6b03.bundle.js (vendor) 2.1 MB [initial] [rendered]\r\nci-build_1  |   chunk    {4} inline.de724caa8a629c2334db.bundle.js (inline) 0 bytes [entry] [rendered]\r\n 26% building modMSBUILD : error MSB4017: The build stopped unexpectedly because of an unexpected logger failure.\r\n```\r\n4. It happens compiling the sln file (using dotnet publish xxxx.sln). Seems to happen almost every time\r\n5. **It happens** also, but seems to happen **less frequently** compiling all sln projects one by one (using dotnet publish on each csproj directory). But it do not happen every time.\r\n6. It happens either compiling WebSPA the first project or the last (or in the middle)\r\n7. It **do not happen** (or I could not reproduce it) if the WebSPA is the only project compiled\r\n8. It **do not happen** (or I could not reproduce it) if logged interactivily (docker run -it) into the container and type the `dotnet publish` manually\r\n\r\nHope it helps!\r\nThx\r\n",
        "createdAt": "2017-06-21T08:52:01Z",
        "updatedAt": "2017-06-21T08:52:01Z",
        "author": {
          "login": "eiximenis"
        }
      },
      {
        "body": "I am seeing the same under Travis C: https://travis-ci.org/tugberkugurlu/AspNetCore.Identity.MongoDB/builds/273703356",
        "createdAt": "2017-09-09T21:10:43Z",
        "updatedAt": "2017-09-09T21:10:43Z",
        "author": {
          "login": "tugberkugurlu"
        }
      },
      {
        "body": "We are having the same issue when running our build on Linux using Jenkins. It doesn't happen every time but does happen frequently:\r\n\r\n```\r\nMSBUILD : error MSB4017: The build stopped unexpectedly because of an unexpected logger failure.\r\nMicrosoft.Build.Exceptions.InternalLoggerException: The build stopped unexpectedly because of an unexpected logger failure. ---> System.IO.IOException: The process cannot access the file because it is being used by another process.\r\n   at System.ConsolePal.Write(SafeFileHandle fd, Byte* bufPtr, Int32 count)\r\n   at System.ConsolePal.Write(SafeFileHandle fd, Byte[] buffer, Int32 offset, Int32 count)\r\n   at System.ConsolePal.UnixConsoleStream.Write(Byte[] buffer, Int32 offset, Int32 count)\r\n   at System.IO.StreamWriter.Flush(Boolean flushStream, Boolean flushEncoder)\r\n   at System.IO.StreamWriter.Write(String value)\r\n   at System.IO.SyncTextWriter.Write(String value)\r\n   at Microsoft.Build.BackEnd.Logging.ParallelConsoleLogger.WriteBasedOnPrefix(String nonNullMessage, Boolean prefixAlreadyWritten, Int32 adjustedPrefixWidth)\r\n   at Microsoft.Build.BackEnd.Logging.ParallelConsoleLogger.WriteMessageAligned(String message, Boolean prefixAlreadyWritten, Int32 prefixAdjustment)\r\n   at Microsoft.Build.BackEnd.Logging.ParallelConsoleLogger.ShowFlatErrorWarningSummary()\r\n   at Microsoft.Build.BackEnd.Logging.ParallelConsoleLogger.BuildFinishedHandler(Object sender, BuildFinishedEventArgs e)\r\n   at Microsoft.Build.Evaluation.ProjectCollection.ReusableLogger.BuildFinishedHandler(Object sender, BuildFinishedEventArgs e)\r\n   at Microsoft.Build.BackEnd.Logging.EventSourceSink.RaiseBuildFinishedEvent(Object sender, BuildFinishedEventArgs buildEvent)\r\n   --- End of inner exception stack trace ---\r\n   at Microsoft.Build.Exceptions.InternalLoggerException.Throw(Exception innerException, BuildEventArgs e, String messageResourceName, Boolean initializationException, String[] messageArgs)\r\n   at Microsoft.Build.BackEnd.Logging.EventSourceSink.RaiseBuildFinishedEvent(Object sender, BuildFinishedEventArgs buildEvent)\r\n   at Microsoft.Build.BackEnd.Logging.EventSourceSink.Consume(BuildEventArgs buildEvent)\r\n   at Microsoft.Build.BackEnd.Logging.EventSourceSink.Consume(BuildEventArgs buildEvent, Int32 sinkId)\r\n   at Microsoft.Build.BackEnd.Logging.EventRedirectorToSink.Microsoft.Build.Framework.IEventRedirector.ForwardEvent(BuildEventArgs buildEvent)\r\n   at Microsoft.Build.BackEnd.Logging.CentralForwardingLogger.EventSource_AnyEventRaised(Object sender, BuildEventArgs buildEvent)\r\n   at Microsoft.Build.BackEnd.Logging.EventSourceSink.RaiseAnyEvent(Object sender, BuildEventArgs buildEvent)\r\nBuild step 'Execute shell' marked build as failure\r\n```\r\n\r\nNote that, when our CI fails, it's during a `dotnet build` not `dotnet publish` but the stack trace is the same as that reported in this issue. Also we are running `dotnet build` on a solution, not a single project.",
        "createdAt": "2018-02-09T13:50:59Z",
        "updatedAt": "2018-02-09T13:54:22Z",
        "author": {
          "login": "nwoolls"
        }
      },
      {
        "body": "We're getting this on Travis as well. Any news on this issue?\r\n\r\nhttps://travis-ci.org/twilio/twilio-csharp/jobs/435450140",
        "createdAt": "2018-10-01T22:13:14Z",
        "updatedAt": "2018-10-01T22:13:14Z",
        "author": {
          "login": "dprothero"
        }
      }
    ]
  }
}