{
  "number": 2128,
  "title": ".NET CLI not including files under certain directory and not removing other files",
  "body": "_From @conniey on April 4, 2017 18:49_\n\nI upgraded a solution from VS2015 to VS2017 using the migration tool.  When I try to compile my project for netstandard1.6, it cannot find certain files even though they are under the same directory.  In addition, it is not excluding some files that are stated in my csproj.\r\n\r\n**Repro steps:**\r\n1. Clone: https://github.com/conniey/lucenenet/tree/vs2017\r\n2. `dotnet restore Lucene.Net.Portable.sln`\r\n3. `cd .\\src\\Lucene.Net`\r\n4. `dotnet build .\\Lucene.Net.csproj -f netstandard1.6`\r\n\r\n**Expected**\r\nIt builds. (`dotnet build .\\Lucene.Net.csproj -f net451` builds correctly)\r\n\r\n**Actual**\r\n\r\nI get a bunch of errors below:\r\n* `Support\\StreamUtils.cs` should not be compiled because it is removed here: [Lucene.net.csproj #L44-L46](https://github.com/conniey/lucenenet/blob/vs2017/src/Lucene.Net/Lucene.Net.csproj#L44-L46)\r\n* `DisposableThreadLocal<>` is defined in [`Util\\CloseableThreadLocal.cs`](https://github.com/conniey/lucenenet/blob/vs2017/src/Lucene.Net/Util/CloseableThreadLocal.cs) which is under the Lucene.Net folder\r\n* `Constants` is defined in [`Util\\Constants.cs`](https://github.com/conniey/lucenenet/blob/vs2017/src/Lucene.Net/Util/Constants.cs)\r\n\r\n```\r\nSupport\\StreamUtils.cs(2,47): error CS0234: The type or namespace name 'Binary' does not exist in the namespace 'System.Runtime.Serialization.Formatters' (are you missing an assembly reference?) [D:\\git\\conniey\\lucenenet\\src\\Lucene.Net\\Lucene.Net.csproj]\r\nAnalysis\\Analyzer.cs(71,18): error CS0246: The type or namespace name 'DisposableThreadLocal<>' could not be found (are you missing a using directive or an assembly reference?) [D:\\git\\conniey\\lucenenet\\src\\Lucene.Net\\Lucene.Net.csproj]\r\nIndex\\DocumentsWriterPerThread.cs(31,39): error CS0234: The type or namespace name 'Constants' does not exist in the namespace 'Lucene.Net.Util' (are you missing an assembly reference?) [D:\\git\\conniey\\lucenenet\\src\\Lucene.Net\\Lucene.Net.csproj]\r\nIndex\\IndexUpgrader.cs(26,39): error CS0234: The type or namespace name 'Constants' does not exist in the namespace 'Lucene.Net.Util' (are you missing an assembly reference?) [D:\\git\\conniey\\lucenenet\\src\\Lucene.Net\\Lucene.Net.csproj]\r\nIndex\\IndexWriter.cs(37,39): error CS0234: The type or namespace name 'Constants' does not exist in the namespace 'Lucene.Net.Util' (are you missing an assembly reference?) [D:\\git\\conniey\\lucenenet\\src\\Lucene.Net\\Lucene.Net.csproj]\r\nIndex\\UpgradeIndexMergePolicy.cs(23,39): error CS0234: The type or namespace name 'Constants' does not exist in the namespace 'Lucene.Net.Util' (are you missing an assembly reference?) [D:\\git\\conniey\\lucenenet\\src\\Lucene.Net\\Lucene.Net.csproj]\r\nStore\\FSDirectory.cs(26,39): error CS0234: The type or namespace name 'Constants' does not exist in the namespace 'Lucene.Net.Util' (are you missing an assembly reference?) [D:\\git\\conniey\\lucenenet\\src\\Lucene.Net\\Lucene.Net.csproj]\r\nStore\\MMapDirectory.cs(26,39): error CS0234: The type or namespace name 'Constants' does not exist in the namespace 'Lucene.Net.Util' (are you missing an assembly reference?) [D:\\git\\conniey\\lucenenet\\src\\Lucene.Net\\Lucene.Net.csproj]\r\nCodecs\\Lucene3x\\TermInfosReader.cs(48,26): error CS0246: The type or namespace name 'DisposableThreadLocal<>' could not be found (are you missing a using directive or an assembly reference?) [D:\\git\\conniey\\lucenenet\\src\\Lucene.Net\\Lucene.Net.csproj]\r\nIndex\\SegmentCoreReaders.cs(70,27): error CS0246: The type or namespace name 'DisposableThreadLocal<>' could not be found (are you missing a using directive or an assembly reference?) [D:\\git\\conniey\\lucenenet\\src\\Lucene.Net\\Lucene.Net.csproj]\r\nIndex\\SegmentCoreReaders.cs(87,27): error CS0246: The type or namespace name 'DisposableThreadLocal<>' could not be found (are you missing a using directive or an assembly reference?) [D:\\git\\conniey\\lucenenet\\src\\Lucene.Net\\Lucene.Net.csproj]\r\nIndex\\SegmentCoreReaders.cs(104,27): error CS0246: The type or namespace name 'DisposableThreadLocal<>' could not be found (are you missing a using directive or an assembly reference?) [D:\\git\\conniey\\lucenenet\\src\\Lucene.Net\\Lucene.Net.csproj]\r\nIndex\\SegmentCoreReaders.cs(72,52): error CS0246: The type or namespace name 'DisposableThreadLocal<>' could not be found (are you missing a using directive or an assembly reference?) [D:\\git\\conniey\\lucenenet\\src\\Lucene.Net\\Lucene.Net.csproj]\r\nIndex\\SegmentCoreReaders.cs(81,60): error CS0115: 'SegmentCoreReaders.AnonymousFieldsReaderLocal.InitialValue()': no suitable method found to override [D:\\git\\conniey\\lucenenet\\src\\Lucene.Net\\Lucene.Net.csproj]\r\nIndex\\SegmentCoreReaders.cs(89,51): error CS0246: The type or namespace name 'DisposableThreadLocal<>' could not be found (are you missing a using directive or an assembly reference?) [D:\\git\\conniey\\lucenenet\\src\\Lucene.Net\\Lucene.Net.csproj]\r\nIndex\\SegmentCoreReaders.cs(98,59): error CS0115: 'SegmentCoreReaders.AnonymousTermVectorsLocal.InitialValue()': no suitable method found to override [D:\\git\\conniey\\lucenenet\\src\\Lucene.Net\\Lucene.Net.csproj]\r\nIndex\\SegmentCoreReaders.cs(106,73): error CS0246: The type or namespace name 'DisposableThreadLocal<>' could not be found (are you missing a using directive or an assembly reference?) [D:\\git\\conniey\\lucenenet\\src\\Lucene.Net\\Lucene.Net.csproj]\r\nIndex\\SegmentCoreReaders.cs(112,69): error CS0115: 'SegmentCoreReaders.DisposableThreadLocalAnonymousInnerClassHelper3.InitialValue()': no suitable method found to override [D:\\git\\conniey\\lucenenet\\src\\Lucene.Net\\Lucene.Net.csproj]\r\nIndex\\SegmentReader.cs(61,27): error CS0246: The type or namespace name 'DisposableThreadLocal<>' could not be found (are you missing a using directive or an assembly reference?) [D:\\git\\conniey\\lucenenet\\src\\Lucene.Net\\Lucene.Net.csproj]\r\nIndex\\SegmentReader.cs(75,27): error CS0246: The type or namespace name 'DisposableThreadLocal<>' could not be found (are you missing a using directive or an assembly reference?) [D:\\git\\conniey\\lucenenet\\src\\Lucene.Net\\Lucene.Net.csproj]\r\nIndex\\SegmentReader.cs(63,72): error CS0246: The type or namespace name 'DisposableThreadLocal<>' could not be found (are you missing a using directive or an assembly reference?) [D:\\git\\conniey\\lucenenet\\src\\Lucene.Net\\Lucene.Net.csproj]\r\nIndex\\SegmentReader.cs(69,69): error CS0115: 'SegmentReader.DisposableThreadLocalAnonymousInnerClassHelper.InitialValue()': no suitable method found to override [D:\\git\\conniey\\lucenenet\\src\\Lucene.Net\\Lucene.Net.csproj]\r\nIndex\\SegmentReader.cs(77,73): error CS0246: The type or namespace name 'DisposableThreadLocal<>' could not be found (are you missing a using directive or an assembly reference?) [D:\\git\\conniey\\lucenenet\\src\\Lucene.Net\\Lucene.Net.csproj]\r\nIndex\\SegmentReader.cs(83,68): error CS0115: 'SegmentReader.DisposableThreadLocalAnonymousInnerClassHelper2.InitialValue()': no suitable method found to override [D:\\git\\conniey\\lucenenet\\src\\Lucene.Net\\Lucene.Net.csproj]\r\nSupport\\Codecs\\DefaultCodecFactory.cs(48,40): error CS0246: The type or namespace name 'NamedServiceFactory<>' could not be found (are you missing a using directive or an assembly reference?) [D:\\git\\conniey\\lucenenet\\src\\Lucene.Net\\Lucene.Net.csproj]\r\nSupport\\Codecs\\DefaultDocValuesFormatFactory.cs(48,50): error CS0246: The type or namespace name 'NamedServiceFactory<>' could not be found (are you missing a using directive or an assembly reference?) [D:\\git\\conniey\\lucenenet\\src\\Lucene.Net\\Lucene.Net.csproj]\r\nSupport\\Codecs\\DefaultPostingsFormatFactory.cs(48,49): error CS0246: The type or namespace name 'NamedServiceFactory<>' could not be found (are you missing a using directive or an assembly reference?) [D:\\git\\conniey\\lucenenet\\src\\Lucene.Net\\Lucene.Net.csproj]\r\nSupport\\StreamUtils.cs(8,25): error CS0246: The type or namespace name 'BinaryFormatter' could not be found (are you missing a using directive or an assembly reference?) [D:\\git\\conniey\\lucenenet\\src\\Lucene.Net\\Lucene.Net.csproj]\r\n```\r\n\r\n**Version info**\r\n\r\n.NET Command Line Tools (1.0.0)\r\n\r\nProduct Information:\r\n Version:            1.0.0\r\n Commit SHA-1 hash:  e53429feb4\r\n\r\nRuntime Environment:\r\n OS Name:     Windows\r\n OS Version:  10.0.15063\r\n OS Platform: Windows\r\n RID:         win10-x64\r\n Base Path:   C:\\Program Files\\dotnet\\sdk\\1.0.0\r\n\r\n\r\n\n\n_Copied from original issue: dotnet/sdk#1074_",
  "state": "CLOSED",
  "createdAt": "2017-05-23T22:36:48Z",
  "updatedAt": "2024-02-21T17:18:56Z",
  "closedAt": "2017-06-23T22:14:02Z",
  "author": {
    "login": "rainersigwald"
  },
  "labels": [
    "triaged"
  ],
  "assignees": {
    "nodes": []
  },
  "milestone": {
    "title": "MSBuild 15.3"
  },
  "comments": {
    "nodes": [
      {
        "body": "_From @conniey on April 7, 2017 1:26_\n\nHere are those diagnostic build logs you asked for:\r\n* [.NET 4.5.1](https://github.com/dotnet/sdk/files/904298/build.net451.txt)\r\n* [.NETStandard 1.6](https://github.com/dotnet/sdk/files/904299/build.netstandard1.6.txt)\r\n",
        "createdAt": "2017-05-23T22:36:49Z",
        "updatedAt": "2017-05-23T22:36:49Z",
        "author": {
          "login": "rainersigwald"
        }
      },
      {
        "body": "_From @conniey on April 7, 2017 18:1_\n\n@livarcocc \r\nI am able to get it to build if I manually expand the files in the [Compile Remove ItemGroup](https://github.com/conniey/lucenenet/blob/vs2017/src/Lucene.Net/Lucene.Net.csproj#L44-L46).\r\n\r\n### Working\r\n```\r\n  <ItemGroup Condition=\" '$(TargetFramework)' == 'netstandard1.6' \">\r\n    <Compile Remove=\"Index/ConcurrentMergeScheduler.cs\"/>\r\n    <Compile Remove=\"Support/Deflater.cs\"/>\r\n    <Compile Remove=\"Support/Inflater.cs\"/>\r\n    <Compile Remove=\"Support/SharpZipLib.cs\"/>\r\n    <Compile Remove=\"Support/StreamUtils.cs\"/>\r\n  </ItemGroup>\r\n```",
        "createdAt": "2017-05-23T22:36:49Z",
        "updatedAt": "2017-05-23T22:36:49Z",
        "author": {
          "login": "rainersigwald"
        }
      },
      {
        "body": "_From @dsplaisted on May 22, 2017 21:11_\n\nThis looks like an MSBuild bug...",
        "createdAt": "2017-05-23T22:36:50Z",
        "updatedAt": "2017-05-23T22:36:50Z",
        "author": {
          "login": "rainersigwald"
        }
      },
      {
        "body": "I wonder if this is another instance of #2069. @cdmihai, do you think it's related?",
        "createdAt": "2017-06-07T15:32:44Z",
        "updatedAt": "2017-06-07T15:32:44Z",
        "author": {
          "login": "rainersigwald"
        }
      },
      {
        "body": "At face value it might very well be #2069.\r\nI tried to build it with local bits but restore fails for me. I have CLI 1.0.4. Am I doing something wrong?\r\n\r\n```\r\nD:\\projects\\tests\\projects\\lucenenet>dotnet restore Lucene.Net.Portable.sln\r\nD:\\projects\\tests\\projects\\lucenenet\\src\\Lucene.Net.Core\\Lucene.Net.xproj(7,3): error MSB4019: The imported project \"C:\\Program Files\\dotnet\\sdk\\1.0.4\\Microsoft\\VisualStudio\\v15.0\\DotNet\\Microsoft.DotNet.Props\" was not found. Confirm that the path in the <Import> declaration is correct, and that the file exists on disk.\r\nD:\\projects\\tests\\projects\\lucenenet\\src\\Lucene.Net.Classification\\Lucene.Net.Classification.xproj(7,3): error MSB4019: The imported project \"C:\\Program Files\\dotnet\\sdk\\1.0.4\\Microsoft\\VisualStudio\\v15.0\\DotNet\\Microsoft.DotNet.Props\" was not found. Confirm that the path in the <Import> declaration is correct, and that the file exists on disk.\r\nD:\\projects\\tests\\projects\\lucenenet\\src\\Lucene.Net.Facet\\Lucene.Net.Facet.xproj(7,3): error MSB4019: The imported project \"C:\\Program Files\\dotnet\\sdk\\1.0.4\\Microsoft\\VisualStudio\\v15.0\\DotNet\\Microsoft.DotNet.Props\" was not found. Confirm that the path in the <Import> declaration is correct, and that the file exists on disk.\r\nD:\\projects\\tests\\projects\\lucenenet\\src\\Lucene.Net.Grouping\\Lucene.Net.Grouping.xproj(7,3): error MSB4019: The imported project \"C:\\Program Files\\dotnet\\sdk\\1.0.4\\Microsoft\\VisualStudio\\v15.0\\DotNet\\Microsoft.DotNet.Props\" was not found. Confirm that the path in the <Import> declaration is correct, and that the file exists on disk.\r\nD:\\projects\\tests\\projects\\lucenenet\\src\\Lucene.Net.Queries\\Lucene.Net.Queries.xproj(7,3): error MSB4019: The imported project \"C:\\Program Files\\dotnet\\sdk\\1.0.4\\Microsoft\\VisualStudio\\v15.0\\DotNet\\Microsoft.DotNet.Props\" was not found. Confirm that the path in the <Import> declaration is correct, and that the file exists on disk.\r\nD:\\projects\\tests\\projects\\lucenenet\\src\\Lucene.Net.Analysis.Common\\Lucene.Net.Analysis.Common.xproj(7,3): error MSB4019: The imported project \"C:\\Program Files\\dotnet\\sdk\\1.0.4\\Microsoft\\VisualStudio\\v15.0\\DotNet\\Microsoft.DotNet.Props\" was not found. Confirm that the path in the <Import> declaration is correct, and that the file exists on disk.\r\nD:\\projects\\tests\\projects\\lucenenet\\src\\Lucene.Net.TestFramework\\Lucene.Net.TestFramework.xproj(7,3): error MSB4019: The imported project \"C:\\Program Files\\dotnet\\sdk\\1.0.4\\Microsoft\\VisualStudio\\v15.0\\DotNet\\Microsoft.DotNet.Props\" was not found. Confirm that the path in the <Import> declaration is correct, and that the file exists on disk.\r\nD:\\projects\\tests\\projects\\lucenenet\\src\\Lucene.Net.Join\\Lucene.Net.Join.xproj(7,3): error MSB4019: The imported project \"C:\\Program Files\\dotnet\\sdk\\1.0.4\\Microsoft\\VisualStudio\\v15.0\\DotNet\\Microsoft.DotNet.Props\" was not found. Confirm that the path in the <Import> declaration is correct, and that the file exists on disk.\r\nD:\\projects\\tests\\projects\\lucenenet\\src\\Lucene.Net.Codecs\\Lucene.Net.Codecs.xproj(7,3): error MSB4019: The imported project \"C:\\Program Files\\dotnet\\sdk\\1.0.4\\Microsoft\\VisualStudio\\v15.0\\DotNet\\Microsoft.DotNet.Props\" was not found. Confirm that the path in the <Import> declaration is correct, and that the file exists on disk.\r\nD:\\projects\\tests\\projects\\lucenenet\\src\\Lucene.Net.Expressions\\Lucene.Net.Expressions.xproj(7,3): error MSB4019: The imported project \"C:\\Program Files\\dotnet\\sdk\\1.0.4\\Microsoft\\VisualStudio\\v15.0\\DotNet\\Microsoft.DotNet.Props\" was not found. Confirm that the path in the <Import> declaration is correct, and that the file exists on disk.\r\nD:\\projects\\tests\\projects\\lucenenet\\src\\Lucene.Net.Tests\\Lucene.Net.Tests.xproj(7,3): error MSB4019: The imported project \"C:\\Program Files\\dotnet\\sdk\\1.0.4\\Microsoft\\VisualStudio\\v15.0\\DotNet\\Microsoft.DotNet.Props\" was not found. Confirm that the path in the <Import> declaration is correct, and that the file exists on disk.\r\nD:\\projects\\tests\\projects\\lucenenet\\src\\Lucene.Net.Tests.Analysis.Common\\Lucene.Net.Tests.Analysis.Common.xproj(7,3): error MSB4019: The imported project \"C:\\Program Files\\dotnet\\sdk\\1.0.4\\Microsoft\\VisualStudio\\v15.0\\DotNet\\Microsoft.DotNet.Props\" was not found. Confirm that the path in the <Import> declaration is correct, and that the file exists on disk.\r\nD:\\projects\\tests\\projects\\lucenenet\\src\\Lucene.Net.Tests.Classification\\Lucene.Net.Tests.Classification.xproj(7,3): error MSB4019: The imported project \"C:\\Program Files\\dotnet\\sdk\\1.0.4\\Microsoft\\VisualStudio\\v15.0\\DotNet\\Microsoft.DotNet.Props\" was not found. Confirm that the path in the <Import> declaration is correct, and that the file exists on disk.\r\nD:\\projects\\tests\\projects\\lucenenet\\src\\Lucene.Net.Tests.Codecs\\Lucene.Net.Tests.Codecs.xproj(7,3): error MSB4019: The imported project \"C:\\Program Files\\dotnet\\sdk\\1.0.4\\Microsoft\\VisualStudio\\v15.0\\DotNet\\Microsoft.DotNet.Props\" was not found. Confirm that the path in the <Import> declaration is correct, and that the file exists on disk.\r\nD:\\projects\\tests\\projects\\lucenenet\\src\\Lucene.Net.Tests.Expressions\\Lucene.Net.Tests.Expressions.xproj(7,3): error MSB4019: The imported project \"C:\\Program Files\\dotnet\\sdk\\1.0.4\\Microsoft\\VisualStudio\\v15.0\\DotNet\\Microsoft.DotNet.Props\" was not found. Confirm that the path in the <Import> declaration is correct, and that the file exists on disk.\r\nD:\\projects\\tests\\projects\\lucenenet\\src\\Lucene.Net.Tests.Facet\\Lucene.Net.Tests.Facet.xproj(7,3): error MSB4019: The imported project \"C:\\Program Files\\dotnet\\sdk\\1.0.4\\Microsoft\\VisualStudio\\v15.0\\DotNet\\Microsoft.DotNet.Props\" was not found. Confirm that the path in the <Import> declaration is correct, and that the file exists on disk.\r\nD:\\projects\\tests\\projects\\lucenenet\\src\\Lucene.Net.Tests.Join\\Lucene.Net.Tests.Join.xproj(7,3): error MSB4019: The imported project \"C:\\Program Files\\dotnet\\sdk\\1.0.4\\Microsoft\\VisualStudio\\v15.0\\DotNet\\Microsoft.DotNet.Props\" was not found. Confirm that the path in the <Import> declaration is correct, and that the file exists on disk.\r\nD:\\projects\\tests\\projects\\lucenenet\\src\\Lucene.Net.Tests.Queries\\Lucene.Net.Tests.Queries.xproj(7,3): error MSB4019: The imported project \"C:\\Program Files\\dotnet\\sdk\\1.0.4\\Microsoft\\VisualStudio\\v15.0\\DotNet\\Microsoft.DotNet.Props\" was not found. Confirm that the path in the <Import> declaration is correct, and that the file exists on disk.\r\nD:\\projects\\tests\\projects\\lucenenet\\src\\Lucene.Net.Memory\\Lucene.Net.Memory.xproj(7,3): error MSB4019: The imported project \"C:\\Program Files\\dotnet\\sdk\\1.0.4\\Microsoft\\VisualStudio\\v15.0\\DotNet\\Microsoft.DotNet.Props\" was not found. Confirm that the path in the <Import> declaration is correct, and that the file exists on disk.\r\nD:\\projects\\tests\\projects\\lucenenet\\src\\Lucene.Net.Misc\\Lucene.Net.Misc.xproj(7,3): error MSB4019: The imported project \"C:\\Program Files\\dotnet\\sdk\\1.0.4\\Microsoft\\VisualStudio\\v15.0\\DotNet\\Microsoft.DotNet.Props\" was not found. Confirm that the path in the <Import> declaration is correct, and that the file exists on disk.\r\nD:\\projects\\tests\\projects\\lucenenet\\src\\Lucene.Net.QueryParser\\Lucene.Net.QueryParser.xproj(7,3): error MSB4019: The imported project \"C:\\Program Files\\dotnet\\sdk\\1.0.4\\Microsoft\\VisualStudio\\v15.0\\DotNet\\Microsoft.DotNet.Props\" was not found. Confirm that the path in the <Import> declaration is correct, and that the file exists on disk.\r\nD:\\projects\\tests\\projects\\lucenenet\\src\\Lucene.Net.Suggest\\Lucene.Net.Suggest.xproj(7,3): error MSB4019: The imported project \"C:\\Program Files\\dotnet\\sdk\\1.0.4\\Microsoft\\VisualStudio\\v15.0\\DotNet\\Microsoft.DotNet.Props\" was not found. Confirm that the path in the <Import> declaration is correct, and that the file exists on disk.\r\nD:\\projects\\tests\\projects\\lucenenet\\src\\Lucene.Net.Tests.Memory\\Lucene.Net.Tests.Memory.xproj(7,3): error MSB4019: The imported project \"C:\\Program Files\\dotnet\\sdk\\1.0.4\\Microsoft\\VisualStudio\\v15.0\\DotNet\\Microsoft.DotNet.Props\" was not found. Confirm that the path in the <Import> declaration is correct, and that the file exists on disk.\r\nD:\\projects\\tests\\projects\\lucenenet\\src\\Lucene.Net.Tests.Misc\\Lucene.Net.Tests.Misc.xproj(7,3): error MSB4019: The imported project \"C:\\Program Files\\dotnet\\sdk\\1.0.4\\Microsoft\\VisualStudio\\v15.0\\DotNet\\Microsoft.DotNet.Props\" was not found. Confirm that the path in the <Import> declaration is correct, and that the file exists on disk.\r\nD:\\projects\\tests\\projects\\lucenenet\\src\\Lucene.Net.Tests.QueryParser\\Lucene.Net.Tests.QueryParser.xproj(7,3): error MSB4019: The imported project \"C:\\Program Files\\dotnet\\sdk\\1.0.4\\Microsoft\\VisualStudio\\v15.0\\DotNet\\Microsoft.DotNet.Props\" was not found. Confirm that the path in the <Import> declaration is correct, and that the file exists on disk.\r\nD:\\projects\\tests\\projects\\lucenenet\\src\\Lucene.Net.Tests.Suggest\\Lucene.Net.Tests.Suggest.xproj(7,3): error MSB4019: The imported project \"C:\\Program Files\\dotnet\\sdk\\1.0.4\\Microsoft\\VisualStudio\\v15.0\\DotNet\\Microsoft.DotNet.Props\" was not found. Confirm that the path in the <Import> declaration is correct, and that the file exists on disk.\r\nD:\\projects\\tests\\projects\\lucenenet\\src\\Lucene.Net.Analysis.Stempel\\Lucene.Net.Analysis.Stempel.xproj(7,3): error MSB4019: The imported project \"C:\\Program Files\\dotnet\\sdk\\1.0.4\\Microsoft\\VisualStudio\\v15.0\\DotNet\\Microsoft.DotNet.Props\" was not found. Confirm that the path in the <Import> declaration is correct, and that the file exists on disk.\r\nD:\\projects\\tests\\projects\\lucenenet\\src\\Lucene.Net.Tests.Analysis.Stempel\\Lucene.Net.Tests.Analysis.Stempel.xproj(7,3): error MSB4019: The imported project \"C:\\Program Files\\dotnet\\sdk\\1.0.4\\Microsoft\\VisualStudio\\v15.0\\DotNet\\Microsoft.DotNet.Props\" was not found. Confirm that the path in the <Import> declaration is correct, and that the file exists on disk.\r\nD:\\projects\\tests\\projects\\lucenenet\\src\\Lucene.Net.Tests.Grouping\\Lucene.Net.Tests.Grouping.xproj(7,3): error MSB4019: The imported project \"C:\\Program Files\\dotnet\\sdk\\1.0.4\\Microsoft\\VisualStudio\\v15.0\\DotNet\\Microsoft.DotNet.Props\" was not found. Confirm that the path in the <Import> declaration is correct, and that the file exists on disk.\r\nD:\\projects\\tests\\projects\\lucenenet\\src\\Lucene.Net.Spatial\\Lucene.Net.Spatial.xproj(7,3): error MSB4019: The imported project \"C:\\Program Files\\dotnet\\sdk\\1.0.4\\Microsoft\\VisualStudio\\v15.0\\DotNet\\Microsoft.DotNet.Props\" was not found. Confirm that the path in the <Import> declaration is correct, and that the file exists on disk.\r\nD:\\projects\\tests\\projects\\lucenenet\\src\\Lucene.Net.Tests.Spatial\\Lucene.Net.Tests.Spatial.xproj(7,3): error MSB4019: The imported project \"C:\\Program Files\\dotnet\\sdk\\1.0.4\\Microsoft\\VisualStudio\\v15.0\\DotNet\\Microsoft.DotNet.Props\" was not found. Confirm that the path in the <Import> declaration is correct, and that the file exists on disk.\r\nD:\\projects\\tests\\projects\\lucenenet\\src\\Lucene.Net.Sandbox\\Lucene.Net.Sandbox.xproj(7,3): error MSB4019: The imported project \"C:\\Program Files\\dotnet\\sdk\\1.0.4\\Microsoft\\VisualStudio\\v15.0\\DotNet\\Microsoft.DotNet.Props\" was not found. Confirm that the path in the <Import> declaration is correct, and that the file exists on disk.\r\nD:\\projects\\tests\\projects\\lucenenet\\src\\Lucene.Net.Tests.Sandbox\\Lucene.Net.Tests.Sandbox.xproj(7,3): error MSB4019: The imported project \"C:\\Program Files\\dotnet\\sdk\\1.0.4\\Microsoft\\VisualStudio\\v15.0\\DotNet\\Microsoft.DotNet.Props\" was not found. Confirm that the path in the <Import> declaration is correct, and that the file exists on disk.\r\nC:\\Program Files\\dotnet\\sdk\\1.0.4\\NuGet.targets(97,5): warning : Unable to find a project to restore! [D:\\projects\\tests\\projects\\lucenenet\\Lucene.Net.Portable.sln]\r\n```",
        "createdAt": "2017-06-07T16:57:09Z",
        "updatedAt": "2017-06-07T16:58:15Z",
        "author": {
          "login": "cdmihai"
        }
      },
      {
        "body": "I noticed that those projects are `.xprojs` did you checkout the correct branch `vs2017`?",
        "createdAt": "2017-06-07T17:51:30Z",
        "updatedAt": "2017-06-07T17:51:30Z",
        "author": {
          "login": "conniey"
        }
      },
      {
        "body": "I can build without errors using\r\n\r\n```\r\nS:\\work\\lucenenet\\src\\Lucene.Net>dotnet --info\r\n.NET Command Line Tools (2.0.0-preview2-006479)\r\n\r\nProduct Information:\r\n Version:            2.0.0-preview2-006479\r\n Commit SHA-1 hash:  5616284dd7\r\n\r\nRuntime Environment:\r\n OS Name:     Windows\r\n OS Version:  10.0.15063\r\n OS Platform: Windows\r\n RID:         win10-x64\r\n Base Path:   C:\\Program Files\\dotnet\\sdk\\2.0.0-preview2-006479\\\r\n\r\nMicrosoft .NET Core Shared Framework Host\r\n\r\n  Version  : 2.0.0-preview2-25407-01\r\n  Build    : 40c565230930ead58a50719c0ec799df77bddee9\r\n\r\n\r\nS:\\work\\lucenenet\\src\\Lucene.Net>dotnet msbuild /version\r\nMicrosoft (R) Build Engine version 15.3.388.41745 for .NET Core\r\nCopyright (C) Microsoft Corporation. All rights reserved.\r\n\r\n15.3.388.41745\r\n```\r\n\r\nSo I'm pretty sure this is indeed #2069. Please let us know if you see problems with a 2.0-preview2 or higher SDK (coming soon in \"official\" release but available as daily builds now).",
        "createdAt": "2017-06-23T22:14:02Z",
        "updatedAt": "2017-06-23T22:14:02Z",
        "author": {
          "login": "rainersigwald"
        }
      }
    ]
  }
}