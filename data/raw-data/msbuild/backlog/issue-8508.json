{
  "number": 8508,
  "title": "[Unhandled Exception]: System.NullReferenceException: Object reference not set to an instance of an object.",
  "body": "### Issue Description\n\nBuilding dotnet/runtime in mcr.microsoft.com/dotnet-buildtools/prereqs:ubuntu-18.04-helix-arm64v8 docker image. `.dotnet/dotnet tool restore --verbosity detailed` fails with the bellow mentioned exception.\n\n### Steps to Reproduce\n\nCall `.dotnet/dotnet tool restore --verbosity detailed` from dotnet/runtime repo in mcr.microsoft.com/dotnet-buildtools/prereqs:ubuntu-18.04-helix-arm64v8 docker image.\n\n### Actual Behavior\n\n```\r\n \"/tmp/16709218-9a96-4354-9104-10fa6462350d/restore.csproj\" (Restore target) (1) ->\r\n         MSBUILD : error : This is an unhandled exception in MSBuild -- PLEASE UPVOTE AN EXISTING ISSUE OR FILE A NEW ONE AT https://aka.ms/msbuild/unhandled. [/tmp/16709218-9a96-4354-9104-10fa6462350d/restore.csproj]\r\n       MSBUILD : error :     System.NullReferenceException: Object reference not set to an instance of an object. [/tmp/16709218-9a96-4354-9104-10fa6462350d/restore.csproj]\r\n       MSBUILD : error :    at Regex1_Scan(RegexRunner, ReadOnlySpan`1) [/tmp/16709218-9a96-4354-9104-10fa6462350d/restore.csproj]\r\n       MSBUILD : error :    at System.Text.RegularExpressions.Regex.ScanInternal(RegexRunnerMode mode, Boolean reuseMatchObject, String input, Int32 beginning, RegexRunner runner, ReadOnlySpan`1 span, Boolean returnNullIfReuseMatchObject) [/tmp/16709218-9a96-4354-9104-10fa6462350d/restore.csproj]\r\n       MSBUILD : error :    at System.Text.RegularExpressions.Regex.RunAllMatchesWithCallback[TState](String inputString, ReadOnlySpan`1 inputSpan, Int32 startat, TState& state, MatchCallback`1 callback, RegexRunnerMode mode, Boolean reuseMatchObject) [/tmp/16709218-9a96-4354-9104-10fa6462350d/restore.csproj]\r\n       MSBUILD : error :    at System.Text.RegularExpressions.Regex.RunAllMatchesWithCallback[TState](String input, Int32 startat, TState& state, MatchCallback`1 callback, RegexRunnerMode mode, Boolean reuseMatchObject) [/tmp/16709218-9a96-4354-9104-10fa6462350d/restore.csproj]\r\n       MSBUILD : error :    at System.Text.RegularExpressions.Regex.Replace(MatchEvaluator evaluator, Regex regex, String input, Int32 count, Int32 startat) [/tmp/16709218-9a96-4354-9104-10fa6462350d/restore.csproj]\r\n       MSBUILD : error :    at Microsoft.Build.Evaluation.Expander`2.ItemExpander.IntrinsicItemFunctions`1.ExpandQuotedExpressionFunction(Expander`2 expander, IElementLocation elementLocation, Boolean includeNullEntries, String functionName, IEnumerable`1 itemsOfType, String[] arguments)+MoveNext() [/tmp/16709218-9a96-4354-9104-10fa6462350d/restore.csproj]\r\n       MSBUILD : error :    at Microsoft.Build.Evaluation.Expander`2.ItemExpander.Transform[S](Expander`2 expander, Boolean includeNullEntries, Stack`1 transformFunctionStack, IEnumerable`1 itemsOfType)+MoveNext() [/tmp/16709218-9a96-4354-9104-10fa6462350d/restore.csproj]\r\n       MSBUILD : error :    at Microsoft.Build.Evaluation.Expander`2.ItemExpander.Transform[S](Expander`2 expander, Boolean includeNullEntries, Stack`1 transformFunctionStack, IEnumerable`1 itemsOfType)+MoveNext() [/tmp/16709218-9a96-4354-9104-10fa6462350d/restore.csproj]\r\n       MSBUILD : error :    at Microsoft.Build.Evaluation.Expander`2.ItemExpander.ExpandExpressionCapture[S](Expander`2 expander, ItemExpressionCapture expressionCapture, IItemProvider`1 evaluatedItems, IElementLocation elementLocation, ExpanderOptions options, Boolean includeNullEntries, Boolean& isTransformExpression, List`1& itemsFromCapture) [/tmp/16709218-9a96-4354-9104-10fa6462350d/restore.csproj]\r\n       MSBUILD : error :    at Microsoft.Build.Evaluation.Expander`2.ItemExpander.ExpandExpressionCaptureIntoItems[S,T](ItemExpressionCapture expressionCapture, Expander`2 expander, IItemProvider`1 items, IItemFactory`2 itemFactory, ExpanderOptions options, Boolean includeNullEntries, Boolean& isTransformExpression, IElementLocation elementLocation) [/tmp/16709218-9a96-4354-9104-10fa6462350d/restore.csproj]\r\n       MSBUILD : error :    at Microsoft.Build.Evaluation.LazyItemEvaluator`4.IncludeOperation.SelectItems(Builder listBuilder, ImmutableHashSet`1 globsToIgnore) [/tmp/16709218-9a96-4354-9104-10fa6462350d/restore.csproj]\r\n       MSBUILD : error :    at Microsoft.Build.Evaluation.LazyItemEvaluator`4.LazyItemOperation.ApplyImpl(Builder listBuilder, ImmutableHashSet`1 globsToIgnore) [/tmp/16709218-9a96-4354-9104-10fa6462350d/restore.csproj]\r\n       MSBUILD : error :    at Microsoft.Build.Evaluation.LazyItemEvaluator`4.LazyItemOperation.Apply(Builder listBuilder, ImmutableHashSet`1 globsToIgnore) [/tmp/16709218-9a96-4354-9104-10fa6462350d/restore.csproj]\r\n       MSBUILD : error :    at Microsoft.Build.Evaluation.LazyItemEvaluator`4.LazyItemList.ComputeItems(LazyItemList lazyItemList, ImmutableHashSet`1 globsToIgnore) [/tmp/16709218-9a96-4354-9104-10fa6462350d/restore.csproj]\r\n       MSBUILD : error :    at Microsoft.Build.Evaluation.LazyItemEvaluator`4.LazyItemList.GetItemData(ImmutableHashSet`1 globsToIgnore) [/tmp/16709218-9a96-4354-9104-10fa6462350d/restore.csproj]\r\n       MSBUILD : error :    at System.Linq.Enumerable.SelectManySingleSelectorIterator`2.ToArray() [/tmp/16709218-9a96-4354-9104-10fa6462350d/restore.csproj]\r\n       MSBUILD : error :    at System.Linq.Buffer`1..ctor(IEnumerable`1 source) [/tmp/16709218-9a96-4354-9104-10fa6462350d/restore.csproj]\r\n       MSBUILD : error :    at System.Linq.OrderedEnumerable`1.GetEnumerator()+MoveNext() [/tmp/16709218-9a96-4354-9104-10fa6462350d/restore.csproj]\r\n       MSBUILD : error :    at Microsoft.Build.Evaluation.Evaluator`4.Evaluate() [/tmp/16709218-9a96-4354-9104-10fa6462350d/restore.csproj]\r\n       MSBUILD : error :    at Microsoft.Build.Evaluation.Evaluator`4.Evaluate(IEvaluatorData`4 data, Project project, ProjectRootElement root, ProjectLoadSettings loadSettings, Int32 maxNodeCount, PropertyDictionary`1 environmentProperties, ILoggingService loggingService, IItemFactory`2 itemFactory, IToolsetProvider toolsetProvider, ProjectRootElementCacheBase projectRootElementCache, BuildEventContext buildEventContext, ISdkResolverService sdkResolverService, Int32 submissionId, EvaluationContext evaluationContext, Boolean interactive) [/tmp/16709218-9a96-4354-9104-10fa6462350d/restore.csproj]\r\n       MSBUILD : error :    at Microsoft.Build.Execution.ProjectInstance.Initialize(ProjectRootElement xml, IDictionary`2 globalProperties, String explicitToolsVersion, String explicitSubToolsetVersion, Int32 visualStudioVersionFromSolution, BuildParameters buildParameters, ILoggingService loggingService, BuildEventContext buildEventContext, ISdkResolverService sdkResolverService, Int32 submissionId, Nullable`1 projectLoadSettings, EvaluationContext evaluationContext) [/tmp/16709218-9a96-4354-9104-10fa6462350d/restore.csproj]\r\n       MSBUILD : error :    at Microsoft.Build.Execution.ProjectInstance..ctor(String projectFile, IDictionary`2 globalProperties, String toolsVersion, BuildParameters buildParameters, ILoggingService loggingService, BuildEventContext buildEventContext, ISdkResolverService sdkResolverService, Int32 submissionId, Nullable`1 projectLoadSettings) [/tmp/16709218-9a96-4354-9104-10fa6462350d/restore.csproj]\r\n       MSBUILD : error :    at Microsoft.Build.BackEnd.BuildRequestConfiguration.<>c__DisplayClass61_0.<LoadProjectIntoConfiguration>b__0() [/tmp/16709218-9a96-4354-9104-10fa6462350d/restore.csproj]\r\n       MSBUILD : error :    at Microsoft.Build.BackEnd.BuildRequestConfiguration.InitializeProject(BuildParameters buildParameters, Func`1 loadProjectFromFile) [/tmp/16709218-9a96-4354-9104-10fa6462350d/restore.csproj]\r\n       MSBUILD : error :    at Microsoft.Build.BackEnd.RequestBuilder.BuildProject() [/tmp/16709218-9a96-4354-9104-10fa6462350d/restore.csproj]\r\n       MSBUILD : error :    at Microsoft.Build.BackEnd.RequestBuilder.BuildAndReport() [/tmp/16709218-9a96-4354-9104-10fa6462350d/restore.csproj]\r\n```\n\n### Analysis\n\n_No response_\n\n### Versions & Configurations\n\n_No response_",
  "state": "CLOSED",
  "createdAt": "2023-02-28T16:29:41Z",
  "updatedAt": "2023-02-28T16:59:37Z",
  "closedAt": "2023-02-28T16:59:37Z",
  "author": {
    "login": "ManickaP"
  },
  "labels": [
    "bug",
    "needs-triage"
  ],
  "assignees": {
    "nodes": []
  },
  "milestone": null,
  "comments": {
    "nodes": [
      {
        "body": "Thanks for the report! This is dotnet/runtime#78340 which is likely rooted to https://gitlab.com/qemu-project/qemu/-/issues/249.",
        "createdAt": "2023-02-28T16:41:59Z",
        "updatedAt": "2023-02-28T16:41:59Z",
        "author": {
          "login": "rainersigwald"
        }
      },
      {
        "body": "Yeah that looks like it. Feel free to close this then. Thank you.",
        "createdAt": "2023-02-28T16:58:41Z",
        "updatedAt": "2023-02-28T16:58:41Z",
        "author": {
          "login": "ManickaP"
        }
      }
    ]
  }
}