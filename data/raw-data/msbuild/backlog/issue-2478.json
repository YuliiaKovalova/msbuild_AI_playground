{
  "number": 2478,
  "title": "Found conflicts between different versions of the same dependent assembly that could not be resolved.",
  "body": "my project is on top of .NET Core (1.0.4). when I build solution (it consist four projects) using dotnet `build command` I get following warnings:\r\n```\r\nMicrosoft (R) Build Engine version 15.1.1012.6693\r\nCopyright (C) Microsoft Corporation. All rights reserved.\r\n\r\n  MyProject.Domain -> /Users/sirwan/Documents/Projects/MyProject/src/MyProject.Domain/bin/Debug/netcoreapp1.1/MyProject.Domain.dll\r\n/usr/local/share/dotnet/sdk/1.0.4/Microsoft.Common.CurrentVersion.targets(1964,5): warning MSB3277: Found conflicts between different versions of the same dependent assembly that could not be resolved.  These reference conflicts are listed in the build log when log verbosity is set to detailed. [/Users/sirwan/Documents/Projects/MyProject/src/MyProject.Core/MyProject.Core.csproj]\r\n  MyProject.Core -> /Users/sirwan/Documents/Projects/MyProject/src/MyProject.Core/bin/Debug/netcoreapp1.1/MyProject.Core.dll\r\n/usr/local/share/dotnet/sdk/1.0.4/Microsoft.Common.CurrentVersion.targets(1964,5): warning MSB3277: Found conflicts between different versions of the same dependent assembly that could not be resolved.  These reference conflicts are listed in the build log when log verbosity is set to detailed. [/Users/sirwan/Documents/Projects/MyProject/test/MyProject.Test/MyProject.Test.csproj]\r\n  MyProject.Test -> /Users/sirwan/Documents/Projects/MyProject/test/MyProject.Test/bin/Debug/netcoreapp1.1/MyProject.Test.dll\r\n/usr/local/share/dotnet/sdk/1.0.4/Microsoft.Common.CurrentVersion.targets(1964,5): warning MSB3277: Found conflicts between different versions of the same dependent assembly that could not be resolved.  These reference conflicts are listed in the build log when log verbosity is set to detailed. [/Users/sirwan/Documents/Projects/MyProject/src/MyProject.Web/MyProject.Web.csproj]\r\n  MyProject.Web -> /Users/sirwan/Documents/Projects/MyProject/src/MyProject.Web/bin/Debug/netcoreapp1.1/MyProject.Web.dll\r\n\r\nBuild succeeded.\r\n\r\n/usr/local/share/dotnet/sdk/1.0.4/Microsoft.Common.CurrentVersion.targets(1964,5): warning MSB3277: Found conflicts between different versions of the same dependent assembly that could not be resolved.  These reference conflicts are listed in the build log when log verbosity is set to detailed. [/Users/sirwan/Documents/Projects/MyProject/src/MyProject.Core/MyProject.Core.csproj]\r\n/usr/local/share/dotnet/sdk/1.0.4/Microsoft.Common.CurrentVersion.targets(1964,5): warning MSB3277: Found conflicts between different versions of the same dependent assembly that could not be resolved.  These reference conflicts are listed in the build log when log verbosity is set to detailed. [/Users/sirwan/Documents/Projects/MyProject/test/MyProject.Test/MyProject.Test.csproj]\r\n/usr/local/share/dotnet/sdk/1.0.4/Microsoft.Common.CurrentVersion.targets(1964,5): warning MSB3277: Found conflicts between different versions of the same dependent assembly that could not be resolved.  These reference conflicts are listed in the build log when log verbosity is set to detailed. [/Users/sirwan/Documents/Projects/MyProject/src/MyProject.Web/MyProject.Web.csproj]\r\n    3 Warning(s)\r\n    0 Error(s)\r\n\r\nTime Elapsed 00:00:16.69\r\n```\r\n\r\nI am wondering how t get rid of these warning messages. any idea?\r\n\r\nPS: Here is the `csproj` files:\r\n**MyProject.Core:**\r\n```\r\n<Project Sdk=\"Microsoft.NET.Sdk\">\r\n  <PropertyGroup>\r\n    <TargetFramework>netcoreapp1.1</TargetFramework>\r\n    <AssemblyName>MyProject.Core</AssemblyName>\r\n    <PackageId>MyProject.Core</PackageId>\r\n    <GenerateAssemblyConfigurationAttribute>false</GenerateAssemblyConfigurationAttribute>\r\n    <GenerateAssemblyCompanyAttribute>false</GenerateAssemblyCompanyAttribute>\r\n    <GenerateAssemblyProductAttribute>false</GenerateAssemblyProductAttribute>\r\n  </PropertyGroup>\r\n  <ItemGroup>\r\n    <ProjectReference Include=\"../MyProject.Domain/MyProject.Domain.csproj\" />\r\n  </ItemGroup>\r\n  <ItemGroup>\r\n    <PackageReference Include=\"LinqKit.Microsoft.EntityFrameworkCore\" Version=\"1.1.10.0\" />\r\n    <PackageReference Include=\"Mailjet.Api\" Version=\"1.0.1\" />\r\n    <PackageReference Include=\"Microsoft.EntityFrameworkCore.InMemory\" Version=\"1.1.1\" />\r\n    <PackageReference Include=\"Microsoft.EntityFrameworkCore.Sqlite\" Version=\"1.1.1\" />\r\n    <PackageReference Include=\"Microsoft.EntityFrameworkCore.SqlServer\" Version=\"1.1.1\" />\r\n    <PackageReference Include=\"Microsoft.Extensions.Configuration.Abstractions\" Version=\"1.1.1\" />\r\n    <PackageReference Include=\"Microsoft.AspNetCore.Mvc.Razor\" Version=\"1.1.1\" />\r\n    <PackageReference Include=\"Microsoft.AspNetCore.Mvc.ViewFeatures\" Version=\"1.1.1\" />\r\n    <PackageReference Include=\"Microsoft.EntityFrameworkCore.Design\" Version=\"1.1.1\">\r\n      <PrivateAssets>All</PrivateAssets>\r\n    </PackageReference>\r\n    <PackageReference Include=\"Microsoft.EntityFrameworkCore.Tools\" Version=\"1.1.0\">\r\n      <PrivateAssets>All</PrivateAssets>\r\n    </PackageReference>\r\n    <PackageReference Include=\"Automapper\" Version=\"5.1.1\" />\r\n    <PackageReference Include=\"iTextSharp.LGPLv2.Core\" Version=\"1.2.3\" />\r\n    <PackageReference Include=\"MailKit\" Version=\"1.10.1\" />\r\n    <PackageReference Include=\"CsvHelper\" Version=\"2.16.3\" />\r\n    <PackageReference Include=\"ImageSharp\" Version=\"1.0.0-alpha9-00187\" />\r\n    <PackageReference Include=\"System.ValueTuple\" Version=\"4.3.1\" />\r\n  </ItemGroup>\r\n  <ItemGroup>\r\n    <DotNetCliToolReference Include=\"Microsoft.EntityFrameworkCore.Tools.DotNet\" Version=\"1.0.0\" />\r\n  </ItemGroup>\r\n</Project>\r\n```\r\n\r\n**MyProject.Domain:**\r\n```\r\n<Project Sdk=\"Microsoft.NET.Sdk\">\r\n  <PropertyGroup>\r\n    <TargetFramework>netcoreapp1.1</TargetFramework>\r\n    <DebugType>portable</DebugType>\r\n    <AssemblyName>MyProject.Domain</AssemblyName>\r\n    <PackageId>MyProject.Domain</PackageId>\r\n    <RuntimeFrameworkVersion>1.1.1</RuntimeFrameworkVersion>\r\n    <GenerateAssemblyConfigurationAttribute>false</GenerateAssemblyConfigurationAttribute>\r\n    <GenerateAssemblyCompanyAttribute>false</GenerateAssemblyCompanyAttribute>\r\n    <GenerateAssemblyProductAttribute>false</GenerateAssemblyProductAttribute>\r\n  </PropertyGroup>\r\n  <ItemGroup>\r\n    <PackageReference Include=\"Microsoft.AspNetCore.Identity.EntityFrameworkCore\" Version=\"1.1.1\" />\r\n    <PackageReference Include=\"System.ValueTuple\" Version=\"4.3.1\" />\r\n  </ItemGroup>\r\n  <ItemGroup>\r\n    <Compile Update=\"Models\\BaseModel.cs\">\r\n      <CopyToOutputDirectory>Always</CopyToOutputDirectory>\r\n    </Compile>\r\n  </ItemGroup>\r\n</Project>\r\n```\r\n\r\n**MyProject.Web:**\r\n```\r\n<Project Sdk=\"Microsoft.NET.Sdk.Web\">\r\n  <PropertyGroup>\r\n    <TargetFramework>netcoreapp1.1</TargetFramework>\r\n    <PreserveCompilationContext>true</PreserveCompilationContext>\r\n    <AssemblyName>MyProject.Web</AssemblyName>\r\n    <OutputType>Exe</OutputType>\r\n    <PackageId>MyProject.Web</PackageId>\r\n    <RuntimeFrameworkVersion>1.1.1</RuntimeFrameworkVersion>\r\n    <PackageTargetFallback>portable-net45+win8</PackageTargetFallback>\r\n  </PropertyGroup>\r\n  <ItemGroup>\r\n    <ProjectReference Include=\"../MyProject.Domain/MyProject.Domain.csproj\" />\r\n    <ProjectReference Include=\"../MyProject.Core/MyProject.Core.csproj\" />\r\n  </ItemGroup>\r\n  <ItemGroup>\r\n    <PackageReference Include=\"LinqKit.Microsoft.EntityFrameworkCore\" Version=\"1.1.10.0\" />\r\n    <PackageReference Include=\"Microsoft.AspNetCore\" Version=\"1.1.1\" />\r\n    <PackageReference Include=\"Microsoft.AspNetCore.Diagnostics\" Version=\"1.1.1\" />\r\n    <PackageReference Include=\"Microsoft.AspNetCore.Mvc\" Version=\"1.1.2\" />\r\n    <PackageReference Include=\"Microsoft.AspNetCore.Server.IISIntegration\" Version=\"1.1.1\" />\r\n    <PackageReference Include=\"Microsoft.AspNetCore.Server.Kestrel\" Version=\"1.1.1\" />\r\n    <PackageReference Include=\"Microsoft.AspNetCore.StaticFiles\" Version=\"1.1.1\" />\r\n    <PackageReference Include=\"Microsoft.AspNetCore.Session\" Version=\"1.1.1\" />\r\n    <PackageReference Include=\"Microsoft.AspNetCore.Http\" Version=\"1.1.1\" />\r\n    <PackageReference Include=\"Microsoft.EntityFrameworkCore.SqlServer.Design\" Version=\"1.1.1\" />\r\n    <PackageReference Include=\"Microsoft.Extensions.Configuration.EnvironmentVariables\" Version=\"1.1.1\" />\r\n    <PackageReference Include=\"Microsoft.Extensions.Configuration.Json\" Version=\"1.1.1\" />\r\n    <PackageReference Include=\"Microsoft.Extensions.Logging\" Version=\"1.1.1\" />\r\n    <PackageReference Include=\"Microsoft.Extensions.Logging.Console\" Version=\"1.1.1\" />\r\n    <PackageReference Include=\"Microsoft.Extensions.Logging.Debug\" Version=\"1.1.1\" />\r\n    <PackageReference Include=\"Microsoft.VisualStudio.Web.CodeGeneration.Design\" Version=\"1.1.0\" />\r\n    <PackageReference Include=\"Serilog.Extensions.Logging.File\" Version=\"1.0.0\" />\r\n    <PackageReference Include=\"Microsoft.VisualStudio.Web.BrowserLink\" Version=\"1.1.0\" />\r\n    <PackageReference Include=\"Microsoft.EntityFrameworkCore.Sqlite\" Version=\"1.1.1\" />\r\n    <PackageReference Include=\"Microsoft.EntityFrameworkCore.SqlServer\" Version=\"1.1.1\" />\r\n    <PackageReference Include=\"Microsoft.EntityFrameworkCore.Design\" Version=\"1.1.1\">\r\n      <PrivateAssets>All</PrivateAssets>\r\n    </PackageReference>\r\n    <PackageReference Include=\"Microsoft.EntityFrameworkCore.Tools\" Version=\"1.1.0\">\r\n      <PrivateAssets>All</PrivateAssets>\r\n    </PackageReference>\r\n    <PackageReference Include=\"Automapper\" Version=\"5.1.1\" />\r\n    <PackageReference Include=\"iTextSharp.LGPLv2.Core\" Version=\"1.2.3\" />\r\n    <PackageReference Include=\"Microsoft.Extensions.Options.ConfigurationExtensions\" Version=\"1.1.1\" />\r\n    <PackageReference Include=\"System.IdentityModel.Tokens.Jwt\" Version=\"5.1.3\" />\r\n    <PackageReference Include=\"Microsoft.AspNetCore.Authentication.JwtBearer\" Version=\"1.1.1\" />\r\n    <PackageReference Include=\"Microsoft.AspNetCore.Identity.EntityFrameworkCore\" Version=\"1.1.1\" />\r\n    <PackageReference Include=\"System.ValueTuple\" Version=\"4.3.1\" />\r\n  </ItemGroup>\r\n  <Target Name=\"PrepublishScript\" BeforeTargets=\"PrepareForPublish\">\r\n    <Exec Command=\"npm install\" />\r\n    <Exec Command=\"bower install\" />\r\n  </Target>\r\n  <ItemGroup>\r\n    <DotNetCliToolReference Include=\"Microsoft.EntityFrameworkCore.Tools.DotNet\" Version=\"1.0.0\" />\r\n    <DotNetCliToolReference Include=\"Microsoft.VisualStudio.Web.CodeGeneration.Tools\" Version=\"1.0.0\" />\r\n  </ItemGroup>\r\n  <ItemGroup>\r\n    <Content Update=\"appsettings.json\" CopyToPublishDirectory=\"Never\" />\r\n  </ItemGroup>\r\n</Project>\r\n```\r\n\r\n**MyProject.Test:**\r\n```\r\n<Project Sdk=\"Microsoft.NET.Sdk\">\r\n  <PropertyGroup>\r\n    <TargetFramework>netcoreapp1.1</TargetFramework>\r\n    <DebugType>portable</DebugType>\r\n    <AssemblyName>MyProject.Test</AssemblyName>\r\n    <PackageId>MyProject.Test</PackageId>\r\n    <GenerateRuntimeConfigurationFiles>true</GenerateRuntimeConfigurationFiles>\r\n    <PackageTargetFallback>$(PackageTargetFallback);dotnet5.4;portable-net451+win8</PackageTargetFallback>\r\n    <RuntimeFrameworkVersion>1.1.1</RuntimeFrameworkVersion>\r\n    <GenerateAssemblyConfigurationAttribute>false</GenerateAssemblyConfigurationAttribute>\r\n    <GenerateAssemblyCompanyAttribute>false</GenerateAssemblyCompanyAttribute>\r\n    <GenerateAssemblyProductAttribute>false</GenerateAssemblyProductAttribute>\r\n  </PropertyGroup>\r\n  <ItemGroup>\r\n    <ProjectReference Include=\"../../src/MyProject.Domain/MyProject.Domain.csproj\" />\r\n    <ProjectReference Include=\"../../src/MyProject.Core/MyProject.Core.csproj\" />\r\n  </ItemGroup>\r\n  <ItemGroup>\r\n    <PackageReference Include=\"Microsoft.EntityFrameworkCore\" Version=\"1.1.1\" />\r\n    <PackageReference Include=\"Microsoft.EntityFrameworkCore.InMemory\" Version=\"1.1.1\" />\r\n    <PackageReference Include=\"Microsoft.Extensions.Configuration.EnvironmentVariables\" Version=\"1.1.1\" />\r\n    <PackageReference Include=\"Microsoft.Extensions.Configuration.Json\" Version=\"1.1.1\" />\r\n    <PackageReference Include=\"Microsoft.NET.Test.Sdk\" Version=\"15.0.0-preview-20170106-08\" />\r\n    <PackageReference Include=\"xunit.runner.visualstudio\" Version=\"2.2.0-beta5-build1225\" />\r\n    <PackageReference Include=\"System.Runtime.Serialization.Primitives\" Version=\"4.3.0\" />\r\n    <PackageReference Include=\"xunit\" Version=\"2.2.0-beta5-build3474\" />\r\n    <PackageReference Include=\"Automapper\" Version=\"5.1.1\" />\r\n    <PackageReference Include=\"Microsoft.AspNetCore.Mvc.Abstractions\" Version=\"1.1.2\" />\r\n    <PackageReference Include=\"Microsoft.AspNetCore.Mvc\" Version=\"1.1.2\" />\r\n    <PackageReference Include=\"Microsoft.DotNet.InternalAbstractions\" Version=\"1.0.0\" />\r\n  </ItemGroup>\r\n</Project>\r\n```",
  "state": "OPEN",
  "createdAt": "2017-08-27T13:17:35Z",
  "updatedAt": "2024-02-21T16:35:55Z",
  "closedAt": null,
  "author": {
    "login": "SirwanAfifi"
  },
  "labels": [
    "triaged"
  ],
  "assignees": {
    "nodes": []
  },
  "milestone": null,
  "comments": {
    "nodes": [
      {
        "body": "any solution for this warning? i am facing in .net core 2.0.2",
        "createdAt": "2018-04-30T09:16:53Z",
        "updatedAt": "2018-04-30T09:16:53Z",
        "author": {
          "login": "A110SHT"
        }
      },
      {
        "body": "+1 same here",
        "createdAt": "2018-06-17T13:12:35Z",
        "updatedAt": "2018-06-17T13:12:35Z",
        "author": {
          "login": "gusarov"
        }
      },
      {
        "body": "same here",
        "createdAt": "2019-05-10T14:30:22Z",
        "updatedAt": "2019-05-10T14:30:22Z",
        "author": {
          "login": "sigmondzavion"
        }
      },
      {
        "body": "same here in 2.2.300",
        "createdAt": "2019-06-19T14:27:34Z",
        "updatedAt": "2019-06-19T14:27:34Z",
        "author": {
          "login": "ecoffman"
        }
      },
      {
        "body": "I'm facing the same issue in .NET Core 3.1.401.\r\n\r\n```\r\n/usr/local/share/dotnet/sdk/3.1.401/Microsoft.Common.CurrentVersion.targets(2084,5): warning MSB3277: Found conflicts between different versions of \"Microsoft.EntityFrameworkCore\" that could not be resolved.  These reference conflicts are listed in the build log when log verbosity is set to detailed. [/Users/stefan/Development/Prototypes/dotnet-migrations-azure-functions/src/Persistence.Migrations/Persistence.Migrations.csproj]\r\n/usr/local/share/dotnet/sdk/3.1.401/Microsoft.Common.CurrentVersion.targets(2084,5): warning MSB3277: Found conflicts between different versions of \"Microsoft.EntityFrameworkCore.Relational\" that could not be resolved.  These reference conflicts are listed in the build log when log verbosity is set to detailed. [/Users/stefan/Development/Prototypes/dotnet-migrations-azure-functions/src/Persistence.Migrations/Persistence.Migrations.csproj]\r\n```\r\n\r\nIf I change the package reference from \r\n\r\n```\r\n<PackageReference Include=\"Microsoft.EntityFrameworkCore.Design\" Version=\"3.1.7\">\r\n    <PrivateAssets>all</PrivateAssets>\r\n    <IncludeAssets>runtime; build; native; contentfiles; analyzers; buildtransitive</IncludeAssets>\r\n</PackageReference>\r\n```\r\nto \r\n\r\n`<PackageReference Include=\"Microsoft.EntityFrameworkCore.Design\" Version=\"3.1.7\" />`\r\n\r\nthe warnings disappear \r\n",
        "createdAt": "2020-08-19T18:43:26Z",
        "updatedAt": "2020-08-19T18:43:26Z",
        "author": {
          "login": "stevo-knievo"
        }
      },
      {
        "body": "thank you, @stevo-knievo! your solution worked for me as well",
        "createdAt": "2020-10-21T05:24:48Z",
        "updatedAt": "2020-10-21T05:24:48Z",
        "author": {
          "login": "alexvenetis"
        }
      },
      {
        "body": "This time I solved it differently :) \r\n\r\nI added the `Microsoft.EntityFrameworkCore.Relational` dependency.\r\n\r\n\r\n```\r\n<PackageReference Include=\"Microsoft.EntityFrameworkCore.Design\" Version=\"3.1.9\">\r\n    <PrivateAssets>all</PrivateAssets>\r\n    <IncludeAssets>runtime; build; native; contentfiles; analyzers; buildtransitive</IncludeAssets>\r\n</PackageReference>\r\n<PackageReference Include=\"Microsoft.EntityFrameworkCore.Relational\" Version=\"3.1.9\" />\r\n```\r\n\r\n.NET Core SDKs installed: 3.1.403\r\n",
        "createdAt": "2020-10-21T16:35:34Z",
        "updatedAt": "2020-10-21T16:35:34Z",
        "author": {
          "login": "stevo-knievo"
        }
      },
      {
        "body": "In my case, the problem appears to occur when a nuget package update is not fully up-to-date.\r\n\r\nIn particular, VBCSCompiler and/or MSBuild.exe lock files that prevent package restore from removing older versions of .NET Framework packages.config restores.\r\n\r\nAnother way this can occur is if you go to \"Manage Packages for this Solution\" and you have only one of your \"Package source:\" selected when you select Update.  You need to make sure that when you Update packages, that you have \"Package source: All\" selected, like below.\r\n\r\n![image](https://user-images.githubusercontent.com/447485/106303539-3e65b980-6228-11eb-864e-0b08a879244f.png)\r\n\r\nOnce your solution is messed up, there are a couple of options\r\n\r\n1. Reset your version control system's current working copy to undo all changes\r\n    * You probably will want to close Visual Studio before doing this, and re-open it once done.\r\n2. Painful solution, described below\r\n\r\nThe painful solution is to:\r\n\r\n1. Close Visual Studio 2019\r\n2. Open Windows Task Manager and kill all instances of `VBCSCompiler` and `MSBuild.exe (32-bit)`\r\n3. Delete all bin directories\r\n4. Delete all obj directories\r\n5. Delete the \"packages\" directory where nuget restores all old-style packages\r\n\r\n\r\nThese first two steps are needed because .NET Framework locks any dll files it loads, and MSBuild.exe is a .NET Framework application.  This will prevent  `Access to the path 'DotNetCompilerPlatformTasks.dll' is denied.` errors in steps 3-5.\r\n\r\nSteps three to five \"clear the cache\", as it were.\r\n\r\nThe next step is to verify that in your legacy App.config and legacy .csproj file that the References point to the right version in the old-style `packages` folder.  Visual Studio \"Find In All Files\" will not find these old version numbers for some reason.",
        "createdAt": "2021-01-29T14:04:47Z",
        "updatedAt": "2021-01-29T17:30:02Z",
        "author": {
          "login": "jzabroski"
        }
      }
    ]
  }
}