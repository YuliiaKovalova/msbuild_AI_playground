{
  "number": 11813,
  "title": "`NullReferenceException` in `ProjectRootElement.LoadDocument`",
  "body": "### Issue Description\n\nBuilding Aspire on MacOS. Worked the second time I tried.\n\n```\n  Aspire.Microsoft.Data.SqlClient failed with 1 error(s) (0.0s)\n    MSBUILD : error : \n      This is an unhandled exception in MSBuild -- PLEASE UPVOTE AN EXISTING ISSUE O\n      R FILE A NEW ONE AT https://aka.ms/msbuild/unhandled\n          System.NullReferenceException: Object reference not set to an instance of \n      an object.\n         at Microsoft.Build.Construction.ProjectRootElement.LoadDocument(String full\n      Path, Boolean preserveFormatting, Boolean loadAsReadOnly)\n         at Microsoft.Build.Construction.ProjectRootElement..ctor(String path, Proje\n      ctRootElementCacheBase projectRootElementCache, Boolean preserveFormatting)\n         at Microsoft.Build.Construction.ProjectRootElement.CreateProjectFromPath(St\n      ring projectFile, ProjectRootElementCacheBase projectRootElementCache, Boolean\n       preserveFormatting)\n         at Microsoft.Build.Evaluation.ProjectRootElementCache.GetOrLoad(String proj\n      ectFile, OpenProjectRootElement loadProjectRootElement, Boolean isExplicitlyLo\n      aded, Nullable`1 preserveFormatting)\n         at Microsoft.Build.Evaluation.ProjectRootElementCache.Get(String projectFil\n      e, OpenProjectRootElement loadProjectRootElement, Boolean isExplicitlyLoaded, \n      Nullable`1 preserveFormatting)\n         at Microsoft.Build.Evaluation.Evaluator`4.ExpandAndLoadImportsFromUnescaped\n      ImportExpression(String directoryOfImportingFile, ProjectImportElement importE\n      lement, String unescapedExpression, Boolean throwOnFileNotExistsError, List`1&\n       imports)\n         at Microsoft.Build.Evaluation.Evaluator`4.ExpandAndLoadImportsFromUnescaped\n      ImportExpressionConditioned(String directoryOfImportingFile, ProjectImportElem\n      ent importElement, List`1& projects, SdkResult& sdkResult)\n         at Microsoft.Build.Evaluation.Evaluator`4.ExpandAndLoadImports(String direc\n      toryOfImportingFile, ProjectImportElement importElement, SdkResult& sdkResult)\n         at Microsoft.Build.Evaluation.Evaluator`4.EvaluateImportElement(String dire\n      ctoryOfImportingFile, ProjectImportElement importElement)\n         at Microsoft.Build.Evaluation.Evaluator`4.PerformDepthFirstPass(ProjectRoot\n      Element currentProjectOrImport)\n         at Microsoft.Build.Evaluation.Evaluator`4.EvaluateImportElement(String dire\n      ctoryOfImportingFile, ProjectImportElement importElement)\n         at Microsoft.Build.Evaluation.Evaluator`4.PerformDepthFirstPass(ProjectRoot\n      Element currentProjectOrImport)\n         at Microsoft.Build.Evaluation.Evaluator`4.EvaluateImportElement(String dire\n      ctoryOfImportingFile, ProjectImportElement importElement)\n         at Microsoft.Build.Evaluation.Evaluator`4.PerformDepthFirstPass(ProjectRoot\n      Element currentProjectOrImport)\n         at Microsoft.Build.Evaluation.Evaluator`4.Evaluate()\n         at Microsoft.Build.Evaluation.Evaluator`4.Evaluate(IEvaluatorData`4 data, P\n      roject project, ProjectRootElement root, ProjectLoadSettings loadSettings, Int\n      32 maxNodeCount, PropertyDictionary`1 environmentProperties, ILoggingService l\n      oggingService, IItemFactory`2 itemFactory, IToolsetProvider toolsetProvider, I\n      DirectoryCacheFactory directoryCacheFactory, ProjectRootElementCacheBase proje\n      ctRootElementCache, BuildEventContext buildEventContext, ISdkResolverService s\n      dkResolverService, Int32 submissionId, EvaluationContext evaluationContext, Bo\n      olean interactive)\n         at Microsoft.Build.Execution.ProjectInstance.Initialize(ProjectRootElement \n      xml, IDictionary`2 globalProperties, String explicitToolsVersion, String expli\n      citSubToolsetVersion, Int32 visualStudioVersionFromSolution, BuildParameters b\n      uildParameters, ILoggingService loggingService, BuildEventContext buildEventCo\n      ntext, ISdkResolverService sdkResolverService, Int32 submissionId, Nullable`1 \n      projectLoadSettings, EvaluationContext evaluationContext, IDirectoryCacheFacto\n      ry directoryCacheFactory)\n         at Microsoft.Build.BackEnd.BuildRequestConfiguration.<>c__DisplayClass61_0.\n      <LoadProjectIntoConfiguration>b__0()\n         at Microsoft.Build.BackEnd.BuildRequestConfiguration.InitializeProject(Buil\n      dParameters buildParameters, Func`1 loadProjectFromFile)\n         at Microsoft.Build.BackEnd.RequestBuilder.BuildProject()\n         at Microsoft.Build.BackEnd.RequestBuilder.RequestThreadProc(Boolean setThre\n      adParameters)\n```\n\n### Steps to Reproduce\n\nCloned https://github.com/dotnet/aspire, `./build.sh`\nCouldn't repro the same error after retrying\n\n### Expected Behavior\n\nSuccess\n\n### Actual Behavior\n\nFailure\n\n### Analysis\n\n_No response_\n\n### Versions & Configurations\n\n_No response_",
  "state": "OPEN",
  "createdAt": "2025-05-08T15:59:32Z",
  "updatedAt": "2025-05-13T13:48:32Z",
  "closedAt": null,
  "author": {
    "login": "sebastienros"
  },
  "milestone": null,
  "assignees": {
    "nodes": []
  },
  "labels": [
    "Priority:2",
    "triaged"
  ],
  "comments": {
    "nodes": []
  }
}