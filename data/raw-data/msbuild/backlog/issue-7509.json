{
  "number": 7509,
  "title": "EmbeddedResource does not update when ResXFileRef file changes",
  "body": "We have a embedded resource:\r\n```\r\n    <EmbeddedResource Include=\"Resources.resx\">\r\n      <Generator>PublicResXFileCodeGenerator</Generator>\r\n      <LastGenOutput>Resources.Designer.cs</LastGenOutput>\r\n      <CustomToolNamespace>Resources</CustomToolNamespace>\r\n    </EmbeddedResource>\r\n ```\r\nThat .resx file references a `r.dat` file. That `r.dat` file is updated correctly. But the `Resources.resources` file is not updated.\r\n```\r\n2> Target CustomDat\r\n2>   r.dat\r\n2>Target CoreResGen:\r\n2>  No resources are out of date with respect to their source files. Skipping resource generation.\r\n```\r\nThis works correctly in .NET Framework.",
  "state": "CLOSED",
  "createdAt": "2022-03-31T14:53:01Z",
  "updatedAt": "2025-03-11T14:56:12Z",
  "closedAt": "2025-03-11T14:56:11Z",
  "author": {
    "login": "petsuter"
  },
  "milestone": null,
  "assignees": {
    "nodes": []
  },
  "labels": [
    "Priority:2",
    "triaged"
  ],
  "comments": {
    "nodes": [
      {
        "body": "Can `CoreResGen` be forced to update `Resources.resources` somehow? Adding `<DependentUpon>r.dat</DependentUpon>` did not help.",
        "createdAt": "2022-03-31T15:07:10Z",
        "author": {
          "login": "petsuter"
        }
      },
      {
        "body": "Based on your log output, I think this is a question for MSBuild. Transferring to that repo.",
        "createdAt": "2022-04-01T03:39:14Z",
        "author": {
          "login": "drewnoakes"
        }
      },
      {
        "body": "Can you provide [binlogs](https://aka.ms/msbuild/binlog) of the working case in .NET Framework and the failing case?",
        "createdAt": "2022-04-14T16:43:54Z",
        "author": {
          "login": "benvillalobos"
        }
      },
      {
        "body": "I face the same problem. The referenced file was updated, but resource file contains old content",
        "createdAt": "2023-10-06T11:50:33Z",
        "author": {
          "login": "suhrab"
        }
      },
      {
        "body": "@suhrab can you provide the logs Ben was asking for above?",
        "createdAt": "2023-10-09T10:58:58Z",
        "author": {
          "login": "drewnoakes"
        }
      },
      {
        "body": "Here is a full minimal solution to reproduce the problem: [ResxTest.zip](https://github.com/dotnet/msbuild/files/13333287/ResxTest.zip)\r\n\r\nIt contains:\r\n* 2 Projects: `WPFCore`, `WPFFramework`\r\n* Same trivial implementation: WPF textbox shows the content of the file `test.bin` via the `Resources.resx` file.\r\n* `test.bin` is generated by editing `test.tt`.\r\n\r\nSteps to reproduce:\r\n* Open Solution in devenv\r\n\r\n* Problem:\r\n\r\n    * Build and run the `WPFCore` project. Some text is shown. (E.g. `hello Core: 1`)\r\n    * Edit `WPFCore\\test.tt` to some different text. (E.g. `hello Core: 2`)\r\n    * Build and run `WPFCore` again. The same old text (E.g. `hello Core: 1`) is still there. **This is wrong.**\r\n\r\n* Not a problem:\r\n\r\n    * Build and run the `WPFFramework` project. Some text is shown. (E.g. `hello Framework: 1`)\r\n    * Edit `WPFFramework\\test.tt` to some different text. (E.g. `hello Framework: 2`)\r\n    * Build and run `WPFFramework` again. The new text (E.g. `hello Framework: 2`) is shown. This is correct.\r\n\r\nHere are the requested binlogs of that: [msbuild_logs.zip](https://github.com/dotnet/msbuild/files/13333347/msbuild_logs.zip)\r\n",
        "createdAt": "2023-11-13T09:38:16Z",
        "author": {
          "login": "petsuter"
        }
      },
      {
        "body": "I have the same problem. Did anyone find a solution for this problem?",
        "createdAt": "2024-05-18T10:42:42Z",
        "author": {
          "login": "janssenr"
        }
      },
      {
        "body": "\n@petsuter   You need to set test.tt Build Action as Embedded resource by right click properties. \nAnd add `<GenerateResourceUsePreserializedResources>false</GenerateResourceUsePreserializedResources>` in project \n\n```\n<ItemGroup>\n    <EmbeddedResource Include=\"test.tt\">\n      <Generator>TextTemplatingFileGenerator</Generator>\n      <LastGenOutput>test.bin</LastGenOutput>\n    </EmbeddedResource>\n  </ItemGroup>\n```",
        "createdAt": "2025-02-21T06:54:39Z",
        "author": {
          "login": "JaynieBai"
        }
      },
      {
        "body": "Close with no response from the customer.\nFeel free to reopen if the issue is still relevant to you.",
        "createdAt": "2025-03-11T14:56:11Z",
        "author": {
          "login": "YuliiaKovalova"
        }
      }
    ]
  }
}