{
  "number": 8588,
  "title": "Don't build a solution when -preprocess or -targets is passed on the command line",
  "body": "Fixes #7697 (Partially)\r\n\r\n### Context\r\nThe -preprocess or -targets options are not supported for .sln files and, when these options are supplied, the .sln is built.\r\n\r\nWith this change the .sln will not be built.\r\n\r\n### Changes Made\r\nRe-worked logic for handling the -preprocess or -targets options.\r\n\r\n### Testing\r\nTested on Windows 11 and macOS 12\r\n\r\nTested building and running unit tests and 'live' tested running MSBuild against a solution (.sln) file with the options.\r\n\r\n### Notes\r\nImplementing -preprocess and -targets for solution files will be a separate PR.",
  "state": "MERGED",
  "createdAt": "2023-03-22T15:45:38Z",
  "updatedAt": "2023-04-07T20:37:37Z",
  "closedAt": "2023-04-07T19:15:32Z",
  "mergedAt": "2023-04-07T19:15:32Z",
  "additions": 105,
  "deletions": 13,
  "changedFiles": 15,
  "headRefName": "Solution-Targets-Dont-Build",
  "isDraft": false,
  "author": {
    "login": "jrdodds"
  },
  "milestone": {
    "title": "VS 17.7"
  },
  "assignees": {
    "nodes": []
  },
  "labels": [],
  "commits": {
    "nodes": [
      {
        "commit": {
          "oid": "dd5c53940799c1a8895a90fe10d70a28518f9a2e",
          "message": "don't build a sln when -preprocess or -targets is passed",
          "committedDate": "2022-08-04T22:44:20Z",
          "author": {
            "name": "Jonathan Dodds",
            "email": "jrdodds@me.com"
          }
        }
      },
      {
        "commit": {
          "oid": "139686c8bca2c5db8cd1f000e558086b920a4ed1",
          "message": "Merge branch 'dotnet:main' into Solution-Targets",
          "committedDate": "2022-08-05T22:02:33Z",
          "author": {
            "name": "Jonathan Dodds",
            "email": "jrdodds@me.com"
          }
        }
      },
      {
        "commit": {
          "oid": "e99dc99f06a8b623800d8614a03a63ade9fe550d",
          "message": "Merge branch 'dotnet:main' into Solution-Targets",
          "committedDate": "2022-08-09T19:42:58Z",
          "author": {
            "name": "Jonathan Dodds",
            "email": "jrdodds@me.com"
          }
        }
      },
      {
        "commit": {
          "oid": "ba4e183894e34883fc8b944d0a5a5b625d00bb8b",
          "message": "Merge branch 'dotnet:main' into Solution-Targets",
          "committedDate": "2022-08-11T13:36:12Z",
          "author": {
            "name": "Jonathan Dodds",
            "email": "jrdodds@me.com"
          }
        }
      },
      {
        "commit": {
          "oid": "d9f8d71ad50915308dfc5585fe35dd56cf8a90a1",
          "message": "Merge branch 'dotnet:main' into Solution-Targets",
          "committedDate": "2022-08-12T12:43:12Z",
          "author": {
            "name": "Jonathan Dodds",
            "email": "jrdodds@me.com"
          }
        }
      },
      {
        "commit": {
          "oid": "60c876ec9abecb5ec50f810edeb70a81f213eb79",
          "message": "Merge branch 'dotnet:main' into Solution-Targets",
          "committedDate": "2022-08-13T20:40:08Z",
          "author": {
            "name": "Jonathan Dodds",
            "email": "jrdodds@me.com"
          }
        }
      },
      {
        "commit": {
          "oid": "ab5c0e5e5b1e5ad8f253724a2b2136b42c37c139",
          "message": "Merge branch 'dotnet:main' into Solution-Targets",
          "committedDate": "2022-08-15T20:44:19Z",
          "author": {
            "name": "Jonathan Dodds",
            "email": "jrdodds@me.com"
          }
        }
      },
      {
        "commit": {
          "oid": "ac153bbdfb1739c0f40d55fa9feb15156fe7a3ad",
          "message": "Merge branch 'dotnet:main' into Solution-Targets",
          "committedDate": "2022-08-16T21:29:48Z",
          "author": {
            "name": "Jonathan Dodds",
            "email": "jrdodds@me.com"
          }
        }
      },
      {
        "commit": {
          "oid": "ac95c3cc8c25ffb09754fb1d99f4c99d562339a1",
          "message": "Merge branch 'dotnet:main' into Solution-Targets",
          "committedDate": "2022-08-20T12:33:46Z",
          "author": {
            "name": "Jonathan Dodds",
            "email": "jrdodds@me.com"
          }
        }
      },
      {
        "commit": {
          "oid": "0ff609929b88b60f376da85d075b6eb25aecf8e2",
          "message": "Merge branch 'dotnet:main' into Solution-Targets",
          "committedDate": "2022-08-26T12:32:37Z",
          "author": {
            "name": "Jonathan Dodds",
            "email": "jrdodds@me.com"
          }
        }
      },
      {
        "commit": {
          "oid": "86b2d3bcd95bf77d99a92f0db0efeedbd763cba7",
          "message": "Merge branch 'dotnet:main' into Solution-Targets",
          "committedDate": "2022-08-30T12:11:54Z",
          "author": {
            "name": "Jonathan Dodds",
            "email": "jrdodds@me.com"
          }
        }
      },
      {
        "commit": {
          "oid": "c66c83d82e9ace21f57d551d1d981bfee27a9e65",
          "message": "Merge branch 'dotnet:main' into Solution-Targets",
          "committedDate": "2022-09-01T18:20:46Z",
          "author": {
            "name": "Jonathan Dodds",
            "email": "jrdodds@me.com"
          }
        }
      },
      {
        "commit": {
          "oid": "af465fb90ea597e34516eeb7c669da6d22d77398",
          "message": "Merge branch 'dotnet:main' into Solution-Targets",
          "committedDate": "2022-09-03T01:22:53Z",
          "author": {
            "name": "Jonathan Dodds",
            "email": "jrdodds@me.com"
          }
        }
      },
      {
        "commit": {
          "oid": "d6b923cc7fafd4383143dbaac2ce74b6af5b07ec",
          "message": "Merge branch 'dotnet:main' into Solution-Targets",
          "committedDate": "2022-09-08T20:32:49Z",
          "author": {
            "name": "Jonathan Dodds",
            "email": "jrdodds@me.com"
          }
        }
      },
      {
        "commit": {
          "oid": "c70ca768dfd8f832d36f4088a17b1ff9ed3087f5",
          "message": "Merge branch 'dotnet:main' into Solution-Targets",
          "committedDate": "2022-09-19T13:47:01Z",
          "author": {
            "name": "Jonathan Dodds",
            "email": "jrdodds@me.com"
          }
        }
      },
      {
        "commit": {
          "oid": "337bc16158f145bb605eac9f12b99f4db1aa8401",
          "message": "Merge branch 'dotnet:main' into Solution-Targets",
          "committedDate": "2022-09-22T19:31:57Z",
          "author": {
            "name": "Jonathan Dodds",
            "email": "jrdodds@me.com"
          }
        }
      },
      {
        "commit": {
          "oid": "da8d39ca354bcdd3287abf2c284aa85f06de5929",
          "message": "Merge branch 'dotnet:main' into Solution-Targets",
          "committedDate": "2022-09-23T12:07:06Z",
          "author": {
            "name": "Jonathan Dodds",
            "email": "jrdodds@me.com"
          }
        }
      },
      {
        "commit": {
          "oid": "f6774191d67b34f390a820d42e882d77f5acfc2a",
          "message": "Merge branch 'dotnet:main' into Solution-Targets",
          "committedDate": "2022-09-25T11:15:17Z",
          "author": {
            "name": "Jonathan Dodds",
            "email": "jrdodds@me.com"
          }
        }
      },
      {
        "commit": {
          "oid": "6c55364b9dd37783feb8db6aeed6f6b1c42a4ba0",
          "message": "Merge branch 'dotnet:main' into Solution-Targets",
          "committedDate": "2022-09-28T12:37:34Z",
          "author": {
            "name": "Jonathan Dodds",
            "email": "jrdodds@me.com"
          }
        }
      },
      {
        "commit": {
          "oid": "2b15ac72b6fda424250cd7eb961a53970c23a9a3",
          "message": "Merge branch 'dotnet:main' into Solution-Targets",
          "committedDate": "2022-09-30T13:26:22Z",
          "author": {
            "name": "Jonathan Dodds",
            "email": "jrdodds@me.com"
          }
        }
      },
      {
        "commit": {
          "oid": "b1a00a0b36f2b20978ed821095398992ce44c438",
          "message": "Merge branch 'dotnet:main' into Solution-Targets",
          "committedDate": "2022-10-03T16:31:16Z",
          "author": {
            "name": "Jonathan Dodds",
            "email": "jrdodds@me.com"
          }
        }
      },
      {
        "commit": {
          "oid": "d9586cbe43224bf6d9708439f51f2deb256cba19",
          "message": "Merge branch 'dotnet:main' into Solution-Targets",
          "committedDate": "2022-10-07T13:56:20Z",
          "author": {
            "name": "Jonathan Dodds",
            "email": "jrdodds@me.com"
          }
        }
      },
      {
        "commit": {
          "oid": "2363b4a831f91252bd43959e3836ea81c5720da2",
          "message": "Merge branch 'dotnet:main' into Solution-Targets",
          "committedDate": "2022-10-09T22:59:09Z",
          "author": {
            "name": "Jonathan Dodds",
            "email": "jrdodds@me.com"
          }
        }
      },
      {
        "commit": {
          "oid": "c068c0a4a721df0730044417182da7e7472f9294",
          "message": "Merge branch 'dotnet:main' into Solution-Targets",
          "committedDate": "2022-10-11T18:16:45Z",
          "author": {
            "name": "Jonathan Dodds",
            "email": "jrdodds@me.com"
          }
        }
      },
      {
        "commit": {
          "oid": "662b8cb5dc7c21d196a1fd33a350f333ed0f311e",
          "message": "Merge branch 'dotnet:main' into Solution-Targets",
          "committedDate": "2022-10-13T21:49:10Z",
          "author": {
            "name": "Jonathan Dodds",
            "email": "jrdodds@me.com"
          }
        }
      },
      {
        "commit": {
          "oid": "8ac944a4f45960b0d0878631300ae34325648a7e",
          "message": "Merge branch 'dotnet:main' into Solution-Targets",
          "committedDate": "2022-10-17T19:50:52Z",
          "author": {
            "name": "Jonathan Dodds",
            "email": "jrdodds@me.com"
          }
        }
      },
      {
        "commit": {
          "oid": "aaab0287a112d6705aef6fc4464b8879db0f3e4a",
          "message": "Merge branch 'dotnet:main' into Solution-Targets",
          "committedDate": "2022-10-19T02:22:33Z",
          "author": {
            "name": "Jonathan Dodds",
            "email": "jrdodds@me.com"
          }
        }
      },
      {
        "commit": {
          "oid": "0340297dc654c9e3ee06bbb5fd221afd7a524a40",
          "message": "Merge branch 'dotnet:main' into Solution-Targets",
          "committedDate": "2022-10-19T20:07:59Z",
          "author": {
            "name": "Jonathan Dodds",
            "email": "jrdodds@me.com"
          }
        }
      },
      {
        "commit": {
          "oid": "914f630c1ae2d009e97f5eddcc3e6c3b0a35e404",
          "message": "Merge branch 'dotnet:main' into Solution-Targets",
          "committedDate": "2022-10-20T14:31:37Z",
          "author": {
            "name": "Jonathan Dodds",
            "email": "jrdodds@me.com"
          }
        }
      },
      {
        "commit": {
          "oid": "9e56bd4a23b116d7256b3235ccdb5796b819d848",
          "message": "Merge branch 'dotnet:main' into Solution-Targets",
          "committedDate": "2022-10-23T20:01:07Z",
          "author": {
            "name": "Jonathan Dodds",
            "email": "jrdodds@me.com"
          }
        }
      },
      {
        "commit": {
          "oid": "39ee0b283dd421a9615a0a42826e6d900b75b060",
          "message": "Merge branch 'dotnet:main' into Solution-Targets",
          "committedDate": "2022-10-24T14:32:14Z",
          "author": {
            "name": "Jonathan Dodds",
            "email": "jrdodds@me.com"
          }
        }
      },
      {
        "commit": {
          "oid": "b3dcb3a08c7fe201888156908e43bb4d79dce5a3",
          "message": "Merge branch 'dotnet:main' into Solution-Targets",
          "committedDate": "2022-10-25T21:17:49Z",
          "author": {
            "name": "Jonathan Dodds",
            "email": "jrdodds@me.com"
          }
        }
      },
      {
        "commit": {
          "oid": "aaeee91f49fa11ec26520fea10227f229a1c25ef",
          "message": "Merge branch 'dotnet:main' into Solution-Targets",
          "committedDate": "2022-10-27T19:59:22Z",
          "author": {
            "name": "Jonathan Dodds",
            "email": "jrdodds@me.com"
          }
        }
      },
      {
        "commit": {
          "oid": "807ceee89d109efe5fb02a6692f083068350a009",
          "message": "Merge branch 'dotnet:main' into Solution-Targets",
          "committedDate": "2022-11-03T11:50:40Z",
          "author": {
            "name": "Jonathan Dodds",
            "email": "jrdodds@me.com"
          }
        }
      },
      {
        "commit": {
          "oid": "2491b83152aeb3647b00fc32cb32a6dc6db1f47e",
          "message": "Merge branch 'dotnet:main' into Solution-Targets",
          "committedDate": "2022-11-04T14:11:05Z",
          "author": {
            "name": "Jonathan Dodds",
            "email": "jrdodds@me.com"
          }
        }
      },
      {
        "commit": {
          "oid": "40313cd4174412532d33d25498eff98787610413",
          "message": "Merge branch 'dotnet:main' into Solution-Targets",
          "committedDate": "2022-11-05T21:48:28Z",
          "author": {
            "name": "Jonathan Dodds",
            "email": "jrdodds@me.com"
          }
        }
      },
      {
        "commit": {
          "oid": "0b7a6501efdf004a8dcafa6689aa5428e1caa80d",
          "message": "Merge branch 'dotnet:main' into Solution-Targets",
          "committedDate": "2022-11-09T13:44:15Z",
          "author": {
            "name": "Jonathan Dodds",
            "email": "jrdodds@me.com"
          }
        }
      },
      {
        "commit": {
          "oid": "8b293264b1f6b1f2f688ca766226ec0eee77ff9b",
          "message": "Merge branch 'dotnet:main' into Solution-Targets",
          "committedDate": "2022-11-12T02:13:55Z",
          "author": {
            "name": "Jonathan Dodds",
            "email": "jrdodds@me.com"
          }
        }
      },
      {
        "commit": {
          "oid": "207894c61f4ed265cff1b2199f09c743c93962c1",
          "message": "Merge branch 'dotnet:main' into Solution-Targets",
          "committedDate": "2022-11-14T14:55:44Z",
          "author": {
            "name": "Jonathan Dodds",
            "email": "jrdodds@me.com"
          }
        }
      },
      {
        "commit": {
          "oid": "2eae849c14f4e8de989b089cb418bf3e21cc452e",
          "message": "Merge branch 'dotnet:main' into Solution-Targets",
          "committedDate": "2022-11-18T19:01:37Z",
          "author": {
            "name": "Jonathan Dodds",
            "email": "jrdodds@me.com"
          }
        }
      },
      {
        "commit": {
          "oid": "7c2cd3f2ea90c2f15ac0cfa9ec5afa2c96dcd150",
          "message": "Merge branch 'dotnet:main' into Solution-Targets",
          "committedDate": "2022-11-22T13:06:56Z",
          "author": {
            "name": "Jonathan Dodds",
            "email": "jrdodds@me.com"
          }
        }
      },
      {
        "commit": {
          "oid": "d4a0d9a2b9d890be35e47d8cf8cdc25e5255d8b6",
          "message": "Merge branch 'dotnet:main' into Solution-Targets",
          "committedDate": "2022-11-23T22:34:13Z",
          "author": {
            "name": "Jonathan Dodds",
            "email": "jrdodds@me.com"
          }
        }
      },
      {
        "commit": {
          "oid": "2ced38f8aa51a000bcba7f801bd3755d23ce132a",
          "message": "Merge branch 'dotnet:main' into Solution-Targets",
          "committedDate": "2022-12-01T16:07:30Z",
          "author": {
            "name": "Jonathan Dodds",
            "email": "jrdodds@me.com"
          }
        }
      },
      {
        "commit": {
          "oid": "8ca8f9db47a276dfb9a356b7e149f9d185bdcad2",
          "message": "Merge branch 'dotnet:main' into Solution-Targets",
          "committedDate": "2022-12-06T18:18:13Z",
          "author": {
            "name": "Jonathan Dodds",
            "email": "jrdodds@me.com"
          }
        }
      },
      {
        "commit": {
          "oid": "fc59fb9f9fc87c4ab805b60d2143bae1d00551e1",
          "message": "Merge branch 'dotnet:main' into Solution-Targets",
          "committedDate": "2022-12-07T17:26:57Z",
          "author": {
            "name": "Jonathan Dodds",
            "email": "jrdodds@me.com"
          }
        }
      },
      {
        "commit": {
          "oid": "235e91c7bbac64a5a9c1a5df007512e291a63964",
          "message": "Merge branch 'dotnet:main' into Solution-Targets",
          "committedDate": "2022-12-08T13:07:03Z",
          "author": {
            "name": "Jonathan Dodds",
            "email": "jrdodds@me.com"
          }
        }
      },
      {
        "commit": {
          "oid": "dfb545286b647f47bd3a6e5d989ade7fc1e66f85",
          "message": "Merge branch 'dotnet:main' into Solution-Targets",
          "committedDate": "2022-12-12T18:41:53Z",
          "author": {
            "name": "Jonathan Dodds",
            "email": "jrdodds@me.com"
          }
        }
      },
      {
        "commit": {
          "oid": "207bd97966c51afc37621c26411310b3fb675ede",
          "message": "Merge branch 'dotnet:main' into Solution-Targets",
          "committedDate": "2022-12-13T14:42:37Z",
          "author": {
            "name": "Jonathan Dodds",
            "email": "jrdodds@me.com"
          }
        }
      },
      {
        "commit": {
          "oid": "23aa710f11fdc1f07e49125544cb4f23c0b302a0",
          "message": "Merge branch 'dotnet:main' into Solution-Targets",
          "committedDate": "2022-12-14T16:24:34Z",
          "author": {
            "name": "Jonathan Dodds",
            "email": "jrdodds@me.com"
          }
        }
      },
      {
        "commit": {
          "oid": "583b659e501dce95488aa7b070ced3b4db8d3c2a",
          "message": "Merge branch 'dotnet:main' into Solution-Targets",
          "committedDate": "2022-12-16T12:58:59Z",
          "author": {
            "name": "Jonathan Dodds",
            "email": "jrdodds@me.com"
          }
        }
      },
      {
        "commit": {
          "oid": "850c8b97bb7ea947701686dbcc76d035a9b3d72f",
          "message": "Merge branch 'dotnet:main' into Solution-Targets",
          "committedDate": "2022-12-19T13:06:21Z",
          "author": {
            "name": "Jonathan Dodds",
            "email": "jrdodds@me.com"
          }
        }
      },
      {
        "commit": {
          "oid": "0039b8607f7e09edac0c6d1b6864193fb07c5318",
          "message": "Merge branch 'dotnet:main' into Solution-Targets",
          "committedDate": "2022-12-21T19:13:52Z",
          "author": {
            "name": "Jonathan Dodds",
            "email": "jrdodds@me.com"
          }
        }
      },
      {
        "commit": {
          "oid": "39f85c0cad5cdfa3c033dbfa3224e6b37b7931b5",
          "message": "Merge branch 'dotnet:main' into Solution-Targets",
          "committedDate": "2023-01-03T22:56:48Z",
          "author": {
            "name": "Jonathan Dodds",
            "email": "jrdodds@me.com"
          }
        }
      },
      {
        "commit": {
          "oid": "98916156347be0e05323333e3466b9193f76ca1a",
          "message": "Merge branch 'dotnet:main' into Solution-Targets",
          "committedDate": "2023-01-04T13:47:25Z",
          "author": {
            "name": "Jonathan Dodds",
            "email": "jrdodds@me.com"
          }
        }
      },
      {
        "commit": {
          "oid": "8cbf2d85a79aa88eb08105b6be0302a6876074ec",
          "message": "Merge branch 'dotnet:main' into Solution-Targets",
          "committedDate": "2023-01-05T13:33:36Z",
          "author": {
            "name": "Jonathan Dodds",
            "email": "jrdodds@me.com"
          }
        }
      },
      {
        "commit": {
          "oid": "55b84c7e24bb00cec253916589e59f24da7a2f06",
          "message": "Merge branch 'dotnet:main' into Solution-Targets",
          "committedDate": "2023-01-08T14:44:47Z",
          "author": {
            "name": "Jonathan Dodds",
            "email": "jrdodds@me.com"
          }
        }
      },
      {
        "commit": {
          "oid": "f734048d6644ff83798687c9c830baddd12a56ed",
          "message": "Merge branch 'dotnet:main' into Solution-Targets",
          "committedDate": "2023-01-14T15:47:23Z",
          "author": {
            "name": "Jonathan Dodds",
            "email": "jrdodds@me.com"
          }
        }
      },
      {
        "commit": {
          "oid": "881bd40ddaa45973153dcd774dded1653461f95f",
          "message": "Merge branch 'dotnet:main' into Solution-Targets",
          "committedDate": "2023-01-23T03:20:36Z",
          "author": {
            "name": "Jonathan Dodds",
            "email": "jrdodds@me.com"
          }
        }
      },
      {
        "commit": {
          "oid": "48cb4e091fe059f2bf289bf3d311b9f3f8a02457",
          "message": "Merge branch 'dotnet:main' into Solution-Targets",
          "committedDate": "2023-01-30T16:49:26Z",
          "author": {
            "name": "Jonathan Dodds",
            "email": "jrdodds@me.com"
          }
        }
      },
      {
        "commit": {
          "oid": "ac1082bbf767e5a3f898b439eaeb6624fa95243a",
          "message": "Merge branch 'dotnet:main' into Solution-Targets",
          "committedDate": "2023-02-01T12:59:48Z",
          "author": {
            "name": "Jonathan Dodds",
            "email": "jrdodds@me.com"
          }
        }
      },
      {
        "commit": {
          "oid": "f213799b8da911811219beeb2dbef5f8d6ae6419",
          "message": "Merge branch 'dotnet:main' into Solution-Targets",
          "committedDate": "2023-02-06T04:34:57Z",
          "author": {
            "name": "Jonathan Dodds",
            "email": "jrdodds@me.com"
          }
        }
      },
      {
        "commit": {
          "oid": "c954b43a6992f4ec49f812c655ec97e8bac0347f",
          "message": "Merge branch 'dotnet:main' into Solution-Targets",
          "committedDate": "2023-02-07T22:24:22Z",
          "author": {
            "name": "Jonathan Dodds",
            "email": "jrdodds@me.com"
          }
        }
      },
      {
        "commit": {
          "oid": "5a095aad6ebbfce77deabd9bc7563b37524d9d2c",
          "message": "Merge branch 'dotnet:main' into Solution-Targets",
          "committedDate": "2023-02-08T12:40:24Z",
          "author": {
            "name": "Jonathan Dodds",
            "email": "jrdodds@me.com"
          }
        }
      },
      {
        "commit": {
          "oid": "0df505e2a52aa55795c72a9e15f71f7b0d1432e9",
          "message": "Merge branch 'dotnet:main' into Solution-Targets",
          "committedDate": "2023-03-06T20:57:59Z",
          "author": {
            "name": "Jonathan Dodds",
            "email": "jrdodds@me.com"
          }
        }
      },
      {
        "commit": {
          "oid": "c758cbd91c22afcf2ec3c6322ca89c60501c09cc",
          "message": "Merge branch 'dotnet:main' into Solution-Targets",
          "committedDate": "2023-03-09T14:33:06Z",
          "author": {
            "name": "Jonathan Dodds",
            "email": "jrdodds@me.com"
          }
        }
      },
      {
        "commit": {
          "oid": "d8984a1cb73208387227ea52c3c857ba224c3666",
          "message": "Merge branch 'dotnet:main' into Solution-Targets",
          "committedDate": "2023-03-11T14:37:24Z",
          "author": {
            "name": "Jonathan Dodds",
            "email": "jrdodds@me.com"
          }
        }
      },
      {
        "commit": {
          "oid": "1024587565307d9fb0f2587230dcc60cffd8585d",
          "message": "Merge branch 'dotnet:main' into Solution-Targets",
          "committedDate": "2023-03-13T03:31:42Z",
          "author": {
            "name": "Jonathan Dodds",
            "email": "jrdodds@me.com"
          }
        }
      },
      {
        "commit": {
          "oid": "41a33c86178a2d93370e45da3ade4041eb9f59ee",
          "message": "Merge branch 'dotnet:main' into Solution-Targets",
          "committedDate": "2023-03-14T02:51:47Z",
          "author": {
            "name": "Jonathan Dodds",
            "email": "jrdodds@me.com"
          }
        }
      },
      {
        "commit": {
          "oid": "0f9f44839a5bfdf45bd1a1d5bdc6c17d0c8d6240",
          "message": "Merge branch 'dotnet:main' into Solution-Targets",
          "committedDate": "2023-03-15T13:30:43Z",
          "author": {
            "name": "Jonathan Dodds",
            "email": "jrdodds@me.com"
          }
        }
      },
      {
        "commit": {
          "oid": "be0a1ace0f38485abc31a7178ed0421d0e8dc917",
          "message": "Merge branch 'dotnet:main' into Solution-Targets",
          "committedDate": "2023-03-22T15:11:25Z",
          "author": {
            "name": "Jonathan Dodds",
            "email": "jrdodds@me.com"
          }
        }
      },
      {
        "commit": {
          "oid": "166e3250f1790dc5e1ab67c171c928510bef7dfd",
          "message": "Add message for unsupported switches on solution files",
          "committedDate": "2023-03-23T02:27:22Z",
          "author": {
            "name": "Jonathan Dodds",
            "email": "jrdodds@me.com"
          }
        }
      },
      {
        "commit": {
          "oid": "bb70d455aa389f4a9d4361b721225863d8d78531",
          "message": "modify comment",
          "committedDate": "2023-03-23T03:21:56Z",
          "author": {
            "name": "Jonathan Dodds",
            "email": "jrdodds@me.com"
          }
        }
      },
      {
        "commit": {
          "oid": "61d1ae96b870055ddfad2e812826c1b7c2e7414e",
          "message": "changes based on review",
          "committedDate": "2023-03-24T18:36:44Z",
          "author": {
            "name": "Jonathan Dodds",
            "email": "jrdodds@me.com"
          }
        }
      },
      {
        "commit": {
          "oid": "e749450e7b89741f584477dccf25e67e841d6e77",
          "message": "changes based on review",
          "committedDate": "2023-03-24T18:44:18Z",
          "author": {
            "name": "Jonathan Dodds",
            "email": "jrdodds@me.com"
          }
        }
      },
      {
        "commit": {
          "oid": "9f3f56e765cfc9750a2aee1561ebf0bbae599001",
          "message": "Merge branch 'dotnet:main' into Solution-Targets-Dont-Build",
          "committedDate": "2023-03-27T02:08:42Z",
          "author": {
            "name": "Jonathan Dodds",
            "email": "jrdodds@me.com"
          }
        }
      },
      {
        "commit": {
          "oid": "951cb9f72690be4b425073f8b7bda988e0e32463",
          "message": "Merge branch 'dotnet:main' into Solution-Targets-Dont-Build",
          "committedDate": "2023-03-29T11:56:19Z",
          "author": {
            "name": "Jonathan Dodds",
            "email": "jrdodds@me.com"
          }
        }
      },
      {
        "commit": {
          "oid": "df11069f67d74e10f7a9f09151f8badb32a1e842",
          "message": "Merge branch 'dotnet:main' into Solution-Targets-Dont-Build",
          "committedDate": "2023-04-01T13:56:38Z",
          "author": {
            "name": "Jonathan Dodds",
            "email": "jrdodds@me.com"
          }
        }
      }
    ]
  },
  "comments": {
    "nodes": [
      {
        "body": "> Looks good.\r\n> \r\n> In case of running on solution - do we want to output a message indicating that operation is not currently supported? Silently not performing anything might seem confusing.\r\n\r\nI agree that there should be a message. Just pushed a commit to add messages.",
        "createdAt": "2023-03-22T17:41:50Z",
        "author": {
          "login": "jrdodds"
        }
      },
      {
        "body": "Isn't /targets supported for a solution? It certainly used to be. There are many targets in the generated meta project?",
        "createdAt": "2023-03-27T05:47:08Z",
        "author": {
          "login": "danmoseley"
        }
      },
      {
        "body": "> Isn't /targets supported for a solution? It certainly used to be. There are many targets in the generated meta project?\r\n\r\nSpecifying `-target:{}` to build a specific target is still supported. What's not supported is the new `-targets`, which lists the targets available in the file to stdout (it was nontrivial to make it see past the solution metaproject so that part's just not done).",
        "createdAt": "2023-03-27T14:26:28Z",
        "author": {
          "login": "rainersigwald"
        }
      },
      {
        "body": "Thanks @jrdodds!",
        "createdAt": "2023-04-07T19:15:39Z",
        "author": {
          "login": "rainersigwald"
        }
      }
    ]
  },
  "reviewThreads": {
    "nodes": [
      {
        "comments": {
          "nodes": [
            {
              "body": "This keeps the previous logic, but does it make sense? Is there harm in simplifying to\r\n\r\n```suggestion\r\n                    loadProjectsReadOnly: !isPreprocess,\r\n```\r\n\r\n? That would change the readonly state for the case where we're going to fail out instead of doing anything, which seems ok, right?",
              "createdAt": "2023-03-23T14:19:21Z",
              "path": "src/MSBuild/XMake.cs",
              "diffHunk": "@@ -1217,7 +1221,7 @@ private static void ResetGatheringSwitchesState()\n                     toolsetDefinitionLocations,\n                     cpuCount,\n                     onlyLogCriticalEvents,\n-                    loadProjectsReadOnly: !preprocessOnly,\n+                    loadProjectsReadOnly: !isPreprocess || isSolution,",
              "author": {
                "login": "rainersigwald"
              }
            },
            {
              "body": "made the change",
              "createdAt": "2023-03-24T18:46:47Z",
              "path": "src/MSBuild/XMake.cs",
              "diffHunk": "@@ -1217,7 +1221,7 @@ private static void ResetGatheringSwitchesState()\n                     toolsetDefinitionLocations,\n                     cpuCount,\n                     onlyLogCriticalEvents,\n-                    loadProjectsReadOnly: !preprocessOnly,\n+                    loadProjectsReadOnly: !isPreprocess || isSolution,",
              "author": {
                "login": "jrdodds"
              }
            }
          ]
        }
      },
      {
        "comments": {
          "nodes": [
            {
              "body": "Feels like this is an error case\r\n```suggestion\r\n                        Console.WriteLine(ResourceUtilities.GetResourceString(\"UnsupportedSwitchForSolutionFiles\"), CommandLineSwitches.ParameterizedSwitch.Preprocess);\r\n                        success = false;\r\n```",
              "createdAt": "2023-03-23T14:23:16Z",
              "path": "src/MSBuild/XMake.cs",
              "diffHunk": "@@ -1246,22 +1250,36 @@ private static void ResetGatheringSwitchesState()\n                 }\n #endif\n \n-                if (preprocessOnly)\n+                if (isPreprocess)\n                 {\n-                    Project project = projectCollection.LoadProject(projectFile, globalProperties, toolsVersion);\n+                    // TODO: Support /preprocess switch for solution files.\n+                    if (isSolution)\n+                    {\n+                        Console.WriteLine(ResourceUtilities.GetResourceString(\"UnsupportedSwitchForSolutionFiles\"), CommandLineSwitches.ParameterizedSwitch.Preprocess);",
              "author": {
                "login": "rainersigwald"
              }
            },
            {
              "body": "made the change",
              "createdAt": "2023-03-24T18:47:17Z",
              "path": "src/MSBuild/XMake.cs",
              "diffHunk": "@@ -1246,22 +1250,36 @@ private static void ResetGatheringSwitchesState()\n                 }\n #endif\n \n-                if (preprocessOnly)\n+                if (isPreprocess)\n                 {\n-                    Project project = projectCollection.LoadProject(projectFile, globalProperties, toolsVersion);\n+                    // TODO: Support /preprocess switch for solution files.\n+                    if (isSolution)\n+                    {\n+                        Console.WriteLine(ResourceUtilities.GetResourceString(\"UnsupportedSwitchForSolutionFiles\"), CommandLineSwitches.ParameterizedSwitch.Preprocess);",
              "author": {
                "login": "jrdodds"
              }
            }
          ]
        }
      },
      {
        "comments": {
          "nodes": [
            {
              "body": "```suggestion\r\n                        success = true;\r\n                    }\r\n```",
              "createdAt": "2023-03-23T14:23:59Z",
              "path": "src/MSBuild/XMake.cs",
              "diffHunk": "@@ -1246,22 +1250,36 @@ private static void ResetGatheringSwitchesState()\n                 }\n #endif\n \n-                if (preprocessOnly)\n+                if (isPreprocess)\n                 {\n-                    Project project = projectCollection.LoadProject(projectFile, globalProperties, toolsVersion);\n+                    // TODO: Support /preprocess switch for solution files.\n+                    if (isSolution)\n+                    {\n+                        Console.WriteLine(ResourceUtilities.GetResourceString(\"UnsupportedSwitchForSolutionFiles\"), CommandLineSwitches.ParameterizedSwitch.Preprocess);\n+                    }\n+                    else\n+                    {\n+                        Project project = projectCollection.LoadProject(projectFile, globalProperties, toolsVersion);\n \n-                    project.SaveLogicalProject(preprocessWriter);\n+                        project.SaveLogicalProject(preprocessWriter);\n+\n+                        projectCollection.UnloadProject(project);\n+                    }",
              "author": {
                "login": "rainersigwald"
              }
            },
            {
              "body": "made the change",
              "createdAt": "2023-03-24T18:47:35Z",
              "path": "src/MSBuild/XMake.cs",
              "diffHunk": "@@ -1246,22 +1250,36 @@ private static void ResetGatheringSwitchesState()\n                 }\n #endif\n \n-                if (preprocessOnly)\n+                if (isPreprocess)\n                 {\n-                    Project project = projectCollection.LoadProject(projectFile, globalProperties, toolsVersion);\n+                    // TODO: Support /preprocess switch for solution files.\n+                    if (isSolution)\n+                    {\n+                        Console.WriteLine(ResourceUtilities.GetResourceString(\"UnsupportedSwitchForSolutionFiles\"), CommandLineSwitches.ParameterizedSwitch.Preprocess);\n+                    }\n+                    else\n+                    {\n+                        Project project = projectCollection.LoadProject(projectFile, globalProperties, toolsVersion);\n \n-                    project.SaveLogicalProject(preprocessWriter);\n+                        project.SaveLogicalProject(preprocessWriter);\n+\n+                        projectCollection.UnloadProject(project);\n+                    }",
              "author": {
                "login": "jrdodds"
              }
            }
          ]
        }
      },
      {
        "comments": {
          "nodes": [
            {
              "body": "```suggestion\r\n```",
              "createdAt": "2023-03-23T14:24:08Z",
              "path": "src/MSBuild/XMake.cs",
              "diffHunk": "@@ -1246,22 +1250,36 @@ private static void ResetGatheringSwitchesState()\n                 }\n #endif\n \n-                if (preprocessOnly)\n+                if (isPreprocess)\n                 {\n-                    Project project = projectCollection.LoadProject(projectFile, globalProperties, toolsVersion);\n+                    // TODO: Support /preprocess switch for solution files.\n+                    if (isSolution)\n+                    {\n+                        Console.WriteLine(ResourceUtilities.GetResourceString(\"UnsupportedSwitchForSolutionFiles\"), CommandLineSwitches.ParameterizedSwitch.Preprocess);\n+                    }\n+                    else\n+                    {\n+                        Project project = projectCollection.LoadProject(projectFile, globalProperties, toolsVersion);\n \n-                    project.SaveLogicalProject(preprocessWriter);\n+                        project.SaveLogicalProject(preprocessWriter);\n+\n+                        projectCollection.UnloadProject(project);\n+                    }\n \n-                    projectCollection.UnloadProject(project);\n                     success = true;",
              "author": {
                "login": "rainersigwald"
              }
            },
            {
              "body": "made the change",
              "createdAt": "2023-03-24T18:50:30Z",
              "path": "src/MSBuild/XMake.cs",
              "diffHunk": "@@ -1246,22 +1250,36 @@ private static void ResetGatheringSwitchesState()\n                 }\n #endif\n \n-                if (preprocessOnly)\n+                if (isPreprocess)\n                 {\n-                    Project project = projectCollection.LoadProject(projectFile, globalProperties, toolsVersion);\n+                    // TODO: Support /preprocess switch for solution files.\n+                    if (isSolution)\n+                    {\n+                        Console.WriteLine(ResourceUtilities.GetResourceString(\"UnsupportedSwitchForSolutionFiles\"), CommandLineSwitches.ParameterizedSwitch.Preprocess);\n+                    }\n+                    else\n+                    {\n+                        Project project = projectCollection.LoadProject(projectFile, globalProperties, toolsVersion);\n \n-                    project.SaveLogicalProject(preprocessWriter);\n+                        project.SaveLogicalProject(preprocessWriter);\n+\n+                        projectCollection.UnloadProject(project);\n+                    }\n \n-                    projectCollection.UnloadProject(project);\n                     success = true;",
              "author": {
                "login": "jrdodds"
              }
            }
          ]
        }
      },
      {
        "comments": {
          "nodes": [
            {
              "body": "```suggestion\r\n                    // TODO: Support /targets for solution files. https://github.com/dotnet/msbuild/issues/7697\r\n```",
              "createdAt": "2023-03-23T14:24:58Z",
              "path": "src/MSBuild/XMake.cs",
              "diffHunk": "@@ -1246,22 +1250,36 @@ private static void ResetGatheringSwitchesState()\n                 }\n #endif\n \n-                if (preprocessOnly)\n+                if (isPreprocess)\n                 {\n-                    Project project = projectCollection.LoadProject(projectFile, globalProperties, toolsVersion);\n+                    // TODO: Support /preprocess switch for solution files.\n+                    if (isSolution)\n+                    {\n+                        Console.WriteLine(ResourceUtilities.GetResourceString(\"UnsupportedSwitchForSolutionFiles\"), CommandLineSwitches.ParameterizedSwitch.Preprocess);\n+                    }\n+                    else\n+                    {\n+                        Project project = projectCollection.LoadProject(projectFile, globalProperties, toolsVersion);\n \n-                    project.SaveLogicalProject(preprocessWriter);\n+                        project.SaveLogicalProject(preprocessWriter);\n+\n+                        projectCollection.UnloadProject(project);\n+                    }\n \n-                    projectCollection.UnloadProject(project);\n                     success = true;\n                 }\n \n-                if (targetsOnly)\n+                if (isTargets)\n                 {\n-                    success = PrintTargets(projectFile, toolsVersion, globalProperties, targetsWriter, projectCollection);\n+                    // TODO: Support /targets for solution files.",
              "author": {
                "login": "rainersigwald"
              }
            },
            {
              "body": "made the change",
              "createdAt": "2023-03-24T18:47:46Z",
              "path": "src/MSBuild/XMake.cs",
              "diffHunk": "@@ -1246,22 +1250,36 @@ private static void ResetGatheringSwitchesState()\n                 }\n #endif\n \n-                if (preprocessOnly)\n+                if (isPreprocess)\n                 {\n-                    Project project = projectCollection.LoadProject(projectFile, globalProperties, toolsVersion);\n+                    // TODO: Support /preprocess switch for solution files.\n+                    if (isSolution)\n+                    {\n+                        Console.WriteLine(ResourceUtilities.GetResourceString(\"UnsupportedSwitchForSolutionFiles\"), CommandLineSwitches.ParameterizedSwitch.Preprocess);\n+                    }\n+                    else\n+                    {\n+                        Project project = projectCollection.LoadProject(projectFile, globalProperties, toolsVersion);\n \n-                    project.SaveLogicalProject(preprocessWriter);\n+                        project.SaveLogicalProject(preprocessWriter);\n+\n+                        projectCollection.UnloadProject(project);\n+                    }\n \n-                    projectCollection.UnloadProject(project);\n                     success = true;\n                 }\n \n-                if (targetsOnly)\n+                if (isTargets)\n                 {\n-                    success = PrintTargets(projectFile, toolsVersion, globalProperties, targetsWriter, projectCollection);\n+                    // TODO: Support /targets for solution files.",
              "author": {
                "login": "jrdodds"
              }
            }
          ]
        }
      },
      {
        "comments": {
          "nodes": [
            {
              "body": "```suggestion\r\n                    if (isSolution)\r\n                    {\r\n                        Console.WriteLine(ResourceUtilities.GetResourceString(\"UnsupportedSwitchForSolutionFiles\"), CommandLineSwitches.ParameterizedSwitch.Targets);\r\n                        success = false;\r\n                    }\r\n                    else\r\n                    {\r\n                        success = PrintTargets(projectFile, toolsVersion, globalProperties, targetsWriter, projectCollection);\r\n                    }\r\n```",
              "createdAt": "2023-03-23T14:25:49Z",
              "path": "src/MSBuild/XMake.cs",
              "diffHunk": "@@ -1246,22 +1250,36 @@ private static void ResetGatheringSwitchesState()\n                 }\n #endif\n \n-                if (preprocessOnly)\n+                if (isPreprocess)\n                 {\n-                    Project project = projectCollection.LoadProject(projectFile, globalProperties, toolsVersion);\n+                    // TODO: Support /preprocess switch for solution files.\n+                    if (isSolution)\n+                    {\n+                        Console.WriteLine(ResourceUtilities.GetResourceString(\"UnsupportedSwitchForSolutionFiles\"), CommandLineSwitches.ParameterizedSwitch.Preprocess);\n+                    }\n+                    else\n+                    {\n+                        Project project = projectCollection.LoadProject(projectFile, globalProperties, toolsVersion);\n \n-                    project.SaveLogicalProject(preprocessWriter);\n+                        project.SaveLogicalProject(preprocessWriter);\n+\n+                        projectCollection.UnloadProject(project);\n+                    }\n \n-                    projectCollection.UnloadProject(project);\n                     success = true;\n                 }\n \n-                if (targetsOnly)\n+                if (isTargets)\n                 {\n-                    success = PrintTargets(projectFile, toolsVersion, globalProperties, targetsWriter, projectCollection);\n+                    // TODO: Support /targets for solution files.\n+                    if (isSolution)\n+                    {\n+                        Console.WriteLine(ResourceUtilities.GetResourceString(\"UnsupportedSwitchForSolutionFiles\"), CommandLineSwitches.ParameterizedSwitch.Targets);\n+                    }\n+                    success = isSolution || PrintTargets(projectFile, toolsVersion, globalProperties, targetsWriter, projectCollection);",
              "author": {
                "login": "rainersigwald"
              }
            },
            {
              "body": "made the change",
              "createdAt": "2023-03-24T18:47:58Z",
              "path": "src/MSBuild/XMake.cs",
              "diffHunk": "@@ -1246,22 +1250,36 @@ private static void ResetGatheringSwitchesState()\n                 }\n #endif\n \n-                if (preprocessOnly)\n+                if (isPreprocess)\n                 {\n-                    Project project = projectCollection.LoadProject(projectFile, globalProperties, toolsVersion);\n+                    // TODO: Support /preprocess switch for solution files.\n+                    if (isSolution)\n+                    {\n+                        Console.WriteLine(ResourceUtilities.GetResourceString(\"UnsupportedSwitchForSolutionFiles\"), CommandLineSwitches.ParameterizedSwitch.Preprocess);\n+                    }\n+                    else\n+                    {\n+                        Project project = projectCollection.LoadProject(projectFile, globalProperties, toolsVersion);\n \n-                    project.SaveLogicalProject(preprocessWriter);\n+                        project.SaveLogicalProject(preprocessWriter);\n+\n+                        projectCollection.UnloadProject(project);\n+                    }\n \n-                    projectCollection.UnloadProject(project);\n                     success = true;\n                 }\n \n-                if (targetsOnly)\n+                if (isTargets)\n                 {\n-                    success = PrintTargets(projectFile, toolsVersion, globalProperties, targetsWriter, projectCollection);\n+                    // TODO: Support /targets for solution files.\n+                    if (isSolution)\n+                    {\n+                        Console.WriteLine(ResourceUtilities.GetResourceString(\"UnsupportedSwitchForSolutionFiles\"), CommandLineSwitches.ParameterizedSwitch.Targets);\n+                    }\n+                    success = isSolution || PrintTargets(projectFile, toolsVersion, globalProperties, targetsWriter, projectCollection);",
              "author": {
                "login": "jrdodds"
              }
            }
          ]
        }
      },
      {
        "comments": {
          "nodes": [
            {
              "body": "```suggestion\r\n                    // TODO: Support /preprocess switch for solution files. https://github.com/dotnet/msbuild/issues/7697\r\n```",
              "createdAt": "2023-03-23T14:27:29Z",
              "path": "src/MSBuild/XMake.cs",
              "diffHunk": "@@ -1246,22 +1250,36 @@ private static void ResetGatheringSwitchesState()\n                 }\n #endif\n \n-                if (preprocessOnly)\n+                if (isPreprocess)\n                 {\n-                    Project project = projectCollection.LoadProject(projectFile, globalProperties, toolsVersion);\n+                    // TODO: Support /preprocess switch for solution files.",
              "author": {
                "login": "rainersigwald"
              }
            },
            {
              "body": "made the change",
              "createdAt": "2023-03-24T18:48:09Z",
              "path": "src/MSBuild/XMake.cs",
              "diffHunk": "@@ -1246,22 +1250,36 @@ private static void ResetGatheringSwitchesState()\n                 }\n #endif\n \n-                if (preprocessOnly)\n+                if (isPreprocess)\n                 {\n-                    Project project = projectCollection.LoadProject(projectFile, globalProperties, toolsVersion);\n+                    // TODO: Support /preprocess switch for solution files.",
              "author": {
                "login": "jrdodds"
              }
            }
          ]
        }
      },
      {
        "comments": {
          "nodes": [
            {
              "body": "optional nit: I find the old names `*Only` clearer; IMO the problem was that the definition included solution when that doesn't really seem right.",
              "createdAt": "2023-03-23T14:27:48Z",
              "path": "src/MSBuild/XMake.cs",
              "diffHunk": "@@ -1207,8 +1210,9 @@ private static void ResetGatheringSwitchesState()\n \n                 ToolsetDefinitionLocations toolsetDefinitionLocations = ToolsetDefinitionLocations.Default;\n \n-                bool preprocessOnly = preprocessWriter != null && !FileUtilities.IsSolutionFilename(projectFile);\n-                bool targetsOnly = targetsWriter != null && !FileUtilities.IsSolutionFilename(projectFile);",
              "author": {
                "login": "rainersigwald"
              }
            },
            {
              "body": "It is not clear to me what 'Only' means here. The two switches are not exclusive of each other and both can be performed in one run. So 'Only' can't mean that only preprocess or only targets is being performed.",
              "createdAt": "2023-03-24T15:45:33Z",
              "path": "src/MSBuild/XMake.cs",
              "diffHunk": "@@ -1207,8 +1210,9 @@ private static void ResetGatheringSwitchesState()\n \n                 ToolsetDefinitionLocations toolsetDefinitionLocations = ToolsetDefinitionLocations.Default;\n \n-                bool preprocessOnly = preprocessWriter != null && !FileUtilities.IsSolutionFilename(projectFile);\n-                bool targetsOnly = targetsWriter != null && !FileUtilities.IsSolutionFilename(projectFile);",
              "author": {
                "login": "jrdodds"
              }
            },
            {
              "body": "> The two switches are not exclusive of each other and both can be performed in one run.\r\n\r\nReally? That sounds broken to me. I think they should be mutually exclusive.",
              "createdAt": "2023-03-24T15:46:50Z",
              "path": "src/MSBuild/XMake.cs",
              "diffHunk": "@@ -1207,8 +1210,9 @@ private static void ResetGatheringSwitchesState()\n \n                 ToolsetDefinitionLocations toolsetDefinitionLocations = ToolsetDefinitionLocations.Default;\n \n-                bool preprocessOnly = preprocessWriter != null && !FileUtilities.IsSolutionFilename(projectFile);\n-                bool targetsOnly = targetsWriter != null && !FileUtilities.IsSolutionFilename(projectFile);",
              "author": {
                "login": "rainersigwald"
              }
            },
            {
              "body": "I recall testing and seeing that the switches were not exclusive of each other. I just retested with the shipping version (MSBuild version 17.5.1+f6fdcf537). The switches are not mutually exclusive.\r\n\r\nThe two switches are orthogonal operations to each other. They don't conflict with each other, they don't modify each other, and they both don't perform a build. From that perspective they don't need to be mutually exclusive. \r\n\r\nBoth switches accept a file to write to, e.g. `msbuild -preprocess:test.xml -targets:targetlist.txt test.proj`, which may make some sense as a use case.",
              "createdAt": "2023-03-24T16:10:42Z",
              "path": "src/MSBuild/XMake.cs",
              "diffHunk": "@@ -1207,8 +1210,9 @@ private static void ResetGatheringSwitchesState()\n \n                 ToolsetDefinitionLocations toolsetDefinitionLocations = ToolsetDefinitionLocations.Default;\n \n-                bool preprocessOnly = preprocessWriter != null && !FileUtilities.IsSolutionFilename(projectFile);\n-                bool targetsOnly = targetsWriter != null && !FileUtilities.IsSolutionFilename(projectFile);",
              "author": {
                "login": "jrdodds"
              }
            },
            {
              "body": "I didn't make this change for the variable names because the two switches are not mutually exclusive.\r\n\r\nThere would need to be changes to the switch processing logic to make these two switches mutually exclusive.",
              "createdAt": "2023-03-24T18:51:52Z",
              "path": "src/MSBuild/XMake.cs",
              "diffHunk": "@@ -1207,8 +1210,9 @@ private static void ResetGatheringSwitchesState()\n \n                 ToolsetDefinitionLocations toolsetDefinitionLocations = ToolsetDefinitionLocations.Default;\n \n-                bool preprocessOnly = preprocessWriter != null && !FileUtilities.IsSolutionFilename(projectFile);\n-                bool targetsOnly = targetsWriter != null && !FileUtilities.IsSolutionFilename(projectFile);",
              "author": {
                "login": "jrdodds"
              }
            }
          ]
        }
      },
      {
        "comments": {
          "nodes": [
            {
              "body": "I don't know what the repo standard is (it's not my repo) but IMO todo comments and links to issues usually just make the code cluttered (often for years) when the same info could be found from the original PR or commit message.\n\nEg in this case I'd a simply comment something like \"// /targets could be supported for solution files in future\" ",
              "createdAt": "2023-03-29T14:10:59Z",
              "path": "src/MSBuild/XMake.cs",
              "diffHunk": "@@ -1246,22 +1251,41 @@ private static void ResetGatheringSwitchesState()\n                 }\n #endif\n \n-                if (preprocessOnly)\n+                if (isPreprocess)\n                 {\n-                    Project project = projectCollection.LoadProject(projectFile, globalProperties, toolsVersion);\n+                    // TODO: Support /preprocess for solution files. https://github.com/dotnet/msbuild/issues/7697\n+                    if (isSolution)\n+                    {\n+                        Console.WriteLine(ResourceUtilities.GetResourceString(\"UnsupportedSwitchForSolutionFiles\"), CommandLineSwitches.ParameterizedSwitch.Preprocess);\n+                        success = false;\n+                    }\n+                    else\n+                    {\n+                        Project project = projectCollection.LoadProject(projectFile, globalProperties, toolsVersion);\n \n-                    project.SaveLogicalProject(preprocessWriter);\n+                        project.SaveLogicalProject(preprocessWriter);\n \n-                    projectCollection.UnloadProject(project);\n-                    success = true;\n+                        projectCollection.UnloadProject(project);\n+\n+                        success = true;\n+                    }\n                 }\n \n-                if (targetsOnly)\n+                if (isTargets)\n                 {\n-                    success = PrintTargets(projectFile, toolsVersion, globalProperties, targetsWriter, projectCollection);\n+                    // TODO: Support /targets for solution files. https://github.com/dotnet/msbuild/issues/7697",
              "author": {
                "login": "danmoseley"
              }
            },
            {
              "body": "I added the TODO comments. I'm actively working on the issue to support /targets and /preprocess for solution files and this is intended to be an interim change. An earlier review requested adding the links. Regardless I have no issue with changing the comments if that's the standard and/or the consensus. Thanks",
              "createdAt": "2023-03-29T14:41:51Z",
              "path": "src/MSBuild/XMake.cs",
              "diffHunk": "@@ -1246,22 +1251,41 @@ private static void ResetGatheringSwitchesState()\n                 }\n #endif\n \n-                if (preprocessOnly)\n+                if (isPreprocess)\n                 {\n-                    Project project = projectCollection.LoadProject(projectFile, globalProperties, toolsVersion);\n+                    // TODO: Support /preprocess for solution files. https://github.com/dotnet/msbuild/issues/7697\n+                    if (isSolution)\n+                    {\n+                        Console.WriteLine(ResourceUtilities.GetResourceString(\"UnsupportedSwitchForSolutionFiles\"), CommandLineSwitches.ParameterizedSwitch.Preprocess);\n+                        success = false;\n+                    }\n+                    else\n+                    {\n+                        Project project = projectCollection.LoadProject(projectFile, globalProperties, toolsVersion);\n \n-                    project.SaveLogicalProject(preprocessWriter);\n+                        project.SaveLogicalProject(preprocessWriter);\n \n-                    projectCollection.UnloadProject(project);\n-                    success = true;\n+                        projectCollection.UnloadProject(project);\n+\n+                        success = true;\n+                    }\n                 }\n \n-                if (targetsOnly)\n+                if (isTargets)\n                 {\n-                    success = PrintTargets(projectFile, toolsVersion, globalProperties, targetsWriter, projectCollection);\n+                    // TODO: Support /targets for solution files. https://github.com/dotnet/msbuild/issues/7697",
              "author": {
                "login": "jrdodds"
              }
            },
            {
              "body": "I personally prefer to have the comment in the file, as it is now, as long as the link is to a permalink (we still have some that are like \"regression test for #1283456\" and I have no idea even what database that was in . . .)",
              "createdAt": "2023-03-29T14:53:48Z",
              "path": "src/MSBuild/XMake.cs",
              "diffHunk": "@@ -1246,22 +1251,41 @@ private static void ResetGatheringSwitchesState()\n                 }\n #endif\n \n-                if (preprocessOnly)\n+                if (isPreprocess)\n                 {\n-                    Project project = projectCollection.LoadProject(projectFile, globalProperties, toolsVersion);\n+                    // TODO: Support /preprocess for solution files. https://github.com/dotnet/msbuild/issues/7697\n+                    if (isSolution)\n+                    {\n+                        Console.WriteLine(ResourceUtilities.GetResourceString(\"UnsupportedSwitchForSolutionFiles\"), CommandLineSwitches.ParameterizedSwitch.Preprocess);\n+                        success = false;\n+                    }\n+                    else\n+                    {\n+                        Project project = projectCollection.LoadProject(projectFile, globalProperties, toolsVersion);\n \n-                    project.SaveLogicalProject(preprocessWriter);\n+                        project.SaveLogicalProject(preprocessWriter);\n \n-                    projectCollection.UnloadProject(project);\n-                    success = true;\n+                        projectCollection.UnloadProject(project);\n+\n+                        success = true;\n+                    }\n                 }\n \n-                if (targetsOnly)\n+                if (isTargets)\n                 {\n-                    success = PrintTargets(projectFile, toolsVersion, globalProperties, targetsWriter, projectCollection);\n+                    // TODO: Support /targets for solution files. https://github.com/dotnet/msbuild/issues/7697",
              "author": {
                "login": "rainersigwald"
              }
            }
          ]
        }
      }
    ]
  }
}